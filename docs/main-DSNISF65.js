import{a as P,b as fe,c as Fp,d as N,e as RI,f as ol,g as NI,h as PI,i as kI,j as Vp,k as OI,l as Wa,m as Lp,n as sl,o as FI,p as VI,q as jp,r as qe,s as Oi,t as $n,u as al,v as Ka,w as LI,x as jI,y as $r,z as un}from"./chunk-4ZHOUZTK.js";function BI(n,e){return Object.is(n,e)}var ut=null,ul=!1,cl=1,fr=Symbol("SIGNAL");function De(n){let e=ut;return ut=n,e}function UI(){return ut}var Ya={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function $p(n){if(ul)throw new Error("");if(ut===null)return;ut.consumerOnSignalRead(n);let e=ut.nextProducerIndex++;if(fl(ut),e<ut.producerNode.length&&ut.producerNode[e]!==n&&Qa(ut)){let t=ut.producerNode[e];hl(t,ut.producerIndexOfThis[e])}ut.producerNode[e]!==n&&(ut.producerNode[e]=n,ut.producerIndexOfThis[e]=Qa(ut)?zI(n,ut,e):0),ut.producerLastReadVersion[e]=n.version}function sN(){cl++}function $I(n){if(!(Qa(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===cl)){if(!n.producerMustRecompute(n)&&!qp(n)){n.dirty=!1,n.lastCleanEpoch=cl;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=cl}}function HI(n){if(n.liveConsumerNode===void 0)return;let e=ul;ul=!0;try{for(let t of n.liveConsumerNode)t.dirty||aN(t)}finally{ul=e}}function qI(){return ut?.consumerAllowSignalWrites!==!1}function aN(n){n.dirty=!0,HI(n),n.consumerMarkedDirty?.(n)}function dl(n){return n&&(n.nextProducerIndex=0),De(n)}function Hp(n,e){if(De(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(Qa(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)hl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function qp(n){fl(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||($I(t),r!==t.version))return!0}return!1}function zp(n){if(fl(n),Qa(n))for(let e=0;e<n.producerNode.length;e++)hl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function zI(n,e,t){if(GI(n),n.liveConsumerNode.length===0&&WI(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=zI(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function hl(n,e){if(GI(n),n.liveConsumerNode.length===1&&WI(n))for(let r=0;r<n.producerNode.length;r++)hl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],i=n.liveConsumerNode[e];fl(i),i.producerIndexOfThis[r]=e}}function Qa(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function fl(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function GI(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function WI(n){return n.producerNode!==void 0}function KI(n){let e=Object.create(uN);e.computation=n;let t=()=>{if($I(e),$p(e),e.value===ll)throw e.error;return e.value};return t[fr]=e,t}var Bp=Symbol("UNSET"),Up=Symbol("COMPUTING"),ll=Symbol("ERRORED"),uN=fe(P({},Ya),{value:Bp,dirty:!0,error:null,equal:BI,producerMustRecompute(n){return n.value===Bp||n.value===Up},producerRecomputeValue(n){if(n.value===Up)throw new Error("Detected cycle in computations.");let e=n.value;n.value=Up;let t=dl(n),r;try{r=n.computation()}catch(i){r=ll,n.error=i}finally{Hp(n,t)}if(e!==Bp&&e!==ll&&r!==ll&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function cN(){throw new Error}var QI=cN;function YI(){QI()}function ZI(n){QI=n}var lN=null;function JI(n){let e=Object.create(eD);e.value=n;let t=()=>($p(e),e.value);return t[fr]=e,t}function Gp(n,e){qI()||YI(),n.equal(n.value,e)||(n.value=e,dN(n))}function XI(n,e){qI()||YI(),Gp(n,e(n.value))}var eD=fe(P({},Ya),{equal:BI,value:void 0});function dN(n){n.version++,sN(),HI(n),lN?.()}function ie(n){return typeof n=="function"}function $o(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var pl=$o(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function Fi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var Ke=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let o of t)o.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ie(r))try{r()}catch(o){e=o instanceof pl?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{tD(o)}catch(s){e=e??[],s instanceof pl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new pl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)tD(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&Fi(t,e)}remove(e){let{_finalizers:t}=this;t&&Fi(t,e),e instanceof n&&e._removeParent(this)}};Ke.EMPTY=(()=>{let n=new Ke;return n.closed=!0,n})();var Wp=Ke.EMPTY;function gl(n){return n instanceof Ke||n&&"closed"in n&&ie(n.remove)&&ie(n.add)&&ie(n.unsubscribe)}function tD(n){ie(n)?n():n.unsubscribe()}var Sn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ho={setTimeout(n,e,...t){let{delegate:r}=Ho;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Ho;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function ml(n){Ho.setTimeout(()=>{let{onUnhandledError:e}=Sn;if(e)e(n);else throw n})}function Za(){}var nD=Kp("C",void 0,void 0);function rD(n){return Kp("E",void 0,n)}function iD(n){return Kp("N",n,void 0)}function Kp(n,e,t){return{kind:n,value:e,error:t}}var Vi=null;function qo(n){if(Sn.useDeprecatedSynchronousErrorHandling){let e=!Vi;if(e&&(Vi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=Vi;if(Vi=null,t)throw r}}else n()}function oD(n){Sn.useDeprecatedSynchronousErrorHandling&&Vi&&(Vi.errorThrown=!0,Vi.error=n)}var Li=class extends Ke{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,gl(e)&&e.add(this)):this.destination=pN}static create(e,t,r){return new pr(e,t,r)}next(e){this.isStopped?Yp(iD(e),this):this._next(e)}error(e){this.isStopped?Yp(rD(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Yp(nD,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},hN=Function.prototype.bind;function Qp(n,e){return hN.call(n,e)}var Zp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){yl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){yl(r)}else yl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){yl(t)}}},pr=class extends Li{constructor(e,t,r){super();let i;if(ie(e)||!e)i={next:e??void 0,error:t??void 0,complete:r??void 0};else{let o;this&&Sn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&Qp(e.next,o),error:e.error&&Qp(e.error,o),complete:e.complete&&Qp(e.complete,o)}):i=e}this.destination=new Zp(i)}};function yl(n){Sn.useDeprecatedSynchronousErrorHandling?oD(n):ml(n)}function fN(n){throw n}function Yp(n,e){let{onStoppedNotification:t}=Sn;t&&Ho.setTimeout(()=>t(n,e))}var pN={closed:!0,next:Za,error:fN,complete:Za};var zo=typeof Symbol=="function"&&Symbol.observable||"@@observable";function xt(n){return n}function Jp(...n){return Xp(n)}function Xp(n){return n.length===0?xt:n.length===1?n[0]:function(t){return n.reduce((r,i)=>i(r),t)}}var pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,i){let o=mN(t)?t:new pr(t,r,i);return qo(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=sD(r),new r((i,o)=>{let s=new pr({next:a=>{try{t(a)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[zo](){return this}pipe(...t){return Xp(t)(this)}toPromise(t){return t=sD(t),new t((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return n.create=e=>new n(e),n})();function sD(n){var e;return(e=n??Sn.Promise)!==null&&e!==void 0?e:Promise}function gN(n){return n&&ie(n.next)&&ie(n.error)&&ie(n.complete)}function mN(n){return n&&n instanceof Li||gN(n)&&gl(n)}function eg(n){return ie(n?.lift)}function le(n){return e=>{if(eg(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function de(n,e,t,r,i){return new tg(n,e,t,r,i)}var tg=class extends Li{constructor(e,t,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Go(){return le((n,e)=>{let t=null;n._refCount++;let r=de(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let i=n._connection,o=t;t=null,i&&(!o||i===o)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Wo=class extends pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,eg(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Ke;let t=this.getSubject();e.add(this.source.subscribe(de(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Ke.EMPTY)}return e}refCount(){return Go()(this)}};var aD=$o(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var $e=(()=>{class n extends pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new vl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new aD}next(t){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){qo(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Wp:(this.currentObservers=null,o.push(t),new Ke(()=>{this.currentObservers=null,Fi(o,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:i,isStopped:o}=this;r?t.error(i):o&&t.complete()}asObservable(){let t=new pe;return t.source=this,t}}return n.create=(e,t)=>new vl(e,t),n})(),vl=class extends $e{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Wp}};var yt=class extends $e{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Ja={now(){return(Ja.delegate||Date).now()},delegate:void 0};var _l=class extends $e{constructor(e=1/0,t=1/0,r=Ja){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:o,_windowTime:s}=this;t||(r.push(e),!i&&r.push(o.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,o=i.slice();for(let s=0;s<o.length&&!e.closed;s+=r?1:2)e.next(o[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,o=(i?1:2)*e;if(e<1/0&&o<r.length&&r.splice(0,r.length-o),!i){let s=t.now(),a=0;for(let u=1;u<r.length&&r[u]<=s;u+=2)a=u;a&&r.splice(0,a+1)}}};var wl=class extends Ke{constructor(e,t){super()}schedule(e,t=0){return this}};var Xa={setInterval(n,e,...t){let{delegate:r}=Xa;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Xa;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Ko=class extends wl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let i=this.id,o=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(o,i,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(o,this.id,t),this}requestAsyncId(e,t,r=0){return Xa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Xa.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,i;try{this.work(e)}catch(o){r=!0,i=o||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,Fi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var Qo=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};Qo.now=Ja.now;var Yo=class extends Qo{constructor(e,t=Qo.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var eu=new Yo(Ko);var El=class extends Ko{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}};var Il=class extends Yo{};var ng=new Il(El);var Rt=new pe(n=>n.complete());function uD(n){return n&&ie(n.schedule)}function rg(n){return n[n.length-1]}function Dl(n){return ie(rg(n))?n.pop():void 0}function Hn(n){return uD(rg(n))?n.pop():void 0}function cD(n,e){return typeof rg(n)=="number"?n.pop():e}var Cl=n=>n&&typeof n.length=="number"&&typeof n!="function";function bl(n){return ie(n?.then)}function Tl(n){return ie(n[zo])}function Sl(n){return Symbol.asyncIterator&&ie(n?.[Symbol.asyncIterator])}function Al(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function yN(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ml=yN();function xl(n){return ie(n?.[Ml])}function Rl(n){return NI(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:i}=yield ol(t.read());if(i)return yield ol(void 0);yield yield ol(r)}}finally{t.releaseLock()}})}function Nl(n){return ie(n?.getReader)}function je(n){if(n instanceof pe)return n;if(n!=null){if(Tl(n))return vN(n);if(Cl(n))return _N(n);if(bl(n))return wN(n);if(Sl(n))return lD(n);if(xl(n))return EN(n);if(Nl(n))return IN(n)}throw Al(n)}function vN(n){return new pe(e=>{let t=n[zo]();if(ie(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _N(n){return new pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function wN(n){return new pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,ml)})}function EN(n){return new pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function lD(n){return new pe(e=>{DN(n,e).catch(t=>e.error(t))})}function IN(n){return lD(Rl(n))}function DN(n,e){var t,r,i,o;return RI(this,void 0,void 0,function*(){try{for(t=PI(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=t.return)&&(yield o.call(t))}finally{if(i)throw i.error}}e.complete()})}function Ht(n,e,t,r=0,i=!1){let o=e.schedule(function(){t(),i?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(o),!i)return o}function gn(n,e=0){return le((t,r)=>{t.subscribe(de(r,i=>Ht(r,n,()=>r.next(i),e),()=>Ht(r,n,()=>r.complete(),e),i=>Ht(r,n,()=>r.error(i),e)))})}function An(n,e=0){return le((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function dD(n,e){return je(n).pipe(An(e),gn(e))}function hD(n,e){return je(n).pipe(An(e),gn(e))}function fD(n,e){return new pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function pD(n,e){return new pe(t=>{let r;return Ht(t,e,()=>{r=n[Ml](),Ht(t,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){t.error(s);return}o?t.complete():t.next(i)},0,!0)}),()=>ie(r?.return)&&r.return()})}function Pl(n,e){if(!n)throw new Error("Iterable cannot be null");return new pe(t=>{Ht(t,e,()=>{let r=n[Symbol.asyncIterator]();Ht(t,e,()=>{r.next().then(i=>{i.done?t.complete():t.next(i.value)})},0,!0)})})}function gD(n,e){return Pl(Rl(n),e)}function mD(n,e){if(n!=null){if(Tl(n))return dD(n,e);if(Cl(n))return fD(n,e);if(bl(n))return hD(n,e);if(Sl(n))return Pl(n,e);if(xl(n))return pD(n,e);if(Nl(n))return gD(n,e)}throw Al(n)}function Ce(n,e){return e?mD(n,e):je(n)}function te(...n){let e=Hn(n);return Ce(n,e)}function Zo(n,e){let t=ie(n)?n:()=>n,r=i=>i.error(t());return new pe(e?i=>e.schedule(r,0,i):r)}function ig(n){return!!n&&(n instanceof pe||ie(n.lift)&&ie(n.subscribe))}var gr=$o(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function Q(n,e){return le((t,r)=>{let i=0;t.subscribe(de(r,o=>{r.next(n.call(e,o,i++))}))})}var{isArray:CN}=Array;function bN(n,e){return CN(e)?n(...e):n(e)}function kl(n){return Q(e=>bN(n,e))}var{isArray:TN}=Array,{getPrototypeOf:SN,prototype:AN,keys:MN}=Object;function Ol(n){if(n.length===1){let e=n[0];if(TN(e))return{args:e,keys:null};if(xN(e)){let t=MN(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function xN(n){return n&&typeof n=="object"&&SN(n)===AN}function Fl(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}function tu(...n){let e=Hn(n),t=Dl(n),{args:r,keys:i}=Ol(n);if(r.length===0)return Ce([],e);let o=new pe(RN(r,e,i?s=>Fl(i,s):xt));return t?o.pipe(kl(t)):o}function RN(n,e,t=xt){return r=>{yD(e,()=>{let{length:i}=n,o=new Array(i),s=i,a=i;for(let u=0;u<i;u++)yD(e,()=>{let l=Ce(n[u],e),h=!1;l.subscribe(de(r,p=>{o[u]=p,h||(h=!0,a--),a||r.next(t(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function yD(n,e,t){n?Ht(t,n,e):e()}function vD(n,e,t,r,i,o,s,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=A=>l<r?b(A):u.push(A),b=A=>{o&&e.next(A),l++;let M=!1;je(t(A,h++)).subscribe(de(e,L=>{i?.(L),o?y(L):e.next(L)},()=>{M=!0},void 0,()=>{if(M)try{for(l--;u.length&&l<r;){let L=u.shift();s?Ht(e,s,()=>b(L)):b(L)}m()}catch(L){e.error(L)}}))};return n.subscribe(de(e,y,()=>{p=!0,m()})),()=>{a?.()}}function tt(n,e,t=1/0){return ie(e)?tt((r,i)=>Q((o,s)=>e(r,o,i,s))(je(n(r,i))),t):(typeof e=="number"&&(t=e),le((r,i)=>vD(r,i,n,t)))}function Hr(n=1/0){return tt(xt,n)}function _D(){return Hr(1)}function Jo(...n){return _D()(Ce(n,Hn(n)))}function Vl(n){return new pe(e=>{je(n()).subscribe(e)})}function og(...n){let e=Dl(n),{args:t,keys:r}=Ol(n),i=new pe(o=>{let{length:s}=t;if(!s){o.complete();return}let a=new Array(s),u=s,l=s;for(let h=0;h<s;h++){let p=!1;je(t[h]).subscribe(de(o,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?Fl(r,a):a),o.complete())}))}});return e?i.pipe(kl(e)):i}function sg(...n){let e=Hn(n),t=cD(n,1/0),r=n;return r.length?r.length===1?je(r[0]):Hr(t)(Ce(r,e)):Rt}function vt(n,e){return le((t,r)=>{let i=0;t.subscribe(de(r,o=>n.call(e,o,i++)&&r.next(o)))})}function qr(n){return le((e,t)=>{let r=null,i=!1,o;r=e.subscribe(de(t,void 0,void 0,s=>{o=je(n(s,qr(n)(e))),r?(r.unsubscribe(),r=null,o.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(t))})}function wD(n,e,t,r,i){return(o,s)=>{let a=t,u=e,l=0;o.subscribe(de(s,h=>{let p=l++;u=a?n(u,h,p):(a=!0,h),r&&s.next(u)},i&&(()=>{a&&s.next(u),s.complete()})))}}function ji(n,e){return ie(e)?tt(n,e,1):tt(n,1)}function zr(n){return le((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function mr(n){return n<=0?()=>Rt:le((e,t)=>{let r=0;e.subscribe(de(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function ag(n){return Q(()=>n)}function ug(n,e=xt){return n=n??NN,le((t,r)=>{let i,o=!0;t.subscribe(de(r,s=>{let a=e(s);(o||!n(i,a))&&(o=!1,i=a,r.next(s))}))})}function NN(n,e){return n===e}function Ll(n=PN){return le((e,t)=>{let r=!1;e.subscribe(de(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function PN(){return new gr}function nu(n){return le((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function mn(n,e){let t=arguments.length>=2;return r=>r.pipe(n?vt((i,o)=>n(i,o,r)):xt,mr(1),t?zr(e):Ll(()=>new gr))}function Xo(n){return n<=0?()=>Rt:le((e,t)=>{let r=[];e.subscribe(de(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(let i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function cg(n,e){let t=arguments.length>=2;return r=>r.pipe(n?vt((i,o)=>n(i,o,r)):xt,Xo(1),t?zr(e):Ll(()=>new gr))}function ru(){return le((n,e)=>{let t,r=!1;n.subscribe(de(e,i=>{let o=t;t=i,r&&e.next([o,i]),r=!0}))})}function Bi(n,e){return le(wD(n,e,arguments.length>=2,!0))}function ED(n={}){let{connector:e=()=>new $e,resetOnError:t=!0,resetOnComplete:r=!0,resetOnRefCountZero:i=!0}=n;return o=>{let s,a,u,l=0,h=!1,p=!1,m=()=>{a?.unsubscribe(),a=void 0},y=()=>{m(),s=u=void 0,h=p=!1},b=()=>{let A=s;y(),A?.unsubscribe()};return le((A,M)=>{l++,!p&&!h&&m();let L=u=u??e();M.add(()=>{l--,l===0&&!p&&!h&&(a=lg(b,i))}),L.subscribe(M),!s&&l>0&&(s=new pr({next:G=>L.next(G),error:G=>{p=!0,m(),a=lg(y,t,G),L.error(G)},complete:()=>{h=!0,m(),a=lg(y,r),L.complete()}}),je(A).subscribe(s))})(o)}}function lg(n,e,...t){if(e===!0){n();return}if(e===!1)return;let r=new pr({next:()=>{r.unsubscribe(),n()}});return je(e(...t)).subscribe(r)}function jl(n,e,t){let r,i=!1;return n&&typeof n=="object"?{bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n:r=n??1/0,ED({connector:()=>new _l(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Ui(...n){let e=Hn(n);return le((t,r)=>{(e?Jo(n,t,e):Jo(n,t)).subscribe(r)})}function Qe(n,e){return le((t,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();t.subscribe(de(r,u=>{i?.unsubscribe();let l=0,h=o++;je(n(u,h)).subscribe(i=de(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Bl(n,e){return ie(e)?Qe(()=>n,e):Qe(()=>n)}function dg(n){return le((e,t)=>{je(n).subscribe(de(t,()=>t.complete(),Za)),!t.closed&&e.subscribe(t)})}function ct(n,e,t){let r=ie(n)||e||t?{next:n,error:e,complete:t}:n;return r?le((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(de(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):xt}var uC="https://g.co/ng/security#xss",J=class extends Error{constructor(e,t){super(hm(e,t)),this.code=e}};function hm(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function fu(n){return{toString:n}.toString()}var Ul="__parameters__";function kN(n){return function(...t){if(n){let r=n(...t);for(let i in r)this[i]=r[i]}}}function cC(n,e,t){return fu(()=>{let r=kN(e);function i(...o){if(this instanceof i)return r.apply(this,o),this;let s=new i(...o);return a.annotation=s,a;function a(u,l,h){let p=u.hasOwnProperty(Ul)?u[Ul]:Object.defineProperty(u,Ul,{value:[]})[Ul];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(s),u}}return t&&(i.prototype=Object.create(t.prototype)),i.prototype.ngMetadataName=n,i.annotationCls=i,i})}var Rn=globalThis;function ke(n){for(let e in n)if(n[e]===ke)return e;throw Error("Could not find renamed property on target object.")}function ON(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function qt(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(qt).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function ID(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var FN=ke({__forward_ref__:ke});function _s(n){return n.__forward_ref__=_s,n.toString=function(){return qt(this())},n}function Nt(n){return lC(n)?n():n}function lC(n){return typeof n=="function"&&n.hasOwnProperty(FN)&&n.__forward_ref__===_s}function z(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function ht(n){return{providers:n.providers||[],imports:n.imports||[]}}function bd(n){return DD(n,hC)||DD(n,fC)}function dC(n){return bd(n)!==null}function DD(n,e){return n.hasOwnProperty(e)?n[e]:null}function VN(n){let e=n&&(n[hC]||n[fC]);return e||null}function CD(n){return n&&(n.hasOwnProperty(bD)||n.hasOwnProperty(LN))?n[bD]:null}var hC=ke({\u0275prov:ke}),bD=ke({\u0275inj:ke}),fC=ke({ngInjectableDef:ke}),LN=ke({ngInjectorDef:ke}),W=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=z({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function pC(n){return n&&!!n.\u0275providers}var jN=ke({\u0275cmp:ke}),BN=ke({\u0275dir:ke}),UN=ke({\u0275pipe:ke}),$N=ke({\u0275mod:ke}),Zl=ke({\u0275fac:ke}),ou=ke({__NG_ELEMENT_ID__:ke}),TD=ke({__NG_ENV_ID__:ke});function yr(n){return typeof n=="string"?n:n==null?"":String(n)}function HN(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():yr(n)}function qN(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new J(-200,n)}function fm(n,e){throw new J(-201,!1)}var he=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(he||{}),bg;function gC(){return bg}function yn(n){let e=bg;return bg=n,e}function mC(n,e,t){let r=bd(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&he.Optional)return null;if(e!==void 0)return e;fm(n,"Injector")}var zN={},au=zN,Tg="__NG_DI_FLAG__",Jl="ngTempTokenPath",GN="ngTokenPath",WN=/\n/gm,KN="\u0275",SD="__source",is;function QN(){return is}function Gr(n){let e=is;return is=n,e}function YN(n,e=he.Default){if(is===void 0)throw new J(-203,!1);return is===null?mC(n,void 0,e):is.get(n,e&he.Optional?null:void 0,e)}function F(n,e=he.Default){return(gC()||YN)(Nt(n),e)}function B(n,e=he.Default){return F(n,Td(e))}function Td(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Sg(n){let e=[];for(let t=0;t<n.length;t++){let r=Nt(n[t]);if(Array.isArray(r)){if(r.length===0)throw new J(900,!1);let i,o=he.Default;for(let s=0;s<r.length;s++){let a=r[s],u=ZN(a);typeof u=="number"?u===-1?i=a.token:o|=u:i=a}e.push(F(i,o))}else e.push(F(r))}return e}function yC(n,e){return n[Tg]=e,n.prototype[Tg]=e,n}function ZN(n){return n[Tg]}function JN(n,e,t,r){let i=n[Jl];throw e[SD]&&i.unshift(e[SD]),n.message=XN(`
`+n.message,i,t,r),n[GN]=i,n[Jl]=null,n}function XN(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==KN?n.slice(2):n;let i=qt(e);if(Array.isArray(e))i=e.map(qt).join(" -> ");else if(typeof e=="object"){let o=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):qt(a)))}i=`{${o.join(", ")}}`}return`${t}${r?"("+r+")":""}[${i}]: ${n.replace(WN,`
  `)}`}var ws=yC(cC("Optional"),8);var pm=yC(cC("SkipSelf"),4);function ss(n,e){let t=n.hasOwnProperty(Zl);return t?n[Zl]:null}function gm(n,e){n.forEach(t=>Array.isArray(t)?gm(t,e):e(t))}function vC(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function Xl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function eP(n,e,t,r){let i=n.length;if(i==e)n.push(t,r);else if(i===1)n.push(r,n[0]),n[0]=t;else{for(i--,n.push(n[i-1],n[i]);i>e;){let o=i-2;n[i]=n[o],i--}n[e]=t,n[e+1]=r}}function tP(n,e,t){let r=pu(n,e);return r>=0?n[r|1]=t:(r=~r,eP(n,r,e,t)),r}function hg(n,e){let t=pu(n,e);if(t>=0)return n[t|1]}function pu(n,e){return nP(n,e,1)}function nP(n,e,t){let r=0,i=n.length>>t;for(;i!==r;){let o=r+(i-r>>1),s=n[o<<t];if(e===s)return o<<t;s>e?i=o:r=o+1}return~(i<<t)}var as={},vn=[],us=new W(""),_C=new W("",-1),wC=new W(""),ed=class{get(e,t=au){if(t===au){let r=new Error(`NullInjectorError: No provider for ${qt(e)}!`);throw r.name="NullInjectorError",r}return t}},EC=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(EC||{}),Gn=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Gn||{}),Qr=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Qr||{});function rP(n,e,t){let r=n.length;for(;;){let i=n.indexOf(e,t);if(i===-1)return i;if(i===0||n.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||n.charCodeAt(i+o)<=32)return i}t=i+1}}function Ag(n,e,t){let r=0;for(;r<t.length;){let i=t[r];if(typeof i=="number"){if(i!==0)break;r++;let o=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,o)}else{let o=i,s=t[++r];iP(o)?n.setProperty(e,o,s):n.setAttribute(e,o,s),r++}}return r}function IC(n){return n===3||n===4||n===6}function iP(n){return n.charCodeAt(0)===64}function uu(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?t=i:t===0||(t===-1||t===2?AD(n,t,i,null,e[++r]):AD(n,t,i,null,null))}}return n}function AD(n,e,t,r,i){let o=0,s=n.length;if(e===-1)s=-1;else for(;o<n.length;){let a=n[o++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=o-1;break}}}for(;o<n.length;){let a=n[o];if(typeof a=="number")break;if(a===t){if(r===null){i!==null&&(n[o+1]=i);return}else if(r===n[o+1]){n[o+2]=i;return}}o++,r!==null&&o++,i!==null&&o++}s!==-1&&(n.splice(s,0,e),o=s+1),n.splice(o++,0,t),r!==null&&n.splice(o++,0,r),i!==null&&n.splice(o++,0,i)}var DC="ng-template";function oP(n,e,t,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&rP(e[i+1].toLowerCase(),t,0)!==-1)return!0}else if(mm(n))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===t)return!0}return!1}function mm(n){return n.type===4&&n.value!==DC}function sP(n,e,t){let r=n.type===4&&!t?DC:n.value;return e===r}function aP(n,e,t){let r=4,i=n.attrs,o=i!==null?lP(i):0,s=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!s&&!Mn(r)&&!Mn(u))return!1;if(s&&Mn(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!sP(n,u,t)||u===""&&e.length===1){if(Mn(r))return!1;s=!0}}else if(r&8){if(i===null||!oP(n,i,u,t)){if(Mn(r))return!1;s=!0}}else{let l=e[++a],h=uP(u,i,mm(n),t);if(h===-1){if(Mn(r))return!1;s=!0;continue}if(l!==""){let p;if(h>o?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(Mn(r))return!1;s=!0}}}}return Mn(r)||s}function Mn(n){return(n&1)===0}function uP(n,e,t,r){if(e===null)return-1;let i=0;if(r||!t){let o=!1;for(;i<e.length;){let s=e[i];if(s===n)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return dP(e,n)}function cP(n,e,t=!1){for(let r=0;r<e.length;r++)if(aP(n,e[r],t))return!0;return!1}function lP(n){for(let e=0;e<n.length;e++){let t=n[e];if(IC(t))return e}return n.length}function dP(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function MD(n,e){return n?":not("+e.trim()+")":e}function hP(n){let e=n[0],t=1,r=2,i="",o=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!Mn(s)&&(e+=MD(o,i),i=""),r=s,o=o||!Mn(r);t++}return i!==""&&(e+=MD(o,i)),e}function fP(n){return n.map(hP).join(",")}function pP(n){let e=[],t=[],r=1,i=2;for(;r<n.length;){let o=n[r];if(typeof o=="string")i===2?o!==""&&e.push(o,n[++r]):i===8&&t.push(o);else{if(!Mn(i))break;i=o}r++}return{attrs:e,classes:t}}function ft(n){return fu(()=>{let e=AC(n),t=fe(P({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===EC.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Gn.Emulated,styles:n.styles||vn,_:null,schemas:n.schemas||null,tView:null,id:""});MC(t);let r=n.dependencies;return t.directiveDefs=RD(r,!1),t.pipeDefs=RD(r,!0),t.id=yP(t),t})}function gP(n){return Yr(n)||CC(n)}function mP(n){return n!==null}function pt(n){return fu(()=>({type:n.type,bootstrap:n.bootstrap||vn,declarations:n.declarations||vn,imports:n.imports||vn,exports:n.exports||vn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function xD(n,e){if(n==null)return as;let t={};for(let r in n)if(n.hasOwnProperty(r)){let i=n[r],o,s,a=Qr.None;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o):(o=i,s=i),e?(t[o]=a!==Qr.None?[r,a]:r,e[o]=s):t[o]=r}return t}function zt(n){return fu(()=>{let e=AC(n);return MC(e),e})}function Yr(n){return n[jN]||null}function CC(n){return n[BN]||null}function bC(n){return n[UN]||null}function TC(n){let e=Yr(n)||CC(n)||bC(n);return e!==null?e.standalone:!1}function SC(n,e){let t=n[$N]||null;if(!t&&e===!0)throw new Error(`Type ${qt(n)} does not have '\u0275mod' property.`);return t}function AC(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||as,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||vn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:xD(n.inputs,e),outputs:xD(n.outputs),debugInfo:null}}function MC(n){n.features?.forEach(e=>e(n))}function RD(n,e){if(!n)return null;let t=e?bC:gP;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(mP)}function yP(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let i of t)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function vP(...n){return{\u0275providers:xC(!0,n),\u0275fromNgModule:!0}}function xC(n,...e){let t=[],r=new Set,i,o=s=>{t.push(s)};return gm(e,s=>{let a=s;Mg(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&RC(i,o),t}function RC(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:i}=n[t];ym(i,o=>{e(o,r)})}}function Mg(n,e,t,r){if(n=Nt(n),!n)return!1;let i=null,o=CD(n),s=!o&&Yr(n);if(!o&&!s){let u=n.ngModule;if(o=CD(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=n}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Mg(l,e,t,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let l;try{gm(o.imports,h=>{Mg(h,e,t,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&RC(l,e)}if(!a){let l=ss(i)||(()=>new i);e({provide:i,useFactory:l,deps:vn},i),e({provide:wC,useValue:i,multi:!0},i),e({provide:us,useValue:()=>F(i),multi:!0},i)}let u=o.providers;if(u!=null&&!a){let l=n;ym(u,h=>{e(h,l)})}}else return!1;return i!==n&&n.providers!==void 0}function ym(n,e){for(let t of n)pC(t)&&(t=t.\u0275providers),Array.isArray(t)?ym(t,e):e(t)}var _P=ke({provide:String,useValue:ke});function NC(n){return n!==null&&typeof n=="object"&&_P in n}function wP(n){return!!(n&&n.useExisting)}function EP(n){return!!(n&&n.useFactory)}function cs(n){return typeof n=="function"}function IP(n){return!!n.useClass}var Sd=new W(""),Wl={},DP={},fg;function vm(){return fg===void 0&&(fg=new ed),fg}var cn=class{},cu=class extends cn{get destroyed(){return this._destroyed}constructor(e,t,r,i){super(),this.parent=t,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Rg(e,s=>this.processProvider(s)),this.records.set(_C,es(void 0,this)),i.has("environment")&&this.records.set(cn,es(void 0,this));let o=this.records.get(Sd);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(wC,vn,he.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=De(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),De(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=Gr(this),r=yn(void 0),i;try{return e()}finally{Gr(t),yn(r)}}get(e,t=au,r=he.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(TD))return e[TD](this);r=Td(r);let i,o=Gr(this),s=yn(void 0);try{if(!(r&he.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=AP(e)&&bd(e);l&&this.injectableDefInScope(l)?u=es(xg(e),Wl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&he.Self?vm():this.parent;return t=r&he.Optional&&t===au?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[Jl]=a[Jl]||[]).unshift(qt(e)),o)throw a;return JN(a,e,"R3InjectorError",this.source)}else throw a}finally{yn(s),Gr(o)}}resolveInjectorInitializers(){let e=De(null),t=Gr(this),r=yn(void 0),i;try{let o=this.get(us,vn,he.Self);for(let s of o)s()}finally{Gr(t),yn(r),De(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(qt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new J(205,!1)}processProvider(e){e=Nt(e);let t=cs(e)?e:Nt(e&&e.provide),r=bP(e);if(!cs(e)&&e.multi===!0){let i=this.records.get(t);i||(i=es(void 0,Wl,!0),i.factory=()=>Sg(i.multi),this.records.set(t,i)),t=e,i.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=De(null);try{return t.value===Wl&&(t.value=DP,t.value=t.factory()),typeof t.value=="object"&&t.value&&SP(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{De(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=Nt(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function xg(n){let e=bd(n),t=e!==null?e.factory:ss(n);if(t!==null)return t;if(n instanceof W)throw new J(204,!1);if(n instanceof Function)return CP(n);throw new J(204,!1)}function CP(n){if(n.length>0)throw new J(204,!1);let t=VN(n);return t!==null?()=>t.factory(n):()=>new n}function bP(n){if(NC(n))return es(void 0,n.useValue);{let e=PC(n);return es(e,Wl)}}function PC(n,e,t){let r;if(cs(n)){let i=Nt(n);return ss(i)||xg(i)}else if(NC(n))r=()=>Nt(n.useValue);else if(EP(n))r=()=>n.useFactory(...Sg(n.deps||[]));else if(wP(n))r=()=>F(Nt(n.useExisting));else{let i=Nt(n&&(n.useClass||n.provide));if(TP(n))r=()=>new i(...Sg(n.deps));else return ss(i)||xg(i)}return r}function es(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function TP(n){return!!n.deps}function SP(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function AP(n){return typeof n=="function"||typeof n=="object"&&n instanceof W}function Rg(n,e){for(let t of n)Array.isArray(t)?Rg(t,e):t&&pC(t)?Rg(t.\u0275providers,e):e(t)}function Yn(n,e){n instanceof cu&&n.assertNotDestroyed();let t,r=Gr(n),i=yn(void 0);try{return e()}finally{Gr(r),yn(i)}}function kC(){return gC()!==void 0||QN()!=null}function MP(n){if(!kC())throw new J(-203,!1)}function xP(n){let e=Rn.ng;if(e&&e.\u0275compilerFacade)return e.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function RP(n){return typeof n=="function"}var Er=0,ye=1,oe=2,Pt=3,xn=4,Pn=5,td=6,nd=7,Nn=8,ls=9,Wn=10,rt=11,lu=12,ND=13,Es=14,Kn=15,ds=16,ts=17,hs=18,Ad=19,OC=20,Wr=21,pg=22,_n=23,Zr=25,FC=1;var Hi=7,rd=8,id=9,wn=10,od=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(od||{});function Kr(n){return Array.isArray(n)&&typeof n[FC]=="object"}function Ir(n){return Array.isArray(n)&&n[FC]===!0}function VC(n){return(n.flags&4)!==0}function Md(n){return n.componentOffset>-1}function _m(n){return(n.flags&1)===1}function Jr(n){return!!n.template}function Ng(n){return(n[oe]&512)!==0}var Pg=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function LC(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Yi(){return jC}function jC(n){return n.type.prototype.ngOnChanges&&(n.setInput=PP),NP}Yi.ngInherit=!0;function NP(){let n=UC(this),e=n?.current;if(e){let t=n.previous;if(t===as)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function PP(n,e,t,r,i){let o=this.declaredInputs[r],s=UC(n)||kP(n,{previous:as,current:null}),a=s.current||(s.current={}),u=s.previous,l=u[o];a[o]=new Pg(l&&l.currentValue,t,u===as),LC(n,e,i,t)}var BC="__ngSimpleChanges__";function UC(n){return n[BC]||null}function kP(n,e){return n[BC]=e}var PD=null;var qn=function(n,e,t){PD?.(n,e,t)},OP="svg",FP="math";function Qn(n){for(;Array.isArray(n);)n=n[Er];return n}function $C(n,e){return Qn(e[n])}function En(n,e){return Qn(e[n.index])}function HC(n,e){return n.data[e]}function ti(n,e){let t=e[n];return Kr(t)?t:t[Er]}function wm(n){return(n[oe]&128)===128}function VP(n){return Ir(n[Pt])}function sd(n,e){return e==null?null:n[e]}function qC(n){n[ts]=0}function zC(n){n[oe]&1024||(n[oe]|=1024,wm(n)&&Rd(n))}function LP(n,e){for(;n>0;)e=e[Es],n--;return e}function xd(n){return!!(n[oe]&9216||n[_n]?.dirty)}function kg(n){n[Wn].changeDetectionScheduler?.notify(8),n[oe]&64&&(n[oe]|=1024),xd(n)&&Rd(n)}function Rd(n){n[Wn].changeDetectionScheduler?.notify(0);let e=qi(n);for(;e!==null&&!(e[oe]&8192||(e[oe]|=8192,!wm(e)));)e=qi(e)}function GC(n,e){if((n[oe]&256)===256)throw new J(911,!1);n[Wr]===null&&(n[Wr]=[]),n[Wr].push(e)}function jP(n,e){if(n[Wr]===null)return;let t=n[Wr].indexOf(e);t!==-1&&n[Wr].splice(t,1)}function qi(n){let e=n[Pt];return Ir(e)?e[Pt]:e}var ge={lFrame:n0(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var WC=!1;function BP(){return ge.lFrame.elementDepthCount}function UP(){ge.lFrame.elementDepthCount++}function $P(){ge.lFrame.elementDepthCount--}function KC(){return ge.bindingsEnabled}function HP(){return ge.skipHydrationRootTNode!==null}function qP(n){return ge.skipHydrationRootTNode===n}function zP(){ge.skipHydrationRootTNode=null}function Ne(){return ge.lFrame.lView}function Gt(){return ge.lFrame.tView}function Wt(n){return ge.lFrame.contextLView=n,n[Nn]}function Kt(n){return ge.lFrame.contextLView=null,n}function kt(){let n=QC();for(;n!==null&&n.type===64;)n=n.parent;return n}function QC(){return ge.lFrame.currentTNode}function GP(){let n=ge.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function gu(n,e){let t=ge.lFrame;t.currentTNode=n,t.isParent=e}function YC(){return ge.lFrame.isParent}function WP(){ge.lFrame.isParent=!1}function ZC(){return WC}function kD(n){WC=n}function JC(){return ge.lFrame.bindingIndex}function KP(n){return ge.lFrame.bindingIndex=n}function Nd(){return ge.lFrame.bindingIndex++}function Em(n){let e=ge.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function QP(){return ge.lFrame.inI18n}function YP(n,e){let t=ge.lFrame;t.bindingIndex=t.bindingRootIndex=n,Og(e)}function ZP(){return ge.lFrame.currentDirectiveIndex}function Og(n){ge.lFrame.currentDirectiveIndex=n}function JP(n){let e=ge.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function XC(n){ge.lFrame.currentQueryIndex=n}function XP(n){let e=n[ye];return e.type===2?e.declTNode:e.type===1?n[Pn]:null}function e0(n,e,t){if(t&he.SkipSelf){let i=e,o=n;for(;i=i.parent,i===null&&!(t&he.Host);)if(i=XP(o),i===null||(o=o[Es],i.type&10))break;if(i===null)return!1;e=i,n=o}let r=ge.lFrame=t0();return r.currentTNode=e,r.lView=n,!0}function Im(n){let e=t0(),t=n[ye];ge.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function t0(){let n=ge.lFrame,e=n===null?null:n.child;return e===null?n0(n):e}function n0(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function r0(){let n=ge.lFrame;return ge.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var i0=r0;function Dm(){let n=r0();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function e1(n){return(ge.lFrame.contextLView=LP(n,ge.lFrame.contextLView))[Nn]}function ni(){return ge.lFrame.selectedIndex}function zi(n){ge.lFrame.selectedIndex=n}function Pd(){let n=ge.lFrame;return HC(n.tView,n.selectedIndex)}function t1(){return ge.lFrame.currentNamespace}var o0=!0;function Cm(){return o0}function bm(n){o0=n}function n1(n,e,t){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=jC(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}i&&(t.preOrderHooks??=[]).push(0-n,i),o&&((t.preOrderHooks??=[]).push(n,o),(t.preOrderCheckHooks??=[]).push(n,o))}function Tm(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let o=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=o;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),u&&(n.viewHooks??=[]).push(-t,u),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),h!=null&&(n.destroyHooks??=[]).push(t,h)}}function Kl(n,e,t){s0(n,e,3,t)}function Ql(n,e,t,r){(n[oe]&3)===t&&s0(n,e,t,r)}function gg(n,e){let t=n[oe];(t&3)===e&&(t&=16383,t+=1,n[oe]=t)}function s0(n,e,t,r){let i=r!==void 0?n[ts]&65535:0,o=r??-1,s=e.length-1,a=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(n[ts]+=65536),(a<o||o==-1)&&(r1(n,t,e,u),n[ts]=(n[ts]&4294901760)+u+2),u++}function OD(n,e){qn(4,n,e);let t=De(null);try{e.call(n)}finally{De(t),qn(5,n,e)}}function r1(n,e,t,r){let i=t[r]<0,o=t[r+1],s=i?-t[r]:t[r],a=n[s];i?n[oe]>>14<n[ts]>>16&&(n[oe]&3)===e&&(n[oe]+=16384,OD(a,o)):OD(a,o)}var os=-1,Gi=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function i1(n){return n instanceof Gi}function o1(n){return(n.flags&8)!==0}function s1(n){return(n.flags&16)!==0}var mg={},Fg=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Td(r);let i=this.injector.get(e,mg,r);return i!==mg||t===mg?i:this.parentInjector.get(e,t,r)}};function a0(n){return n!==os}function ad(n){return n&32767}function a1(n){return n>>16}function ud(n,e){let t=a1(n),r=e;for(;t>0;)r=r[Es],t--;return r}var Vg=!0;function FD(n){let e=Vg;return Vg=n,e}var u1=256,u0=u1-1,c0=5,c1=0,zn={};function l1(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(ou)&&(r=t[ou]),r==null&&(r=t[ou]=c1++);let i=r&u0,o=1<<i;e.data[n+(i>>c0)]|=o}function cd(n,e){let t=l0(n,e);if(t!==-1)return t;let r=e[ye];r.firstCreatePass&&(n.injectorIndex=e.length,yg(r.data,n),yg(e,null),yg(r.blueprint,null));let i=Sm(n,e),o=n.injectorIndex;if(a0(i)){let s=ad(i),a=ud(i,e),u=a[ye].data;for(let l=0;l<8;l++)e[o+l]=a[s+l]|u[s+l]}return e[o+8]=i,o}function yg(n,e){n.push(0,0,0,0,0,0,0,0,e)}function l0(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Sm(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,i=e;for(;i!==null;){if(r=g0(i),r===null)return os;if(t++,i=i[Es],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return os}function Lg(n,e,t){l1(n,e,t)}function d1(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,i=0;for(;i<r;){let o=t[i];if(IC(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof t[i]=="string";)i++;else{if(o===e)return t[i+1];i=i+2}}}return null}function d0(n,e,t){if(t&he.Optional||n!==void 0)return n;fm(e,"NodeInjector")}function h0(n,e,t,r){if(t&he.Optional&&r===void 0&&(r=null),!(t&(he.Self|he.Host))){let i=n[ls],o=yn(void 0);try{return i?i.get(e,r,t&he.Optional):mC(e,r,t&he.Optional)}finally{yn(o)}}return d0(r,e,t)}function f0(n,e,t,r=he.Default,i){if(n!==null){if(e[oe]&2048&&!(r&he.Self)){let s=m1(n,e,t,r,zn);if(s!==zn)return s}let o=p0(n,e,t,r,zn);if(o!==zn)return o}return h0(e,t,r,i)}function p0(n,e,t,r,i){let o=p1(t);if(typeof o=="function"){if(!e0(e,n,r))return r&he.Host?d0(i,t,r):h0(e,t,r,i);try{let s;if(s=o(r),s==null&&!(r&he.Optional))fm(t);else return s}finally{i0()}}else if(typeof o=="number"){let s=null,a=l0(n,e),u=os,l=r&he.Host?e[Kn][Pn]:null;for((a===-1||r&he.SkipSelf)&&(u=a===-1?Sm(n,e):e[a+8],u===os||!LD(r,!1)?a=-1:(s=e[ye],a=ad(u),e=ud(u,e)));a!==-1;){let h=e[ye];if(VD(o,a,h.data)){let p=h1(a,e,t,s,r,l);if(p!==zn)return p}u=e[a+8],u!==os&&LD(r,e[ye].data[a+8]===l)&&VD(o,a,e)?(s=h,a=ad(u),e=ud(u,e)):a=-1}}return i}function h1(n,e,t,r,i,o){let s=e[ye],a=s.data[n+8],u=r==null?Md(a)&&Vg:r!=s&&(a.type&3)!==0,l=i&he.Host&&o===a,h=f1(a,s,t,u,l);return h!==null?fs(e,s,h,a):zn}function f1(n,e,t,r,i){let o=n.providerIndexes,s=e.data,a=o&1048575,u=n.directiveStart,l=n.directiveEnd,h=o>>20,p=r?a:a+h,m=i?a+h:l;for(let y=p;y<m;y++){let b=s[y];if(y<u&&t===b||y>=u&&b.type===t)return y}if(i){let y=s[u];if(y&&Jr(y)&&y.type===t)return u}return null}function fs(n,e,t,r){let i=n[t],o=e.data;if(i1(i)){let s=i;s.resolving&&qN(HN(o[t]));let a=FD(s.canSeeViewProviders);s.resolving=!0;let u,l=s.injectImpl?yn(s.injectImpl):null,h=e0(n,r,he.Default);try{i=n[t]=s.factory(void 0,o,n,r),e.firstCreatePass&&t>=r.directiveStart&&n1(t,o[t],e)}finally{l!==null&&yn(l),FD(a),s.resolving=!1,i0()}}return i}function p1(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(ou)?n[ou]:void 0;return typeof e=="number"?e>=0?e&u0:g1:e}function VD(n,e,t){let r=1<<n;return!!(t[e+(n>>c0)]&r)}function LD(n,e){return!(n&he.Self)&&!(n&he.Host&&e)}var $i=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return f0(this._tNode,this._lView,e,Td(r),t)}};function g1(){return new $i(kt(),Ne())}function mu(n){return fu(()=>{let e=n.prototype.constructor,t=e[Zl]||jg(e),r=Object.prototype,i=Object.getPrototypeOf(n.prototype).constructor;for(;i&&i!==r;){let o=i[Zl]||jg(i);if(o&&o!==t)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function jg(n){return lC(n)?()=>{let e=jg(Nt(n));return e&&e()}:ss(n)}function m1(n,e,t,r,i){let o=n,s=e;for(;o!==null&&s!==null&&s[oe]&2048&&!(s[oe]&512);){let a=p0(o,s,t,r|he.Self,zn);if(a!==zn)return a;let u=o.parent;if(!u){let l=s[OC];if(l){let h=l.get(t,zn,r);if(h!==zn)return h}u=g0(s),s=s[Es]}o=u}return i}function g0(n){let e=n[ye],t=e.type;return t===2?e.declTNode:t===1?n[Pn]:null}function Am(n){return d1(kt(),n)}function jD(n,e=null,t=null,r){let i=m0(n,e,t,r);return i.resolveInjectorInitializers(),i}function m0(n,e=null,t=null,r,i=new Set){let o=[t||vn,vP(n)];return r=r||(typeof n=="object"?void 0:qt(n)),new cu(o,e||vm(),r||null,i)}var ln=class n{static{this.THROW_IF_NOT_FOUND=au}static{this.NULL=new ed}static create(e,t){if(Array.isArray(e))return jD({name:""},t,e,"");{let r=e.name??"";return jD({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=z({token:n,providedIn:"any",factory:()=>F(_C)})}static{this.__NG_ELEMENT_ID__=-1}};var y1=new W("");y1.__NG_ELEMENT_ID__=n=>{let e=kt();if(e===null)throw new J(204,!1);if(e.type&2)return e.value;if(n&he.Optional)return null;throw new J(204,!1)};var v1="ngOriginalError";function vg(n){return n[v1]}var y0=!0,Mm=(()=>{class n{static{this.__NG_ELEMENT_ID__=_1}static{this.__NG_ENV_ID__=t=>t}}return n})(),Bg=class extends Mm{constructor(e){super(),this._lView=e}onDestroy(e){return GC(this._lView,e),()=>jP(this._lView,e)}};function _1(){return new Bg(Ne())}var Is=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new yt(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Ug=class extends $e{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,kC()&&(this.destroyRef=B(Mm,{optional:!0})??void 0,this.pendingTasks=B(Is,{optional:!0})??void 0)}emit(e){let t=De(null);try{super.next(e)}finally{De(t)}}subscribe(e,t,r){let i=e,o=t||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return e instanceof Ke&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},nt=Ug;function ld(...n){}function v0(n){let e,t;function r(){n=ld;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function BD(n){return queueMicrotask(()=>n()),()=>{n=ld}}var xm="isAngularZone",dd=xm+"_ID",w1=0,we=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new nt(!1),this.onMicrotaskEmpty=new nt(!1),this.onStable=new nt(!1),this.onError=new nt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=y0}=e;if(typeof Zone>"u")throw new J(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,D1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xm)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new J(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new J(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,E1,ld,ld);try{return o.runTask(s,t,r)}finally{o.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},E1={};function Rm(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function I1(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){v0(()=>{n.callbackScheduled=!1,$g(n),n.isCheckStableRunning=!0,Rm(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$g(n)}function D1(n){let e=()=>{I1(n)},t=w1++;n._inner=n._inner.fork({name:"angular",properties:{[xm]:!0,[dd]:t,[dd+t]:!0},onInvokeTask:(r,i,o,s,a,u)=>{if(C1(u))return r.invokeTask(o,s,a,u);try{return UD(n),r.invokeTask(o,s,a,u)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),$D(n)}},onInvoke:(r,i,o,s,a,u,l)=>{try{return UD(n),r.invoke(o,s,a,u,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!b1(u)&&e(),$D(n)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,$g(n),Rm(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function $g(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function UD(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function $D(n){n._nesting--,Rm(n)}var hd=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new nt,this.onMicrotaskEmpty=new nt,this.onStable=new nt,this.onError=new nt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,i){return e.apply(t,r)}};function C1(n){return _0(n,"__ignore_ng_zone__")}function b1(n){return _0(n,"__scheduler_tick__")}function _0(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}function T1(n="zone.js",e){return n==="noop"?new hd:n==="zone.js"?new we(e):n}var vr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&vg(e);for(;t&&vg(t);)t=vg(t);return t||null}},S1=new W("",{providedIn:"root",factory:()=>{let n=B(we),e=B(vr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function A1(){return kd(kt(),Ne())}function kd(n,e){return new ri(En(n,e))}var ri=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=A1}}return n})();function w0(n){return(n.flags&128)===128}var E0=new Map,M1=0;function x1(){return M1++}function R1(n){E0.set(n[Ad],n)}function Hg(n){E0.delete(n[Ad])}var HD="__ngContext__";function Wi(n,e){Kr(e)?(n[HD]=e[Ad],R1(e)):n[HD]=e}function I0(n){return C0(n[lu])}function D0(n){return C0(n[xn])}function C0(n){for(;n!==null&&!Ir(n);)n=n[xn];return n}var qg;function b0(n){qg=n}function N1(){if(qg!==void 0)return qg;if(typeof document<"u")return document;throw new J(210,!1)}var Od=new W("",{providedIn:"root",factory:()=>P1}),P1="ng",Nm=new W(""),Qt=new W("",{providedIn:"platform",factory:()=>"unknown"});var Pm=new W("",{providedIn:"root",factory:()=>N1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var k1="h",O1="b";var F1=()=>null;function km(n,e,t=!1){return F1(n,e,t)}var T0=!1,V1=new W("",{providedIn:"root",factory:()=>T0});var $l;function L1(){if($l===void 0&&($l=null,Rn.trustedTypes))try{$l=Rn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return $l}function qD(n){return L1()?.createScriptURL(n)||n}var fd=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${uC})`}};function yu(n){return n instanceof fd?n.changingThisBreaksApplicationSecurity:n}function Om(n,e){let t=j1(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${uC})`)}return t===e}function j1(n){return n instanceof fd&&n.getTypeName()||null}var B1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function S0(n){return n=String(n),n.match(B1)?n:"unsafe:"+n}var Fd=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Fd||{});function U1(n){let e=M0();return e?e.sanitize(Fd.URL,n)||"":Om(n,"URL")?yu(n):S0(yr(n))}function $1(n){let e=M0();if(e)return qD(e.sanitize(Fd.RESOURCE_URL,n)||"");if(Om(n,"ResourceURL"))return qD(yu(n));throw new J(904,!1)}function H1(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?$1:U1}function A0(n,e,t){return H1(e,t)(n)}function M0(){let n=Ne();return n&&n[Wn].sanitizer}function x0(n){return n instanceof Function?n():n}function q1(n){return(n??B(ln)).get(Qt)==="browser"}var _r=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(_r||{}),z1;function Fm(n,e){return z1(n,e)}function ns(n,e,t,r,i){if(r!=null){let o,s=!1;Ir(r)?o=r:Kr(r)&&(s=!0,r=r[Er]);let a=Qn(r);n===0&&t!==null?i==null?O0(e,t,a):pd(e,t,a,i||null,!0):n===1&&t!==null?pd(e,t,a,i||null,!0):n===2?sk(e,a,s):n===3&&e.destroyNode(a),o!=null&&uk(e,n,o,t,i)}}function G1(n,e){return n.createText(e)}function W1(n,e,t){n.setValue(e,t)}function R0(n,e,t){return n.createElement(e,t)}function K1(n,e){N0(n,e),e[Er]=null,e[Pn]=null}function Q1(n,e,t,r,i,o){r[Er]=i,r[Pn]=e,Vd(n,r,t,1,i,o)}function N0(n,e){e[Wn].changeDetectionScheduler?.notify(9),Vd(n,e,e[rt],2,null,null)}function Y1(n){let e=n[lu];if(!e)return _g(n[ye],n);for(;e;){let t=null;if(Kr(e))t=e[lu];else{let r=e[wn];r&&(t=r)}if(!t){for(;e&&!e[xn]&&e!==n;)Kr(e)&&_g(e[ye],e),e=e[Pt];e===null&&(e=n),Kr(e)&&_g(e[ye],e),t=e&&e[xn]}e=t}}function Z1(n,e,t,r){let i=wn+r,o=t.length;r>0&&(t[i-1][xn]=e),r<o-wn?(e[xn]=t[i],vC(t,wn+r,e)):(t.push(e),e[xn]=null),e[Pt]=t;let s=e[ds];s!==null&&t!==s&&P0(s,e);let a=e[hs];a!==null&&a.insertView(n),kg(e),e[oe]|=128}function P0(n,e){let t=n[id],r=e[Pt];if(Kr(r))n[oe]|=od.HasTransplantedViews;else{let i=r[Pt][Kn];e[Kn]!==i&&(n[oe]|=od.HasTransplantedViews)}t===null?n[id]=[e]:t.push(e)}function Vm(n,e){let t=n[id],r=t.indexOf(e);t.splice(r,1)}function zg(n,e){if(n.length<=wn)return;let t=wn+e,r=n[t];if(r){let i=r[ds];i!==null&&i!==n&&Vm(i,r),e>0&&(n[t-1][xn]=r[xn]);let o=Xl(n,wn+e);K1(r[ye],r);let s=o[hs];s!==null&&s.detachView(o[ye]),r[Pt]=null,r[xn]=null,r[oe]&=-129}return r}function k0(n,e){if(!(e[oe]&256)){let t=e[rt];t.destroyNode&&Vd(n,e,t,3,null,null),Y1(e)}}function _g(n,e){if(e[oe]&256)return;let t=De(null);try{e[oe]&=-129,e[oe]|=256,e[_n]&&zp(e[_n]),X1(n,e),J1(n,e),e[ye].type===1&&e[rt].destroy();let r=e[ds];if(r!==null&&Ir(e[Pt])){r!==e[Pt]&&Vm(r,e);let i=e[hs];i!==null&&i.detachView(n)}Hg(e)}finally{De(t)}}function J1(n,e){let t=n.cleanup,r=e[nd];if(t!==null)for(let o=0;o<t.length-1;o+=2)if(typeof t[o]=="string"){let s=t[o+3];s>=0?r[s]():r[-s].unsubscribe(),o+=2}else{let s=r[t[o+1]];t[o].call(s)}r!==null&&(e[nd]=null);let i=e[Wr];if(i!==null){e[Wr]=null;for(let o=0;o<i.length;o++){let s=i[o];s()}}}function X1(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let i=e[t[r]];if(!(i instanceof Gi)){let o=t[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],u=o[s+1];qn(4,a,u);try{u.call(a)}finally{qn(5,a,u)}}else{qn(4,i,o);try{o.call(i)}finally{qn(5,i,o)}}}}}function ek(n,e,t){return tk(n,e.parent,t)}function tk(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Er];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:o}=n.data[r.directiveStart+i];if(o===Gn.None||o===Gn.Emulated)return null}return En(r,t)}}function pd(n,e,t,r,i){n.insertBefore(e,t,r,i)}function O0(n,e,t){n.appendChild(e,t)}function zD(n,e,t,r,i){r!==null?pd(n,e,t,r,i):O0(n,e,t)}function F0(n,e){return n.parentNode(e)}function nk(n,e){return n.nextSibling(e)}function rk(n,e,t){return ok(n,e,t)}function ik(n,e,t){return n.type&40?En(n,t):null}var ok=ik,GD;function Lm(n,e,t,r){let i=ek(n,r,e),o=e[rt],s=r.parent||e[Pn],a=rk(s,r,e);if(i!=null)if(Array.isArray(t))for(let u=0;u<t.length;u++)zD(o,i,t[u],a,!1);else zD(o,i,t,a,!1);GD!==void 0&&GD(o,r,e,t,i)}function iu(n,e){if(e!==null){let t=e.type;if(t&3)return En(e,n);if(t&4)return Gg(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return iu(n,r);{let i=n[e.index];return Ir(i)?Gg(-1,i):Qn(i)}}else{if(t&128)return iu(n,e.next);if(t&32)return Fm(e,n)()||Qn(n[e.index]);{let r=V0(n,e);if(r!==null){if(Array.isArray(r))return r[0];let i=qi(n[Kn]);return iu(i,r)}else return iu(n,e.next)}}}return null}function V0(n,e){if(e!==null){let r=n[Kn][Pn],i=e.projection;return r.projection[i]}return null}function Gg(n,e){let t=wn+n+1;if(t<e.length){let r=e[t],i=r[ye].firstChild;if(i!==null)return iu(r,i)}return e[Hi]}function sk(n,e,t){n.removeChild(null,e,t)}function jm(n,e,t,r,i,o,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],u=t.type;if(s&&e===0&&(a&&Wi(Qn(a),r),t.flags|=2),(t.flags&32)!==32)if(u&8)jm(n,e,t.child,r,i,o,!1),ns(e,n,i,a,o);else if(u&32){let l=Fm(t,r),h;for(;h=l();)ns(e,n,i,h,o);ns(e,n,i,a,o)}else u&16?ak(n,e,r,t,i,o):ns(e,n,i,a,o);t=s?t.projectionNext:t.next}}function Vd(n,e,t,r,i,o){jm(t,r,n.firstChild,e,i,o,!1)}function ak(n,e,t,r,i,o){let s=t[Kn],u=s[Pn].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];ns(e,n,i,h,o)}else{let l=u,h=s[Pt];w0(r)&&(l.flags|=128),jm(n,e,l,h,i,o,!0)}}function uk(n,e,t,r,i){let o=t[Hi],s=Qn(t);o!==s&&ns(e,n,r,o,i);for(let a=wn;a<t.length;a++){let u=t[a];Vd(u[ye],u,n,e,r,o)}}function ck(n,e,t,r,i){if(e)i?n.addClass(t,r):n.removeClass(t,r);else{let o=r.indexOf("-")===-1?void 0:_r.DashCase;i==null?n.removeStyle(t,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=_r.Important),n.setStyle(t,r,i,o))}}function lk(n,e,t){n.setAttribute(e,"style",t)}function L0(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function j0(n,e,t){let{mergedAttrs:r,classes:i,styles:o}=t;r!==null&&Ag(n,e,r),i!==null&&L0(n,e,i),o!==null&&lk(n,e,o)}var kn={};function ne(n=1){B0(Gt(),Ne(),ni()+n,!1)}function B0(n,e,t,r){if(!r)if((e[oe]&3)===3){let o=n.preOrderCheckHooks;o!==null&&Kl(e,o,t)}else{let o=n.preOrderHooks;o!==null&&Ql(e,o,0,t)}zi(t)}function se(n,e=he.Default){let t=Ne();if(t===null)return F(n,e);let r=kt();return f0(r,t,Nt(n),e)}function U0(){let n="invalid";throw new Error(n)}function $0(n,e,t,r,i,o){let s=De(null);try{let a=null;i&Qr.SignalBased&&(a=e[r][fr]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),i&Qr.HasDecoratorInputTransform&&(o=n.inputTransforms[r].call(e,o)),n.setInput!==null?n.setInput(e,a,o,t,r):LC(e,a,r,o)}finally{De(s)}}function dk(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let i=t[r];if(i<0)zi(~i);else{let o=i,s=t[++r],a=t[++r];YP(s,o);let u=e[o];a(2,u)}}}finally{zi(-1)}}function Ld(n,e,t,r,i,o,s,a,u,l,h){let p=e.blueprint.slice();return p[Er]=i,p[oe]=r|4|128|8|64,(l!==null||n&&n[oe]&2048)&&(p[oe]|=2048),qC(p),p[Pt]=p[Es]=n,p[Nn]=t,p[Wn]=s||n&&n[Wn],p[rt]=a||n&&n[rt],p[ls]=u||n&&n[ls]||null,p[Pn]=o,p[Ad]=x1(),p[td]=h,p[OC]=l,p[Kn]=e.type==2?n[Kn]:p,p}function jd(n,e,t,r,i){let o=n.data[e];if(o===null)o=hk(n,e,t,r,i),QP()&&(o.flags|=32);else if(o.type&64){o.type=t,o.value=r,o.attrs=i;let s=GP();o.injectorIndex=s===null?-1:s.injectorIndex}return gu(o,!0),o}function hk(n,e,t,r,i){let o=QC(),s=YC(),a=s?o:o&&o.parent,u=n.data[e]=yk(n,a,t,e,r,i);return n.firstChild===null&&(n.firstChild=u),o!==null&&(s?o.child==null&&u.parent!==null&&(o.child=u):o.next===null&&(o.next=u,u.prev=o)),u}function H0(n,e,t,r){if(t===0)return-1;let i=e.length;for(let o=0;o<t;o++)e.push(r),n.blueprint.push(r),n.data.push(null);return i}function q0(n,e,t,r,i){let o=ni(),s=r&2;try{zi(-1),s&&e.length>Zr&&B0(n,e,Zr,!1),qn(s?2:0,i),t(r,i)}finally{zi(o),qn(s?3:1,i)}}function z0(n,e,t){if(VC(e)){let r=De(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let a=n.data[s];if(a.contentQueries){let u=t[s];a.contentQueries(1,u,s)}}}finally{De(r)}}}function G0(n,e,t){KC()&&(Dk(n,e,t,En(t,e)),(t.flags&64)===64&&Z0(n,e,t))}function W0(n,e,t=En){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?t(e,n):n[s];n[i++]=a}}}function K0(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Bm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Bm(n,e,t,r,i,o,s,a,u,l,h){let p=Zr+r,m=p+i,y=fk(p,m),b=typeof l=="function"?l():l;return y[ye]={type:n,blueprint:y,template:t,queries:null,viewQuery:a,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function fk(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:kn);return t}function pk(n,e,t,r){let o=r.get(V1,T0)||t===Gn.ShadowDom,s=n.selectRootElement(e,o);return gk(s),s}function gk(n){mk(n)}var mk=()=>null;function yk(n,e,t,r,i,o){let s=e?e.injectorIndex:-1,a=0;return HP()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function WD(n,e,t,r,i){for(let o in e){if(!e.hasOwnProperty(o))continue;let s=e[o];if(s===void 0)continue;r??={};let a,u=Qr.None;Array.isArray(s)?(a=s[0],u=s[1]):a=s;let l=o;if(i!==null){if(!i.hasOwnProperty(o))continue;l=i[o]}n===0?KD(r,t,l,a,u):KD(r,t,l,a)}return r}function KD(n,e,t,r,i){let o;n.hasOwnProperty(t)?(o=n[t]).push(e,r):o=n[t]=[e,r],i!==void 0&&o.push(i)}function vk(n,e,t){let r=e.directiveStart,i=e.directiveEnd,o=n.data,s=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=o[h],m=t?t.get(p):null,y=m?m.inputs:null,b=m?m.outputs:null;u=WD(0,p.inputs,h,u,y),l=WD(1,p.outputs,h,l,b);let A=u!==null&&s!==null&&!mm(e)?kk(u,h,s):null;a.push(A)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function _k(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Um(n,e,t,r,i,o,s,a){let u=En(e,t),l=e.inputs,h;!a&&l!=null&&(h=l[r])?($m(n,t,h,r,i),Md(e)&&wk(t,e.index)):e.type&3?(r=_k(r),i=s!=null?s(i,e.value||"",r):i,o.setProperty(u,r,i)):e.type&12}function wk(n,e){let t=ti(e,n);t[oe]&16||(t[oe]|=64)}function Q0(n,e,t,r){if(KC()){let i=r===null?null:{"":-1},o=bk(n,t),s,a;o===null?s=a=null:[s,a]=o,s!==null&&Y0(n,e,t,s,i,a),i&&Tk(t,r,i)}t.mergedAttrs=uu(t.mergedAttrs,t.attrs)}function Y0(n,e,t,r,i,o){for(let l=0;l<r.length;l++)Lg(cd(t,e),n,r[l].type);Ak(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let s=!1,a=!1,u=H0(n,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];t.mergedAttrs=uu(t.mergedAttrs,h.hostAttrs),Mk(n,t,e,u,h),Sk(u,h,i),h.contentQueries!==null&&(t.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(t.flags|=64);let p=h.type.prototype;!s&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),u++}vk(n,t,o)}function Ek(n,e,t,r,i){let o=i.hostBindings;if(o){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;Ik(s)!=a&&s.push(a),s.push(t,r,o)}}function Ik(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function Dk(n,e,t,r){let i=t.directiveStart,o=t.directiveEnd;Md(t)&&xk(e,t,n.data[i+t.componentOffset]),n.firstCreatePass||cd(t,e),Wi(r,e);let s=t.initialInputs;for(let a=i;a<o;a++){let u=n.data[a],l=fs(e,n,a,t);if(Wi(l,e),s!==null&&Pk(e,a-i,l,u,t,s),Jr(u)){let h=ti(t.index,e);h[Nn]=fs(e,n,a,t)}}}function Z0(n,e,t){let r=t.directiveStart,i=t.directiveEnd,o=t.index,s=ZP();try{zi(o);for(let a=r;a<i;a++){let u=n.data[a],l=e[a];Og(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&Ck(u,l)}}finally{zi(-1),Og(s)}}function Ck(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function bk(n,e){let t=n.directiveRegistry,r=null,i=null;if(t)for(let o=0;o<t.length;o++){let s=t[o];if(cP(e,s.selectors,!1))if(r||(r=[]),Jr(s))if(s.findHostDirectiveDefs!==null){let a=[];i=i||new Map,s.findHostDirectiveDefs(s,a,i),r.unshift(...a,s);let u=a.length;Wg(n,e,u)}else r.unshift(s),Wg(n,e,0);else i=i||new Map,s.findHostDirectiveDefs?.(s,r,i),r.push(s)}return r===null?null:[r,i]}function Wg(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function Tk(n,e,t){if(e){let r=n.localNames=[];for(let i=0;i<e.length;i+=2){let o=t[e[i+1]];if(o==null)throw new J(-301,!1);r.push(e[i],o)}}}function Sk(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Jr(e)&&(t[""]=n)}}function Ak(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function Mk(n,e,t,r,i){n.data[r]=i;let o=i.factory||(i.factory=ss(i.type,!0)),s=new Gi(o,Jr(i),se);n.blueprint[r]=s,t[r]=s,Ek(n,e,r,H0(n,t,i.hostVars,kn),i)}function xk(n,e,t){let r=En(e,n),i=K0(t),o=n[Wn].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Bd(n,Ld(n,i,null,s,r,e,null,o.createRenderer(r,t),null,null,null));n[e.index]=a}function Rk(n,e,t,r,i,o){let s=En(n,e);Nk(e[rt],s,o,n.value,t,r,i)}function Nk(n,e,t,r,i,o,s){if(o==null)n.removeAttribute(e,i,t);else{let a=s==null?yr(o):s(o,r||"",i);n.setAttribute(e,i,a,t)}}function Pk(n,e,t,r,i,o){let s=o[e];if(s!==null)for(let a=0;a<s.length;){let u=s[a++],l=s[a++],h=s[a++],p=s[a++];$0(r,t,u,l,h,p)}}function kk(n,e,t){let r=null,i=0;for(;i<t.length;){let o=t[i];if(o===0){i+=4;continue}else if(o===5){i+=2;continue}if(typeof o=="number")break;if(n.hasOwnProperty(o)){r===null&&(r=[]);let s=n[o];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(o,s[a+1],s[a+2],t[i+1]);break}}i+=2}return r}function J0(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function X0(n,e){let t=n.contentQueries;if(t!==null){let r=De(null);try{for(let i=0;i<t.length;i+=2){let o=t[i],s=t[i+1];if(s!==-1){let a=n.data[s];XC(o),a.contentQueries(2,e[s],s)}}}finally{De(r)}}}function Bd(n,e){return n[lu]?n[ND][xn]=e:n[lu]=e,n[ND]=e,e}function Kg(n,e,t){XC(0);let r=De(null);try{e(n,t)}finally{De(r)}}function Ok(n){return n[nd]??=[]}function Fk(n){return n.cleanup??=[]}function eb(n,e){let t=n[ls],r=t?t.get(vr,null):null;r&&r.handleError(e)}function $m(n,e,t,r,i){for(let o=0;o<t.length;){let s=t[o++],a=t[o++],u=t[o++],l=e[s],h=n.data[s];$0(h,l,r,a,u,i)}}function Hm(n,e,t){let r=$C(e,n);W1(n[rt],r,t)}function Vk(n,e){let t=ti(e,n),r=t[ye];Lk(r,t);let i=t[Er];i!==null&&t[td]===null&&(t[td]=km(i,t[ls])),qm(r,t,t[Nn])}function Lk(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function qm(n,e,t){Im(e);try{let r=n.viewQuery;r!==null&&Kg(1,r,t);let i=n.template;i!==null&&q0(n,e,i,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[hs]?.finishViewCreation(n),n.staticContentQueries&&X0(n,e),n.staticViewQueries&&Kg(2,n.viewQuery,t);let o=n.components;o!==null&&jk(e,o)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[oe]&=-5,Dm()}}function jk(n,e){for(let t=0;t<e.length;t++)Vk(n,e[t])}function Bk(n,e,t,r){let i=De(null);try{let o=e.tView,a=n[oe]&4096?4096:16,u=Ld(n,o,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];u[ds]=l;let h=n[hs];return h!==null&&(u[hs]=h.createEmbeddedView(o)),qm(o,u,t),u}finally{De(i)}}function QD(n,e){return!e||e.firstChild===null||w0(n)}function Uk(n,e,t,r=!0){let i=e[ye];if(Z1(i,e,n,t),r){let s=Gg(t,n),a=e[rt],u=F0(a,n[Hi]);u!==null&&Q1(i,n[Pn],a,e,u,s)}let o=e[td];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function gd(n,e,t,r,i=!1){for(;t!==null;){if(t.type===128){t=i?t.projectionNext:t.next;continue}let o=e[t.index];o!==null&&r.push(Qn(o)),Ir(o)&&$k(o,r);let s=t.type;if(s&8)gd(n,e,t.child,r);else if(s&32){let a=Fm(t,e),u;for(;u=a();)r.push(u)}else if(s&16){let a=V0(e,t);if(Array.isArray(a))r.push(...a);else{let u=qi(e[Kn]);gd(u[ye],u,a,r,!0)}}t=i?t.projectionNext:t.next}return r}function $k(n,e){for(let t=wn;t<n.length;t++){let r=n[t],i=r[ye].firstChild;i!==null&&gd(r[ye],r,i,e)}n[Hi]!==n[Er]&&e.push(n[Hi])}var tb=[];function Hk(n){return n[_n]??qk(n)}function qk(n){let e=tb.pop()??Object.create(Gk);return e.lView=n,e}function zk(n){n.lView[_n]!==n&&(n.lView=null,tb.push(n))}var Gk=fe(P({},Ya),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Rd(n.lView)},consumerOnSignalRead(){this.lView[_n]=this}});function Wk(n){let e=n[_n]??Object.create(Kk);return e.lView=n,e}var Kk=fe(P({},Ya),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=qi(n.lView);for(;e&&!nb(e[ye]);)e=qi(e);e&&zC(e)},consumerOnSignalRead(){this.lView[_n]=this}});function nb(n){return n.type!==2}var Qk=100;function rb(n,e=!0,t=0){let r=n[Wn],i=r.rendererFactory,o=!1;o||i.begin?.();try{Yk(n,t)}catch(s){throw e&&eb(n,s),s}finally{o||(i.end?.(),r.inlineEffectRunner?.flush())}}function Yk(n,e){let t=ZC();try{kD(!0),Qg(n,e);let r=0;for(;xd(n);){if(r===Qk)throw new J(103,!1);r++,Qg(n,1)}}finally{kD(t)}}function Zk(n,e,t,r){let i=e[oe];if((i&256)===256)return;let o=!1,s=!1;!o&&e[Wn].inlineEffectRunner?.flush(),Im(e);let a=!0,u=null,l=null;o||(nb(n)?(l=Hk(e),u=dl(l)):UI()===null?(a=!1,l=Wk(e),u=dl(l)):e[_n]&&(zp(e[_n]),e[_n]=null));try{qC(e),KP(n.bindingStartIndex),t!==null&&q0(n,e,t,2,r);let h=(i&3)===3;if(!o)if(h){let y=n.preOrderCheckHooks;y!==null&&Kl(e,y,null)}else{let y=n.preOrderHooks;y!==null&&Ql(e,y,0,null),gg(e,0)}if(s||Jk(e),ib(e,0),n.contentQueries!==null&&X0(n,e),!o)if(h){let y=n.contentCheckHooks;y!==null&&Kl(e,y)}else{let y=n.contentHooks;y!==null&&Ql(e,y,1),gg(e,1)}dk(n,e);let p=n.components;p!==null&&sb(e,p,0);let m=n.viewQuery;if(m!==null&&Kg(2,m,r),!o)if(h){let y=n.viewCheckHooks;y!==null&&Kl(e,y)}else{let y=n.viewHooks;y!==null&&Ql(e,y,2),gg(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[pg]){for(let y of e[pg])y();e[pg]=null}o||(e[oe]&=-73)}catch(h){throw o||Rd(e),h}finally{l!==null&&(Hp(l,u),a&&zk(l)),Dm()}}function ib(n,e){for(let t=I0(n);t!==null;t=D0(t))for(let r=wn;r<t.length;r++){let i=t[r];ob(i,e)}}function Jk(n){for(let e=I0(n);e!==null;e=D0(e)){if(!(e[oe]&od.HasTransplantedViews))continue;let t=e[id];for(let r=0;r<t.length;r++){let i=t[r];zC(i)}}}function Xk(n,e,t){let r=ti(e,n);ob(r,t)}function ob(n,e){wm(n)&&Qg(n,e)}function Qg(n,e){let r=n[ye],i=n[oe],o=n[_n],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&qp(o)),s||=!1,o&&(o.dirty=!1),n[oe]&=-9217,s)Zk(r,n,r.template,n[Nn]);else if(i&8192){ib(n,1);let a=r.components;a!==null&&sb(n,a,1)}}function sb(n,e,t){for(let r=0;r<e.length;r++)Xk(n,e[r],t)}function zm(n,e){let t=ZC()?64:1088;for(n[Wn].changeDetectionScheduler?.notify(e);n;){n[oe]|=t;let r=qi(n);if(Ng(n)&&!r)return n;n=r}return null}var Ki=class{get rootNodes(){let e=this._lView,t=e[ye];return gd(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Nn]}set context(e){this._lView[Nn]=e}get destroyed(){return(this._lView[oe]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Pt];if(Ir(e)){let t=e[rd],r=t?t.indexOf(this):-1;r>-1&&(zg(e,r),Xl(t,r))}this._attachedToViewContainer=!1}k0(this._lView[ye],this._lView)}onDestroy(e){GC(this._lView,e)}markForCheck(){zm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[oe]&=-129}reattach(){kg(this._lView),this._lView[oe]|=128}detectChanges(){this._lView[oe]|=1024,rb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new J(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Ng(this._lView),t=this._lView[ds];t!==null&&!e&&Vm(t,this._lView),N0(this._lView[ye],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new J(902,!1);this._appRef=e;let t=Ng(this._lView),r=this._lView[ds];r!==null&&!t&&P0(r,this._lView),kg(this._lView)}},Gm=(()=>{class n{static{this.__NG_ELEMENT_ID__=nO}}return n})(),eO=Gm,tO=class extends eO{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let i=Bk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Ki(i)}};function nO(){return rO(kt(),Ne())}function rO(n,e){return n.type&4?new tO(e,n,kd(n,e)):null}var o9=new RegExp(`^(\\d+)*(${O1}|${k1})*(.*)`);var iO=()=>null;function YD(n,e){return iO(n,e)}var ps=class{},Wm=new W("",{providedIn:"root",factory:()=>!1});var ab=new W(""),ub=new W(""),Yg=class{},md=class{};function oO(n){let e=Error(`No component factory found for ${qt(n)}.`);return e[sO]=n,e}var sO="ngComponent";var Zg=class{resolveComponentFactory(e){throw oO(e)}},gs=class{static{this.NULL=new Zg}},ms=class{},Zi=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>aO()}}return n})();function aO(){let n=Ne(),e=kt(),t=ti(e.index,n);return(Kr(t)?t:n)[rt]}var uO=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>null})}}return n})();function Jg(n,e,t){let r=t?n.styles:null,i=t?n.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")o=a;else if(o==1)i=ID(i,a);else if(o==2){let u=a,l=e[++s];r=ID(r,u+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=i:n.classesWithoutHost=i}var yd=class extends gs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Yr(e);return new ys(t,this.ngModule)}};function ZD(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let i=n[r];if(i===void 0)continue;let o=Array.isArray(i),s=o?i[0]:i,a=o?i[1]:Qr.None;e?t.push({propName:s,templateName:r,isSignal:(a&Qr.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function cO(n){let e=n.toLowerCase();return e==="svg"?OP:e==="math"?FP:null}var ys=class extends md{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=ZD(e.inputs,!0);if(t!==null)for(let i of r)t.hasOwnProperty(i.propName)&&(i.transform=t[i.propName]);return r}get outputs(){return ZD(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=fP(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,i){let o=De(null);try{i=i||this.ngModule;let s=i instanceof cn?i:i?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Fg(e,s):e,u=a.get(ms,null);if(u===null)throw new J(407,!1);let l=a.get(uO,null),h=a.get(ps,null),p={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:h},m=u.createRenderer(null,this.componentDef),y=this.componentDef.selectors[0][0]||"div",b=r?pk(m,r,this.componentDef.encapsulation,a):R0(m,y,cO(y)),A=512;this.componentDef.signals?A|=4096:this.componentDef.onPush||(A|=16);let M=null;b!==null&&(M=km(b,a,!0));let L=Bm(0,null,null,1,0,null,null,null,null,null,null),G=Ld(null,L,null,A,null,null,p,m,a,null,M);Im(G);let V,Z,re=null;try{let X=this.componentDef,E,v=null;X.findHostDirectiveDefs?(E=[],v=new Map,X.findHostDirectiveDefs(X,E,v),E.push(X)):E=[X];let w=lO(G,b);re=dO(w,b,X,E,G,p,m),Z=HC(L,Zr),b&&pO(m,X,b,r),t!==void 0&&gO(Z,this.ngContentSelectors,t),V=fO(re,X,E,v,G,[mO]),qm(L,G,null)}catch(X){throw re!==null&&Hg(re),Hg(G),X}finally{Dm()}return new Xg(this.componentType,V,kd(Z,G),G,Z)}finally{De(o)}}},Xg=class extends Yg{constructor(e,t,r,i,o){super(),this.location=r,this._rootLView=i,this._tNode=o,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Ki(i,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let o=this._rootLView;$m(o[ye],o,i,e,t),this.previousInputValues.set(e,t);let s=ti(this._tNode.index,o);zm(s,1)}}get injector(){return new $i(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function lO(n,e){let t=n[ye],r=Zr;return n[r]=e,jd(t,r,2,"#host",null)}function dO(n,e,t,r,i,o,s){let a=i[ye];hO(r,n,e,s);let u=null;e!==null&&(u=km(e,i[ls]));let l=o.rendererFactory.createRenderer(e,t),h=16;t.signals?h=4096:t.onPush&&(h=64);let p=Ld(i,K0(t),null,h,i[n.index],n,o,l,null,null,u);return a.firstCreatePass&&Wg(a,n,r.length-1),Bd(i,p),i[n.index]=p}function hO(n,e,t,r){for(let i of n)e.mergedAttrs=uu(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(Jg(e,e.mergedAttrs,!0),t!==null&&j0(r,t,e))}function fO(n,e,t,r,i,o){let s=kt(),a=i[ye],u=En(s,i);Y0(a,i,s,t,null,r);for(let h=0;h<t.length;h++){let p=s.directiveStart+h,m=fs(i,a,p,s);Wi(m,i)}Z0(a,i,s),u&&Wi(u,i);let l=fs(i,a,s.directiveStart+s.componentOffset,s);if(n[Nn]=i[Nn]=l,o!==null)for(let h of o)h(l,e);return z0(a,s,i),l}function pO(n,e,t,r){if(r)Ag(n,t,["ng-version","18.2.13"]);else{let{attrs:i,classes:o}=pP(e.selectors[0]);i&&Ag(n,t,i),o&&o.length>0&&L0(n,t,o.join(" "))}}function gO(n,e,t){let r=n.projection=[];for(let i=0;i<e.length;i++){let o=t[i];r.push(o!=null?Array.from(o):null)}}function mO(){let n=kt();Tm(Ne()[ye],n)}var vu=(()=>{class n{static{this.__NG_ELEMENT_ID__=yO}}return n})();function yO(){let n=kt();return _O(n,Ne())}var vO=vu,cb=class extends vO{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return kd(this._hostTNode,this._hostLView)}get injector(){return new $i(this._hostTNode,this._hostLView)}get parentInjector(){let e=Sm(this._hostTNode,this._hostLView);if(a0(e)){let t=ud(e,this._hostLView),r=ad(e),i=t[ye].data[r+8];return new $i(i,t)}else return new $i(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=JD(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-wn}createEmbeddedView(e,t,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=YD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},o,s);return this.insertImpl(a,i,QD(this._hostTNode,s)),a}createComponent(e,t,r,i,o){let s=e&&!RP(e),a;if(s)a=t;else{let b=t||{};a=b.index,r=b.injector,i=b.projectableNodes,o=b.environmentInjector||b.ngModuleRef}let u=s?e:new ys(Yr(e)),l=r||this.parentInjector;if(!o&&u.ngModule==null){let A=(s?l:this.parentInjector).get(cn,null);A&&(o=A)}let h=Yr(u.componentType??{}),p=YD(this._lContainer,h?.id??null),m=p?.firstChild??null,y=u.create(l,i,m,o);return this.insertImpl(y.hostView,a,QD(this._hostTNode,p)),y}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let i=e._lView;if(VP(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Pt],l=new cb(u,u[Pn],u[Pt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(t),s=this._lContainer;return Uk(s,i,o,r),e.attachToViewContainerRef(),vC(wg(s),o,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=JD(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=zg(this._lContainer,t);r&&(Xl(wg(this._lContainer),t),k0(r[ye],r))}detach(e){let t=this._adjustIndex(e,-1),r=zg(this._lContainer,t);return r&&Xl(wg(this._lContainer),t)!=null?new Ki(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function JD(n){return n[rd]}function wg(n){return n[rd]||(n[rd]=[])}function _O(n,e){let t,r=e[n.index];return Ir(r)?t=r:(t=J0(r,e,null,n),e[n.index]=t,Bd(e,t)),EO(t,e,n,r),new cb(t,n,e)}function wO(n,e){let t=n[rt],r=t.createComment(""),i=En(e,n),o=F0(t,i);return pd(t,o,r,nk(t,i),!1),r}var EO=CO,IO=()=>!1;function DO(n,e,t){return IO(n,e,t)}function CO(n,e,t,r){if(n[Hi])return;let i;t.type&8?i=Qn(r):i=wO(e,t),n[Hi]=i}var XD=new Set;function _u(n){XD.has(n)||(XD.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function bO(n){return typeof n=="function"&&n[fr]!==void 0}function wu(n,e){_u("NgSignals");let t=JI(n),r=t[fr];return e?.equal&&(r.equal=e.equal),t.set=i=>Gp(r,i),t.update=i=>XI(r,i),t.asReadonly=TO.bind(t),t}function TO(){let n=this[fr];if(n.readonlyFn===void 0){let e=()=>this();e[fr]=n,n.readonlyFn=e}return n.readonlyFn}function lb(n){return bO(n)&&typeof n.set=="function"}function SO(n){let e=[],t=new Map;function r(i){let o=t.get(i);if(!o){let s=n(i);t.set(i,o=s.then(RO))}return o}return vd.forEach((i,o)=>{let s=[];i.templateUrl&&s.push(r(i.templateUrl).then(l=>{i.template=l}));let a=typeof i.styles=="string"?[i.styles]:i.styles||[];if(i.styles=a,i.styleUrl&&i.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(i.styleUrls?.length){let l=i.styles.length,h=i.styleUrls;i.styleUrls.forEach((p,m)=>{a.push(""),s.push(r(p).then(y=>{a[l+m]=y,h.splice(h.indexOf(p),1),h.length==0&&(i.styleUrls=void 0)}))})}else i.styleUrl&&s.push(r(i.styleUrl).then(l=>{a.push(l),i.styleUrl=void 0}));let u=Promise.all(s).then(()=>NO(o));e.push(u)}),MO(),Promise.all(e).then(()=>{})}var vd=new Map,AO=new Set;function MO(){let n=vd;return vd=new Map,n}function xO(){return vd.size===0}function RO(n){return typeof n=="string"?n:n.text()}function NO(n){AO.delete(n)}function PO(n){return Object.getPrototypeOf(n.prototype).constructor}function ii(n){let e=PO(n.type),t=!0,r=[n];for(;e;){let i;if(Jr(n))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new J(903,!1);i=e.\u0275dir}if(i){if(t){r.push(i);let s=n;s.inputs=Hl(n.inputs),s.inputTransforms=Hl(n.inputTransforms),s.declaredInputs=Hl(n.declaredInputs),s.outputs=Hl(n.outputs);let a=i.hostBindings;a&&LO(n,a);let u=i.viewQuery,l=i.contentQueries;if(u&&FO(n,u),l&&VO(n,l),kO(n,i),ON(n.outputs,i.outputs),Jr(i)&&i.data.animation){let h=n.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(n),a===ii&&(t=!1)}}e=Object.getPrototypeOf(e)}OO(r)}function kO(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;n.inputTransforms??={},n.inputTransforms[i]=e.inputTransforms[i]}}}function OO(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let i=n[r];i.hostVars=e+=i.hostVars,i.hostAttrs=uu(i.hostAttrs,t=uu(t,i.hostAttrs))}}function Hl(n){return n===as?{}:n===vn?[]:n}function FO(n,e){let t=n.viewQuery;t?n.viewQuery=(r,i)=>{e(r,i),t(r,i)}:n.viewQuery=e}function VO(n,e){let t=n.contentQueries;t?n.contentQueries=(r,i,o)=>{e(r,i,o),t(r,i,o)}:n.contentQueries=e}function LO(n,e){let t=n.hostBindings;t?n.hostBindings=(r,i)=>{e(r,i),t(r,i)}:n.hostBindings=e}function Km(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(t[r]=i[3])}n.inputTransforms=t}var Xr=class{},du=class{};var _d=class extends Xr{constructor(e,t,r,i=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new yd(this);let o=SC(e);this._bootstrapComponents=x0(o.bootstrap),this._r3Injector=m0(e,t,[{provide:Xr,useValue:this},{provide:gs,useValue:this.componentFactoryResolver},...r],qt(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},wd=class extends du{constructor(e){super(),this.moduleType=e}create(e){return new _d(this.moduleType,e,[])}};function jO(n,e,t){return new _d(n,e,t,!1)}var em=class extends Xr{constructor(e){super(),this.componentFactoryResolver=new yd(this),this.instance=null;let t=new cu([...e.providers,{provide:Xr,useValue:this},{provide:gs,useValue:this.componentFactoryResolver}],e.parent||vm(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ud(n,e,t=null){return new em({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function db(n){return UO(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function BO(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function UO(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function ei(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function hb(n,e,t,r){let i=ei(n,e,t);return ei(n,e+1,r)||i}function $O(n,e,t,r,i){let o=hb(n,e,t,r);return ei(n,e+2,i)||o}function HO(n){return(n.flags&32)===32}function qO(n,e,t,r,i,o,s,a,u){let l=e.consts,h=jd(e,n,4,s||null,a||null);Q0(e,t,h,sd(l,u)),Tm(e,h);let p=h.tView=Bm(2,h,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function zO(n,e,t,r,i,o,s,a,u,l){let h=t+Zr,p=e.firstCreatePass?qO(h,e,n,r,i,o,s,a,u):e.data[h];gu(p,!1);let m=GO(e,n,p,t);Cm()&&Lm(e,n,m,p),Wi(m,n);let y=J0(m,n,m,p);return n[h]=y,Bd(n,y),DO(y,p,n),_m(p)&&G0(e,n,p),u!=null&&W0(n,p,l),p}function Ot(n,e,t,r,i,o,s,a){let u=Ne(),l=Gt(),h=sd(l.consts,o);return zO(u,l,n,e,t,r,i,h,s,a),Ot}var GO=WO;function WO(n,e,t,r){return bm(!0),e[rt].createComment("")}var rs=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(rs||{}),fb=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}}return n})(),tm=class n{constructor(){this.ngZone=B(we),this.scheduler=B(ps),this.errorHandler=B(vr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[rs.EarlyRead,rs.Write,rs.MixedReadWrite,rs.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>new n})}},nm=class{constructor(e,t,r,i){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function Qm(n,e){!e?.injector&&MP(Qm);let t=e?.injector??B(ln);return q1(t)?(_u("NgAfterNextRender"),QO(n,t,e,!0)):YO}function KO(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function QO(n,e,t,r){let i=e.get(fb);i.impl??=e.get(tm);let o=t?.phase??rs.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(Mm):null,a=new nm(i.impl,KO(n,o),r,s);return i.impl.register(a),a}var YO={destroy(){}};function $d(n,e,t,r){let i=Ne(),o=Nd();if(ei(i,o,e)){let s=Gt(),a=Pd();Rk(a,i,n,e,t,r)}return $d}function pb(n,e,t,r){return ei(n,Nd(),t)?e+yr(t)+r:kn}function ZO(n,e,t,r,i,o){let s=JC(),a=hb(n,s,t,i);return Em(2),a?e+yr(t)+r+yr(i)+o:kn}function JO(n,e,t,r,i,o,s,a){let u=JC(),l=$O(n,u,t,i,s);return Em(3),l?e+yr(t)+r+yr(i)+o+yr(s)+a:kn}function ql(n,e){return n<<17|e<<2}function Qi(n){return n>>17&32767}function XO(n){return(n&2)==2}function eF(n,e){return n&131071|e<<17}function rm(n){return n|2}function vs(n){return(n&131068)>>2}function Eg(n,e){return n&-131069|e<<2}function tF(n){return(n&1)===1}function im(n){return n|1}function nF(n,e,t,r,i,o){let s=o?e.classBindings:e.styleBindings,a=Qi(s),u=vs(s);n[r]=t;let l=!1,h;if(Array.isArray(t)){let p=t;h=p[1],(h===null||pu(p,h)>0)&&(l=!0)}else h=t;if(i)if(u!==0){let m=Qi(n[a+1]);n[r+1]=ql(m,a),m!==0&&(n[m+1]=Eg(n[m+1],r)),n[a+1]=eF(n[a+1],r)}else n[r+1]=ql(a,0),a!==0&&(n[a+1]=Eg(n[a+1],r)),a=r;else n[r+1]=ql(u,0),a===0?a=r:n[u+1]=Eg(n[u+1],r),u=r;l&&(n[r+1]=rm(n[r+1])),eC(n,h,r,!0),eC(n,h,r,!1),rF(e,h,n,r,o),s=ql(a,u),o?e.classBindings=s:e.styleBindings=s}function rF(n,e,t,r,i){let o=i?n.residualClasses:n.residualStyles;o!=null&&typeof e=="string"&&pu(o,e)>=0&&(t[r+1]=im(t[r+1]))}function eC(n,e,t,r){let i=n[t+1],o=e===null,s=r?Qi(i):vs(i),a=!1;for(;s!==0&&(a===!1||o);){let u=n[s],l=n[s+1];iF(u,e)&&(a=!0,n[s+1]=r?im(l):rm(l)),s=r?Qi(l):vs(l)}a&&(n[t+1]=r?rm(i):im(i))}function iF(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?pu(n,e)>=0:!1}function Ft(n,e,t){let r=Ne(),i=Nd();if(ei(r,i,e)){let o=Gt(),s=Pd();Um(o,s,r,n,e,r[rt],t,!1)}return Ft}function tC(n,e,t,r,i){let o=e.inputs,s=i?"class":"style";$m(n,t,o[s],s,r)}function Hd(n,e){return oF(n,e,null,!0),Hd}function oF(n,e,t,r){let i=Ne(),o=Gt(),s=Em(2);if(o.firstUpdatePass&&aF(o,n,s,r),e!==kn&&ei(i,s,e)){let a=o.data[ni()];hF(o,a,i,i[rt],n,i[s+1]=fF(e,t),r,s)}}function sF(n,e){return e>=n.expandoStartIndex}function aF(n,e,t,r){let i=n.data;if(i[t+1]===null){let o=i[ni()],s=sF(n,t);pF(o,r)&&e===null&&!s&&(e=!1),e=uF(i,o,e,r),nF(i,o,e,t,s,r)}}function uF(n,e,t,r){let i=JP(n),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(t=Ig(null,n,e,t,r),t=hu(t,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==i)if(t=Ig(i,n,e,t,r),o===null){let u=cF(n,e,r);u!==void 0&&Array.isArray(u)&&(u=Ig(null,n,e,u[1],r),u=hu(u,e.attrs,r),lF(n,e,r,u))}else o=dF(n,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),t}function cF(n,e,t){let r=t?e.classBindings:e.styleBindings;if(vs(r)!==0)return n[Qi(r)]}function lF(n,e,t,r){let i=t?e.classBindings:e.styleBindings;n[Qi(i)]=r}function dF(n,e,t){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=n[o].hostAttrs;r=hu(r,s,t)}return hu(r,e.attrs,t)}function Ig(n,e,t,r,i){let o=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(o=e[a],r=hu(r,o.hostAttrs,i),o!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function hu(n,e,t){let r=t?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),tP(n,s,t?!0:e[++o]))}return n===void 0?null:n}function hF(n,e,t,r,i,o,s,a){if(!(e.type&3))return;let u=n.data,l=u[a+1],h=tF(l)?nC(u,e,t,i,vs(l),s):void 0;if(!Ed(h)){Ed(o)||XO(l)&&(o=nC(u,null,t,i,a,s));let p=$C(ni(),t);ck(r,s,p,i,o)}}function nC(n,e,t,r,i,o){let s=e===null,a;for(;i>0;){let u=n[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=t[i+1];m===kn&&(m=p?vn:void 0);let y=p?hg(m,r):h===r?m:void 0;if(l&&!Ed(y)&&(y=hg(u,r)),Ed(y)&&(a=y,s))return a;let b=n[i+1];i=s?Qi(b):vs(b)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(a=hg(u,r))}return a}function Ed(n){return n!==void 0}function fF(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=qt(yu(n)))),n}function pF(n,e){return(n.flags&(e?8:16))!==0}function gF(n,e,t,r,i,o){let s=e.consts,a=sd(s,i),u=jd(e,n,2,r,a);return Q0(e,t,u,sd(s,o)),u.attrs!==null&&Jg(u,u.attrs,!1),u.mergedAttrs!==null&&Jg(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function U(n,e,t,r){let i=Ne(),o=Gt(),s=Zr+n,a=i[rt],u=o.firstCreatePass?gF(s,o,i,e,t,r):o.data[s],l=mF(o,i,u,a,e,n);i[s]=l;let h=_m(u);return gu(u,!0),j0(a,l,u),!HO(u)&&Cm()&&Lm(o,i,l,u),BP()===0&&Wi(l,i),UP(),h&&(G0(o,i,u),z0(o,u,i)),r!==null&&W0(i,u),U}function $(){let n=kt();YC()?WP():(n=n.parent,gu(n,!1));let e=n;qP(e)&&zP(),$P();let t=Gt();return t.firstCreatePass&&(Tm(t,n),VC(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&o1(e)&&tC(t,e,Ne(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&s1(e)&&tC(t,e,Ne(),e.stylesWithoutHost,!1),$}function ve(n,e,t,r){return U(n,e,t,r),$(),ve}var mF=(n,e,t,r,i,o)=>(bm(!0),R0(r,i,t1()));function Yt(){return Ne()}var Id="en-US";var yF=Id;function vF(n){typeof n=="string"&&(yF=n.toLowerCase().replace(/_/g,"-"))}var _F=(n,e,t)=>{};function Oe(n,e,t,r){let i=Ne(),o=Gt(),s=kt();return gb(o,i,i[rt],s,n,e,r),Oe}function wF(n,e,t,r){let i=n.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===t&&i[o+1]===r){let a=e[nd],u=i[o+2];return a.length>u?a[u]:null}typeof s=="string"&&(o+=2)}return null}function gb(n,e,t,r,i,o,s){let a=_m(r),l=n.firstCreatePass&&Fk(n),h=e[Nn],p=Ok(e),m=!0;if(r.type&3||s){let A=En(r,e),M=s?s(A):A,L=p.length,G=s?Z=>s(Qn(Z[r.index])):r.index,V=null;if(!s&&a&&(V=wF(n,e,i,r.index)),V!==null){let Z=V.__ngLastListenerFn__||V;Z.__ngNextListenerFn__=o,V.__ngLastListenerFn__=o,m=!1}else{o=iC(r,e,h,o),_F(A,i,o);let Z=t.listen(M,i,o);p.push(o,Z),l&&l.push(i,G,L,L+1)}}else o=iC(r,e,h,o);let y=r.outputs,b;if(m&&y!==null&&(b=y[i])){let A=b.length;if(A)for(let M=0;M<A;M+=2){let L=b[M],G=b[M+1],re=e[L][G].subscribe(o),X=p.length;p.push(o,re),l&&l.push(i,r.index,X,-(X+1))}}}function rC(n,e,t,r){let i=De(null);try{return qn(6,e,t),t(r)!==!1}catch(o){return eb(n,o),!1}finally{qn(7,e,t),De(i)}}function iC(n,e,t,r){return function i(o){if(o===Function)return r;let s=n.componentOffset>-1?ti(n.index,e):e;zm(s,5);let a=rC(e,t,r,o),u=i.__ngNextListenerFn__;for(;u;)a=rC(e,t,u,o)&&a,u=u.__ngNextListenerFn__;return a}}function Zt(n=1){return e1(n)}function Vt(n,e,t){return mb(n,"",e,"",t),Vt}function mb(n,e,t,r,i){let o=Ne(),s=pb(o,e,t,r);if(s!==kn){let a=Gt(),u=Pd();Um(a,u,o,n,s,o[rt],i,!1)}return mb}function me(n,e=""){let t=Ne(),r=Gt(),i=n+Zr,o=r.firstCreatePass?jd(r,i,1,e,null):r.data[i],s=EF(r,t,o,e,n);t[i]=s,Cm()&&Lm(r,t,s,o),gu(o,!1)}var EF=(n,e,t,r,i)=>(bm(!0),G1(e[rt],r));function Ji(n){return yb("",n,""),Ji}function yb(n,e,t){let r=Ne(),i=pb(r,n,e,t);return i!==kn&&Hm(r,ni(),i),yb}function Xi(n,e,t,r,i){let o=Ne(),s=ZO(o,n,e,t,r,i);return s!==kn&&Hm(o,ni(),s),Xi}function Ym(n,e,t,r,i,o,s){let a=Ne(),u=JO(a,n,e,t,r,i,o,s);return u!==kn&&Hm(a,ni(),u),Ym}function Se(n,e,t){lb(e)&&(e=e());let r=Ne(),i=Nd();if(ei(r,i,e)){let o=Gt(),s=Pd();Um(o,s,r,n,e,r[rt],t,!1)}return Se}function Me(n,e){let t=lb(n);return t&&n.set(e),t}function Ae(n,e){let t=Ne(),r=Gt(),i=kt();return gb(r,t,t[rt],i,n,e),Ae}function IF(n,e,t){let r=Gt();if(r.firstCreatePass){let i=Jr(n);om(t,r.data,r.blueprint,i,!0),om(e,r.data,r.blueprint,i,!1)}}function om(n,e,t,r,i){if(n=Nt(n),Array.isArray(n))for(let o=0;o<n.length;o++)om(n[o],e,t,r,i);else{let o=Gt(),s=Ne(),a=kt(),u=cs(n)?n:Nt(n.provide),l=PC(n),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(cs(n)||!n.multi){let y=new Gi(l,i,se),b=Cg(u,e,i?h:h+m,p);b===-1?(Lg(cd(a,s),o,u),Dg(o,n,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(y),s.push(y)):(t[b]=y,s[b]=y)}else{let y=Cg(u,e,h+m,p),b=Cg(u,e,h,h+m),A=y>=0&&t[y],M=b>=0&&t[b];if(i&&!M||!i&&!A){Lg(cd(a,s),o,u);let L=bF(i?CF:DF,t.length,i,r,l);!i&&M&&(t[b].providerFactory=L),Dg(o,n,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),t.push(L),s.push(L)}else{let L=vb(t[i?b:y],l,!i&&r);Dg(o,n,y>-1?y:b,L)}!i&&r&&M&&t[b].componentProviders++}}}function Dg(n,e,t,r){let i=cs(e),o=IP(e);if(i||o){let u=(o?Nt(e.useClass):e).prototype.ngOnDestroy;if(u){let l=n.destroyHooks||(n.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(t);h===-1?l.push(t,[r,u]):l[h+1].push(r,u)}else l.push(t,u)}}}function vb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Cg(n,e,t,r){for(let i=t;i<r;i++)if(e[i]===n)return i;return-1}function DF(n,e,t,r){return sm(this.multi,[])}function CF(n,e,t,r){let i=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=fs(t,t[ye],this.providerFactory.index,r);o=a.slice(0,s),sm(i,o);for(let u=s;u<a.length;u++)o.push(a[u])}else o=[],sm(i,o);return o}function sm(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function bF(n,e,t,r,i){let o=new Gi(n,t,se);return o.multi=[],o.index=e,o.componentProviders=0,vb(o,i,r&&!t),o}function qd(n,e=[]){return t=>{t.providersResolver=(r,i)=>IF(r,i?i(n):n,e)}}var TF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=xC(!1,t.type),i=r.length>0?Ud([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,i)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=z({token:n,providedIn:"environment",factory:()=>new n(F(cn))})}}return n})();function _b(n){_u("NgStandalone"),n.getStandaloneInjector=e=>e.get(TF).getOrCreateStandaloneInjector(n)}var zl=null;function SF(n){zl!==null&&(n.defaultEncapsulation!==zl.defaultEncapsulation||n.preserveWhitespaces!==zl.preserveWhitespaces)||(zl=n)}var wr=class{constructor(e){this.full=e;let t=e.split(".");this.major=t[0],this.minor=t[1],this.patch=t.slice(2).join(".")}},wb=new wr("18.2.13");var zd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var Zm=new W(""),Eu=new W(""),Gd=(()=>{class n{constructor(t,r,i){this._ngZone=t,this.registry=r,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Jm||(AF(i),i.addToWindow(r)),this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb()}});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>r.updateCb&&r.updateCb(t)?(clearTimeout(r.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,r,i){let o=-1;r&&r>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),t()},r)),this._callbacks.push({doneCb:t,timeoutId:o,updateCb:i})}whenStable(t,r,i){if(i&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,r,i),this._runCallbacksIfReady()}registerApplication(t){this.registry.registerApplication(t,this)}unregisterApplication(t){this.registry.unregisterApplication(t)}findProviders(t,r,i){return[]}static{this.\u0275fac=function(r){return new(r||n)(F(we),F(Wd),F(Eu))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Wd=(()=>{class n{constructor(){this._applications=new Map}registerApplication(t,r){this._applications.set(t,r)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,r=!0){return Jm?.findTestabilityInTree(this,t,r)??null}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();function AF(n){Jm=n}var Jm;function eo(n){return!!n&&typeof n.then=="function"}function Eb(n){return!!n&&typeof n.subscribe=="function"}var Kd=new W(""),Ib=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=B(Kd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let i of this.appInits){let o=i();if(eo(o))t.push(o);else if(Eb(o)){let s=new Promise((a,u)=>{o.subscribe({complete:a,error:u})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(i=>{this.reject(i)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Xm=new W("");function MF(){ZI(()=>{throw new J(600,!1)})}function xF(n){return n.isBoundToModule}var RF=10;function NF(n,e,t){try{let r=t();return eo(r)?r.catch(i=>{throw e.runOutsideAngular(()=>n.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}function Db(n,e){return Array.isArray(e)?e.reduce(Db,n):P(P({},n),e)}var oi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=B(S1),this.afterRenderManager=B(fb),this.zonelessEnabled=B(Wm),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new $e,this.afterTick=new $e,this.componentTypes=[],this.components=[],this.isStable=B(Is).hasPendingTasks.pipe(Q(t=>!t)),this._injector=B(cn)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let i=t instanceof md;if(!this._injector.get(Ib).done){let m=!i&&TC(t),y=!1;throw new J(405,y)}let s;i?s=t:s=this._injector.get(gs).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=xF(s)?void 0:this._injector.get(Xr),u=r||s.selector,l=s.create(ln.NULL,[],u,a),h=l.location.nativeElement,p=l.injector.get(Zm,null);return p?.registerApplication(h),l.onDestroy(()=>{this.detachView(l.hostView),Yl(this.components,l),p?.unregisterApplication(h)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new J(101,!1);let t=De(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,De(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ms,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<RF;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:i,notifyErrorHandler:o}of this._views)PF(i,o,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>xd(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;Yl(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(Xm,[]);[...this._bootstrapListeners,...r].forEach(i=>i(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>Yl(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new J(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Yl(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function PF(n,e,t,r){if(!t&&!xd(n))return;rb(n,e,t&&!r?0:1)}var am=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},Qd=(()=>{class n{compileModuleSync(t){return new wd(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),i=SC(t),o=x0(i.declarations).reduce((s,a)=>{let u=Yr(a);return u&&s.push(new ys(u)),s},[]);return new am(r,o)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),kF=new W("");function OF(n,e,t){let r=new wd(t);return Promise.resolve(r)}function oC(n){for(let e=n.length-1;e>=0;e--)if(n[e]!==void 0)return n[e]}var FF=(()=>{class n{constructor(){this.zone=B(we),this.changeDetectionScheduler=B(ps),this.applicationRef=B(oi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function VF({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new we(fe(P({},Cb()),{scheduleInRootZone:t})),[{provide:we,useFactory:n},{provide:us,multi:!0,useFactory:()=>{let r=B(FF,{optional:!0});return()=>r.initialize()}},{provide:us,multi:!0,useFactory:()=>{let r=B(LF);return()=>{r.initialize()}}},e===!0?{provide:ab,useValue:!0}:[],{provide:ub,useValue:t??y0}]}function Cb(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var LF=(()=>{class n{constructor(){this.subscription=new Ke,this.initialized=!1,this.zone=B(we),this.pendingTasks=B(Is)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{we.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{we.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var jF=(()=>{class n{constructor(){this.appRef=B(oi),this.taskService=B(Is),this.ngZone=B(we),this.zonelessEnabled=B(Wm),this.disableScheduling=B(ab,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new Ke,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(dd):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(B(ub,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof hd||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?BD:v0;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(dd+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,BD(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BF(){return typeof $localize<"u"&&$localize.locale||Id}var ey=new W("",{providedIn:"root",factory:()=>B(ey,he.Optional|he.SkipSelf)||BF()});var Dd=new W("");function Gl(n){return!n.moduleRef}function UF(n){let e=Gl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(we);return t.run(()=>{Gl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(vr,null),i;if(t.runOutsideAngular(()=>{i=t.onError.subscribe({next:o=>{r.handleError(o)}})}),Gl(n)){let o=()=>e.destroy(),s=n.platformInjector.get(Dd);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>n.moduleRef.destroy(),s=n.platformInjector.get(Dd);s.add(o),n.moduleRef.onDestroy(()=>{Yl(n.allPlatformModules,n.moduleRef),i.unsubscribe(),s.delete(o)})}return NF(r,t,()=>{let o=e.get(Ib);return o.runInitializers(),o.donePromise.then(()=>{let s=e.get(ey,Id);if(vF(s||Id),Gl(n)){let a=e.get(oi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return $F(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function $F(n,e){let t=n.injector.get(oi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new J(-403,!1);e.push(n)}var bb=(()=>{class n{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,r){let i=r?.scheduleInRootZone,o=()=>T1(r?.ngZone,fe(P({},Cb({eventCoalescing:r?.ngZoneEventCoalescing,runCoalescing:r?.ngZoneRunCoalescing})),{scheduleInRootZone:i})),s=r?.ignoreChangesOutsideZone,a=[VF({ngZoneFactory:o,ignoreChangesOutsideZone:s}),{provide:ps,useExisting:jF}],u=jO(t.moduleType,this.injector,a);return UF({moduleRef:u,allPlatformModules:this._modules,platformInjector:this.injector})}bootstrapModule(t,r=[]){let i=Db({},r);return OF(this.injector,i,t).then(o=>this.bootstrapModuleFactory(o,i))}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new J(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r());let t=this._injector.get(Dd,null);t&&(t.forEach(r=>r()),t.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(r){return new(r||n)(F(ln))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})(),su=null,Tb=new W("");function HF(n){if(su&&!su.get(Tb,!1))throw new J(400,!1);MF(),su=n;let e=n.get(bb);return GF(n),e}function ty(n,e,t=[]){let r=`Platform: ${e}`,i=new W(r);return(o=[])=>{let s=Sb();if(!s||s.injector.get(Tb,!1)){let a=[...t,...o,{provide:i,useValue:!0}];n?n(a):HF(qF(a,r))}return zF(i)}}function qF(n=[],e){return ln.create({name:e,providers:[{provide:Sd,useValue:"platform"},{provide:Dd,useValue:new Set([()=>su=null])},...n]})}function zF(n){let e=Sb();if(!e)throw new J(401,!1);return e}function Sb(){return su?.get(bb)??null}function GF(n){n.get(Nm,null)?.forEach(t=>t())}function ny(){return!1}var to=(()=>{class n{static{this.__NG_ELEMENT_ID__=WF}}return n})();function WF(n){return KF(kt(),Ne(),(n&16)===16)}function KF(n,e,t){if(Md(n)&&!t){let r=ti(n.index,e);return new Ki(r,r)}else if(n.type&175){let r=e[Kn];return new Ki(r,e)}return null}var um=class{constructor(){}supports(e){return db(e)}create(e){return new cm(e)}},QF=(n,e)=>e,cm=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||QF}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,i=0,o=null;for(;t||r;){let s=!r||t&&t.currentIndex<sC(r,i,o)?t:r,a=sC(s,i,o),u=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)i++;else{o||(o=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let y=m<o.length?o[m]:o[m]=0,b=y+m;h<=b&&b<l&&(o[m]=y+1)}let p=s.previousIndex;o[p]=h-l}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!db(e))throw new J(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,i,o,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)o=e[a],s=this._trackByFn(a,o),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,o,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,o,s,a)),Object.is(t.item,o)||this._addIdentityChange(t,o)),t=t._next}else i=0,BO(e,a=>{s=this._trackByFn(i,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,i),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,i)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,i++}),this.length=i;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,i){let o;return e===null?o=this._itTail:(o=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,o,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,o,i)):e=this._addAfter(new lm(t,r),o,i)),e}_verifyReinsertion(e,t,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?e=this._reinsertAfter(o,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,o=e._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let i=t===null?this._itHead:t._next;return e._next=i,e._prev=t,i===null?this._itTail=e:i._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Cd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Cd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},lm=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},dm=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Cd=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new dm,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,i=this.map.get(r);return i?i.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function sC(n,e,t){let r=n.previousIndex;if(r===null)return r;let i=0;return t&&r<t.length&&(i=t[r]),r+e+i}function aC(){return new ry([new um])}var ry=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:aC})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let i=r.factories.slice();t=t.concat(i)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||aC()),deps:[[n,new pm,new ws]]}}find(t){let r=this.factories.find(i=>i.supports(t));if(r!=null)return r;throw new J(901,!1)}}return n})();var Ab=ty(null,"core",[]),Mb=(()=>{class n{constructor(t){}static{this.\u0275fac=function(r){return new(r||n)(F(oi))}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})();function no(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function Iu(n,e){_u("NgSignals");let t=KI(n);return e?.equal&&(t[fr].equal=e.equal),t}function Dr(n){let e=De(null);try{return n()}finally{De(e)}}function xb(n){let e=Yr(n);if(!e)return null;let t=new ys(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var kb=null;function Zn(){return kb}function Ob(n){kb??=n}var Yd=class{};var Jt=new W(""),ay=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>B(YF),providedIn:"platform"})}}return n})(),Fb=new W(""),YF=(()=>{class n extends ay{constructor(){super(),this._doc=B(Jt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zn().getBaseHref(this._doc)}onPopState(t){let r=Zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=Zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){this._history.pushState(t,r,i)}replaceState(t,r,i){this._history.replaceState(t,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function uy(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function Rb(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function Cr(n){return n&&n[0]!=="?"?"?"+n:n}var br=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>B(cy),providedIn:"root"})}}return n})(),Vb=new W(""),cy=(()=>{class n extends br{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??B(Jt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return uy(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+Cr(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Cr(o));this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Cr(o));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(ay),F(Vb,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Lb=(()=>{class n extends br{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=uy(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,o){let s=this.prepareExternalUrl(i+Cr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,i,o){let s=this.prepareExternalUrl(i+Cr(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(F(ay),F(Vb,8))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Ds=(()=>{class n{constructor(t){this._subject=new nt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=XF(Rb(Nb(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+Cr(r))}normalize(t){return n.stripTrailingSlash(JF(this._basePath,Nb(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Cr(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Cr(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}static{this.normalizeQueryParams=Cr}static{this.joinWithSlash=uy}static{this.stripTrailingSlash=Rb}static{this.\u0275fac=function(r){return new(r||n)(F(br))}}static{this.\u0275prov=z({token:n,factory:()=>ZF(),providedIn:"root"})}}return n})();function ZF(){return new Ds(F(br))}function JF(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function Nb(n){return n.replace(/\/index.html$/,"")}function XF(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function jb(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[i,o]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var iy=class{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Xt=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new iy(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),Pb(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);Pb(o,i)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(se(vu),se(Gm),se(ry))}}static{this.\u0275dir=zt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function Pb(n,e){n.context.$implicit=e.item}var Bb=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})(),ly="browser",eV="server";function tV(n){return n===ly}function ro(n){return n===eV}var Ub=(()=>{class n{static{this.\u0275prov=z({token:n,providedIn:"root",factory:()=>tV(B(Qt))?new oy(B(Jt),window):new sy})}}return n})(),oy=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=nV(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(r-o[0],i-o[1])}};function nV(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let o=i.shadowRoot;if(o){let s=o.getElementById(e)||o.querySelector(`[name="${e}"]`);if(s)return s}i=r.nextNode()}}return null}var sy=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Zd=class{};var fy=class extends Yd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},py=class n extends fy{static makeCurrent(){Ob(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=iV();return t==null?null:oV(t)}resetBaseElement(){Du=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return jb(document.cookie,e)}},Du=null;function iV(){return Du=Du||document.querySelector("base"),Du?Du.getAttribute("href"):null}function oV(n){return new URL(n,document.baseURI).pathname}var gy=class{addToWindow(e){Rn.getAngularTestability=(r,i=!0)=>{let o=e.findTestabilityInTree(r,i);if(o==null)throw new J(5103,!1);return o},Rn.getAllAngularTestabilities=()=>e.getAllTestabilities(),Rn.getAllAngularRootElements=()=>e.getAllRootElements();let t=r=>{let i=Rn.getAllAngularTestabilities(),o=i.length,s=function(){o--,o==0&&r()};i.forEach(a=>{a.whenStable(s)})};Rn.frameworkStabilizers||(Rn.frameworkStabilizers=[]),Rn.frameworkStabilizers.push(t)}findTestabilityInTree(e,t,r){if(t==null)return null;let i=e.getTestability(t);return i??(r?Zn().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},sV=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),my=new W(""),zb=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(o=>o.supports(t)),!r)throw new J(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(F(my),F(we))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Jd=class{constructor(e){this._doc=e}},dy="ng-app-id",Gb=(()=>{class n{constructor(t,r,i,o={}){this.doc=t,this.appId=r,this.nonce=i,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=ro(o),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(i=>i.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${dy}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(i=>{i.textContent!=null&&r.set(i.textContent,i)}),r}return null}changeUsageCount(t,r){let i=this.styleRef;if(i.has(t)){let o=i.get(t);return o.usage+=r,o.usage}return i.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let i=this.styleNodesInDOM,o=i?.get(r);if(o?.parentNode===t)return i.delete(r),o.removeAttribute(dy),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(dy,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let i=this.getStyleElement(t,r),o=this.styleRef,s=o.get(r)?.elements;s?s.push(i):o.set(r,{elements:[i],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(F(Jt),F(Od),F(Pm,8),F(Qt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),hy={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},vy=/%COMP%/g,Wb="%COMP%",aV=`_nghost-${Wb}`,uV=`_ngcontent-${Wb}`,cV=!0,lV=new W("",{providedIn:"root",factory:()=>cV});function dV(n){return uV.replace(vy,n)}function hV(n){return aV.replace(vy,n)}function Kb(n,e){return e.map(t=>t.replace(vy,n))}var $b=(()=>{class n{constructor(t,r,i,o,s,a,u,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=u,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=ro(a),this.defaultRenderer=new Cu(t,s,u,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Gn.ShadowDom&&(r=fe(P({},r),{encapsulation:Gn.Emulated}));let i=this.getOrCreateRenderer(t,r);return i instanceof Xd?i.applyToHost(t):i instanceof bu&&i.applyStyles(),i}getOrCreateRenderer(t,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case Gn.Emulated:o=new Xd(u,l,r,this.appId,h,s,a,p);break;case Gn.ShadowDom:return new yy(u,l,t,r,s,a,this.nonce,p);default:o=new bu(u,l,r,h,s,a,p);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(F(zb),F(Gb),F(Od),F(lV),F(Jt),F(Qt),F(we),F(Pm))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),Cu=class{constructor(e,t,r,i){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(hy[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(Hb(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Hb(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new J(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;let o=hy[i];o?e.setAttributeNS(o,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let i=hy[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(_r.DashCase|_r.Important)?e.style.setProperty(t,r,i&_r.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&_r.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=Zn().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function Hb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var yy=class extends Cu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,u),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Kb(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},bu=class extends Cu{constructor(e,t,r,i,o,s,a,u){super(e,o,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=i,this.styles=u?Kb(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Xd=class extends bu{constructor(e,t,r,i,o,s,a,u){let l=i+"-"+r.id;super(e,t,r,o,s,a,u,l),this.contentAttr=dV(l),this.hostAttr=hV(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},fV=(()=>{class n extends Jd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}static{this.\u0275fac=function(r){return new(r||n)(F(Jt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})(),qb=["alt","control","meta","shift"],pV={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},gV={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},mV=(()=>{class n extends Jd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,i){let o=n.parseEventName(r),s=n.eventCallback(o.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zn().onAndCancel(t,o.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),qb.forEach(l=>{let h=r.indexOf(l);h>-1&&(r.splice(h,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(t,r){let i=pV[t.key]||t.key,o="";return r.indexOf("code.")>-1&&(i=t.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),qb.forEach(s=>{if(s!==i){let a=gV[s];a(t)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(t,r,i){return o=>{n.matchEventFullKeyCode(o,t)&&i.runGuarded(()=>r(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(F(Jt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function yV(){py.makeCurrent()}function vV(){return new vr}function _V(){return b0(document),document}var wV=[{provide:Qt,useValue:ly},{provide:Nm,useValue:yV,multi:!0},{provide:Jt,useFactory:_V,deps:[]}],Qb=ty(Ab,"browser",wV),EV=new W(""),IV=[{provide:Eu,useClass:gy,deps:[]},{provide:Zm,useClass:Gd,deps:[we,Wd,Eu]},{provide:Gd,useClass:Gd,deps:[we,Wd,Eu]}],DV=[{provide:Sd,useValue:"root"},{provide:vr,useFactory:vV,deps:[]},{provide:my,useClass:fV,multi:!0,deps:[Jt,we,Qt]},{provide:my,useClass:mV,multi:!0,deps:[Jt]},$b,Gb,zb,{provide:ms,useExisting:$b},{provide:Zd,useClass:sV,deps:[]},[]],Yb=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:Od,useValue:t.appId}]}}static{this.\u0275fac=function(r){return new(r||n)(F(EV,12))}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({providers:[...DV,...IV],imports:[Bb,Mb]})}}return n})();var Zb=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(F(Jt))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var sT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(se(Zi),se(ri))}}static{this.\u0275dir=zt({type:n})}}return n})(),CV=(()=>{class n extends sT{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mu(n)))(i||n)}})()}static{this.\u0275dir=zt({type:n,features:[ii]})}}return n})(),aT=new W("");var bV={provide:aT,useExisting:_s(()=>bt),multi:!0};function TV(){let n=Zn()?Zn().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var SV=new W(""),bt=(()=>{class n extends sT{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!TV())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(se(Zi),se(ri),se(SV,8))}}static{this.\u0275dir=zt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Oe("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[qd([bV]),ii]})}}return n})();var uT=new W(""),cT=new W("");function lT(n){return n!=null}function dT(n){return eo(n)?Ce(n):n}function hT(n){let e={};return n.forEach(t=>{e=t!=null?P(P({},e),t):e}),Object.keys(e).length===0?null:e}function fT(n,e){return e.map(t=>t(n))}function AV(n){return!n.validate}function pT(n){return n.map(e=>AV(e)?e:t=>e.validate(t))}function MV(n){if(!n)return null;let e=n.filter(lT);return e.length==0?null:function(t){return hT(fT(t,e))}}function wy(n){return n!=null?MV(pT(n)):null}function xV(n){if(!n)return null;let e=n.filter(lT);return e.length==0?null:function(t){let r=fT(t,e).map(dT);return og(r).pipe(Q(hT))}}function Ey(n){return n!=null?xV(pT(n)):null}function Xb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function RV(n){return n._rawValidators}function NV(n){return n._rawAsyncValidators}function _y(n){return n?Array.isArray(n)?n:[n]:[]}function th(n,e){return Array.isArray(n)?n.includes(e):n===e}function eT(n,e){let t=_y(e);return _y(n).forEach(i=>{th(t,i)||t.push(i)}),t}function tT(n,e){return _y(e).filter(t=>!th(n,t))}var nh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wy(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ey(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ts=class extends nh{get formDirective(){return null}get path(){return null}},Ru=class extends nh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},rh=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},PV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},p8=fe(P({},PV),{"[class.ng-submitted]":"isSubmitted"}),en=(()=>{class n extends rh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(se(Ru,2))}}static{this.\u0275dir=zt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&Hd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[ii]})}}return n})(),tn=(()=>{class n extends rh{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(se(Ts,10))}}static{this.\u0275dir=zt({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&Hd("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[ii]})}}return n})();var Tu="VALID",eh="INVALID",Cs="PENDING",Su="DISABLED",Ss=class{},ih=class extends Ss{constructor(e,t){super(),this.value=e,this.source=t}},Mu=class extends Ss{constructor(e,t){super(),this.pristine=e,this.source=t}},xu=class extends Ss{constructor(e,t){super(),this.touched=e,this.source=t}},bs=class extends Ss{constructor(e,t){super(),this.status=e,this.source=t}};function gT(n){return(ah(n)?n.validators:n)||null}function kV(n){return Array.isArray(n)?wy(n):n||null}function mT(n,e){return(ah(e)?e.asyncValidators:n)||null}function OV(n){return Array.isArray(n)?Ey(n):n||null}function ah(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function FV(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new J(1e3,"");if(!r[t])throw new J(1001,"")}function VV(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new J(1002,"")})}var oh=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Iu(()=>this.statusReactive()),this.statusReactive=wu(void 0),this._pristine=Iu(()=>this.pristineReactive()),this.pristineReactive=wu(!0),this._touched=Iu(()=>this.touchedReactive()),this.touchedReactive=wu(!1),this._events=new $e,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Dr(this.statusReactive)}set status(e){Dr(()=>this.statusReactive.set(e))}get valid(){return this.status===Tu}get invalid(){return this.status===eh}get pending(){return this.status==Cs}get disabled(){return this.status===Su}get enabled(){return this.status!==Su}get pristine(){return Dr(this.pristineReactive)}set pristine(e){Dr(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Dr(this.touchedReactive)}set touched(e){Dr(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(eT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(eT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(tT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(tT(e,this._rawAsyncValidators))}hasValidator(e){return th(this._rawValidators,e)}hasAsyncValidator(e){return th(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(fe(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new xu(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new xu(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(fe(P({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new Mu(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new Mu(!0,r))}markAsPending(e={}){this.status=Cs;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new bs(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(fe(P({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Su,this.errors=null,this._forEachChild(i=>{i.disable(fe(P({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ih(this.value,r)),this._events.next(new bs(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(fe(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Tu,this._forEachChild(r=>{r.enable(fe(P({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(fe(P({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Tu||this.status===Cs)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ih(this.value,t)),this._events.next(new bs(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(fe(P({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Su:Tu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Cs,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=dT(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new bs(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new nt,this.statusChanges=new nt}_calculateStatus(){return this._allControlsDisabled()?Su:this.errors?eh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cs)?Cs:this._anyControlsHaveStatus(eh)?eh:Tu}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new Mu(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new xu(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ah(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=kV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=OV(this._rawAsyncValidators)}},sh=class extends oh{constructor(e,t,r){super(gT(t),mT(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){VV(this,!0,e),Object.keys(e).forEach(r=>{FV(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Iy=new W("CallSetDisabledState",{providedIn:"root",factory:()=>Dy}),Dy="always";function LV(n,e){return[...e.path,n]}function yT(n,e,t=Dy){vT(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),BV(n,e),$V(n,e),UV(n,e),jV(n,e)}function nT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function jV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function vT(n,e){let t=RV(n);e.validator!==null?n.setValidators(Xb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=NV(n);e.asyncValidator!==null?n.setAsyncValidators(Xb(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();nT(e._rawValidators,i),nT(e._rawAsyncValidators,i)}function BV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&_T(n,e)})}function UV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&_T(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function _T(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function $V(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function HV(n,e){n==null,vT(n,e)}function qV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function zV(n){return Object.getPrototypeOf(n.constructor)===CV}function GV(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function WV(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===bt?t=o:zV(o)?r=o:i=o}),i||r||t||null}var KV={provide:Ts,useExisting:_s(()=>Lt)},Au=Promise.resolve(),Lt=(()=>{class n extends Ts{get submitted(){return Dr(this.submittedReactive)}constructor(t,r,i){super(),this.callSetDisabledState=i,this._submitted=Iu(()=>this.submittedReactive()),this.submittedReactive=wu(!1),this._directives=new Set,this.ngSubmit=new nt,this.form=new sh({},wy(t),Ey(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Au.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),yT(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Au.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Au.then(()=>{let r=this._findContainer(t.path),i=new sh({});HV(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Au.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){Au.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),GV(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(r){return new(r||n)(se(uT,10),se(cT,10),se(Iy,8))}}static{this.\u0275dir=zt({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Oe("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[qd([KV]),ii]})}}return n})();function rT(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function iT(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var QV=class extends oh{constructor(e=null,t,r){super(gT(t),mT(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ah(t)&&(t.nonNullable||t.initialValueIsDefault)&&(iT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){rT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){rT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){iT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var YV={provide:Ru,useExisting:_s(()=>jt)},oT=Promise.resolve(),jt=(()=>{class n extends Ru{constructor(t,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new QV,this._registered=!1,this.name="",this.update=new nt,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=WV(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),qV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){yT(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){oT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,i=r!==0&&no(r);oT.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?LV(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(se(Ts,9),se(uT,10),se(cT,10),se(aT,10),se(to,8),se(Iy,8))}}static{this.\u0275dir=zt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[qd([YV]),ii,Yi]})}}return n})(),nn=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=zt({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return n})();var ZV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})();var wT=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Iy,useValue:t.callSetDisabledState??Dy}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({imports:[ZV]})}}return n})();var ce="primary",zu=Symbol("RouteTitle"),Ay=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ps(n){return new Ay(n)}function JV(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=n[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function XV(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Jn(n[t],e[t]))return!1;return!0}function Jn(n,e){let t=n?My(n):void 0,r=e?My(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!RT(n[i],e[i]))return!1;return!0}function My(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function RT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function NT(n){return n.length>0?n[n.length-1]:null}function ci(n){return ig(n)?n:eo(n)?Ce(Promise.resolve(n)):te(n)}var eL={exact:kT,subset:OT},PT={exact:tL,subset:nL,ignored:()=>!0};function ET(n,e,t){return eL[t.paths](n.root,e.root,t.matrixParams)&&PT[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function tL(n,e){return Jn(n,e)}function kT(n,e,t){if(!so(n.segments,e.segments)||!lh(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!kT(n.children[r],e.children[r],t))return!1;return!0}function nL(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>RT(n[t],e[t]))}function OT(n,e,t){return FT(n,e,e.segments,t)}function FT(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!so(i,t)||e.hasChildren()||!lh(i,t,r))}else if(n.segments.length===t.length){if(!so(n.segments,t)||!lh(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!OT(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!so(n.segments,i)||!lh(n.segments,i,r)||!n.children[ce]?!1:FT(n.children[ce],e,o,r)}}function lh(n,e,t){return e.every((r,i)=>PT[t](n[i].parameters,r.parameters))}var Sr=class{constructor(e=new xe([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){return oL.serialize(this)}},xe=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dh(this)}},oo=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ps(this.parameters),this._parameterMap}toString(){return LT(this)}};function rL(n,e){return so(n,e)&&n.every((t,r)=>Jn(t.parameters,e[r].parameters))}function so(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function iL(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===ce&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==ce&&(t=t.concat(e(i,r)))}),t}var Gu=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>new ks,providedIn:"root"})}}return n})(),ks=class{parse(e){let t=new Ry(e);return new Sr(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Nu(e.root,!0)}`,r=uL(e.queryParams),i=typeof e.fragment=="string"?`#${sL(e.fragment)}`:"";return`${t}${r}${i}`}},oL=new ks;function dh(n){return n.segments.map(e=>LT(e)).join("/")}function Nu(n,e){if(!n.hasChildren())return dh(n);if(e){let t=n.children[ce]?Nu(n.children[ce],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==ce&&r.push(`${i}:${Nu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=iL(n,(r,i)=>i===ce?[Nu(n.children[ce],!1)]:[`${i}:${Nu(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[ce]!=null?`${dh(n)}/${t[0]}`:`${dh(n)}/(${t.join("//")})`}}function VT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uh(n){return VT(n).replace(/%3B/gi,";")}function sL(n){return encodeURI(n)}function xy(n){return VT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function hh(n){return decodeURIComponent(n)}function IT(n){return hh(n.replace(/\+/g,"%20"))}function LT(n){return`${xy(n.path)}${aL(n.parameters)}`}function aL(n){return Object.entries(n).map(([e,t])=>`;${xy(e)}=${xy(t)}`).join("")}function uL(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${uh(t)}=${uh(i)}`).join("&"):`${uh(t)}=${uh(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var cL=/^[^\/()?;#]+/;function Cy(n){let e=n.match(cL);return e?e[0]:""}var lL=/^[^\/()?;=#]+/;function dL(n){let e=n.match(lL);return e?e[0]:""}var hL=/^[^=?&#]+/;function fL(n){let e=n.match(hL);return e?e[0]:""}var pL=/^[^&#]+/;function gL(n){let e=n.match(pL);return e?e[0]:""}var Ry=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[ce]=new xe(e,t)),r}parseSegment(){let e=Cy(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new J(4009,!1);return this.capture(e),new oo(hh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=dL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Cy(this.remaining);i&&(r=i,this.capture(r))}e[hh(t)]=hh(r)}parseQueryParam(e){let t=fL(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=gL(this.remaining);s&&(r=s,this.capture(r))}let i=IT(t),o=IT(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Cy(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new J(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=ce);let s=this.parseChildren();t[o]=Object.keys(s).length===1?s[ce]:new xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new J(4011,!1)}};function jT(n){return n.segments.length>0?new xe([],{[ce]:n}):n}function BT(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=BT(i);if(r===ce&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new xe(n.segments,e);return mL(t)}function mL(n){if(n.numberOfChildren===1&&n.children[ce]){let e=n.children[ce];return new xe(n.segments.concat(e.segments),e.children)}return n}function ao(n){return n instanceof Sr}function yL(n,e,t=null,r=null){let i=UT(n);return $T(i,e,t,r)}function UT(n){let e;function t(o){let s={};for(let u of o.children){let l=t(u);s[u.outlet]=l}let a=new xe(o.url,s);return o===n&&(e=a),a}let r=t(n.root),i=jT(r);return e??i}function $T(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return by(i,i,i,t,r);let o=vL(e);if(o.toRoot())return by(i,i,new xe([],{}),t,r);let s=_L(o,i,n),a=s.processChildren?Ou(s.segmentGroup,s.index,o.commands):qT(s.segmentGroup,s.index,o.commands);return by(i,s.segmentGroup,a,t,r)}function fh(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Lu(n){return typeof n=="object"&&n!=null&&n.outlets}function by(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([u,l])=>{o[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let s;n===e?s=t:s=HT(n,e,t);let a=jT(BT(s));return new Sr(a,o,i)}function HT(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=HT(o,e,t)}),new xe(n.segments,r)}var ph=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&fh(r[0]))throw new J(4003,!1);let i=r.find(Lu);if(i&&i!==NT(r))throw new J(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function vL(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ph(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?t=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new ph(t,e,r)}var xs=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function _L(n,e,t){if(n.isAbsolute)return new xs(e,!0,0);if(!t)return new xs(e,!1,NaN);if(t.parent===null)return new xs(t,!0,0);let r=fh(n.commands[0])?0:1,i=t.segments.length-1+r;return wL(t,i,n.numberOfDoubleDots)}function wL(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new J(4005,!1);i=r.segments.length}return new xs(r,!1,i-o)}function EL(n){return Lu(n[0])?n[0].outlets:{[ce]:n}}function qT(n,e,t){if(n??=new xe([],{}),n.segments.length===0&&n.hasChildren())return Ou(n,e,t);let r=IL(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new xe(n.segments.slice(0,r.pathIndex),{});return o.children[ce]=new xe(n.segments.slice(r.pathIndex),n.children),Ou(o,0,i)}else return r.match&&i.length===0?new xe(n.segments,{}):r.match&&!n.hasChildren()?Ny(n,e,t):r.match?Ou(n,0,i):Ny(n,e,t)}function Ou(n,e,t){if(t.length===0)return new xe(n.segments,{});{let r=EL(t),i={};if(Object.keys(r).some(o=>o!==ce)&&n.children[ce]&&n.numberOfChildren===1&&n.children[ce].segments.length===0){let o=Ou(n.children[ce],e,t);return new xe(n.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=qT(n.children[o],e,s))}),Object.entries(n.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new xe(n.segments,i)}}function IL(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let s=n.segments[i],a=t[r];if(Lu(a))break;let u=`${a}`,l=r<t.length-1?t[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!CT(u,l,s))return o;r+=2}else{if(!CT(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Ny(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Lu(o)){let u=DL(o.outlets);return new xe(r,u)}if(i===0&&fh(t[0])){let u=n.segments[e];r.push(new oo(u.path,DT(t[0]))),i++;continue}let s=Lu(o)?o.outlets[ce]:`${o}`,a=i<t.length-1?t[i+1]:null;s&&a&&fh(a)?(r.push(new oo(s,DT(a))),i+=2):(r.push(new oo(s,{})),i++)}return new xe(r,{})}function DL(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Ny(new xe([],{}),0,r))}),e}function DT(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function CT(n,e,t){return n==t.path&&Jn(e,t.parameters)}var Fu="imperative",gt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(gt||{}),In=class{constructor(e,t){this.id=e,this.url=t}},Os=class extends In{constructor(e,t,r="imperative",i=null){super(e,t),this.type=gt.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Xn=class extends In{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=gt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},hn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(hn||{}),gh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(gh||{}),Tr=class extends In{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=gt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ai=class extends In{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=gt.NavigationSkipped}},ju=class extends In{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=gt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},mh=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Py=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ky=class extends In{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=gt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Oy=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Fy=class extends In{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=gt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vy=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Ly=class{constructor(e){this.route=e,this.type=gt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},jy=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},By=class{constructor(e){this.snapshot=e,this.type=gt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Uy=class{constructor(e){this.snapshot=e,this.type=gt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$y=class{constructor(e){this.snapshot=e,this.type=gt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},yh=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=gt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Bu=class{},Fs=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function CL(n,e){return n.providers&&!n._injector&&(n._injector=Ud(n.providers,e,`Route: ${n.path}`)),n._injector??e}function On(n){return n.outlet||ce}function bL(n,e){let t=n.filter(r=>On(r)===e);return t.push(...n.filter(r=>On(r)!==e)),t}function Wu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Hy=class{get injector(){return Wu(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ku(this.rootInjector),this.attachRef=null}},Ku=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Hy(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(F(cn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),vh=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=qy(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=qy(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=zy(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return zy(e,this._root).map(t=>t.value)}};function qy(n,e){if(n===e.value)return e;for(let t of e.children){let r=qy(n,t);if(r)return r}return null}function zy(n,e){if(n===e.value)return[e];for(let t of e.children){let r=zy(n,t);if(r.length)return r.unshift(e),r}return[]}var dn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ms(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var _h=class extends vh{constructor(e,t){super(e),this.snapshot=t,ev(this,e)}toString(){return this.snapshot.toString()}};function zT(n){let e=TL(n),t=new yt([new oo("",{})]),r=new yt({}),i=new yt({}),o=new yt({}),s=new yt(""),a=new uo(t,r,o,s,i,ce,n,e.root);return a.snapshot=e.root,new _h(new dn(a,[]),e)}function TL(n){let e={},t={},r={},i="",o=new Rs([],e,r,i,t,ce,n,null,{});return new Eh("",new dn(o,[]))}var uo=class{constructor(e,t,r,i,o,s,a,u){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(Q(l=>l[zu]))??te(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>Ps(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>Ps(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function wh(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:P(P({},e.params),n.params),data:P(P({},e.data),n.data),resolve:P(P(P(P({},n.data),e.data),i?.data),n._resolvedData)}:r={params:P({},n.params),data:P({},n.data),resolve:P(P({},n.data),n._resolvedData??{})},i&&WT(i)&&(r.resolve[zu]=i.title),r}var Rs=class{get title(){return this.data?.[zu]}constructor(e,t,r,i,o,s,a,u,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ps(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ps(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Eh=class extends vh{constructor(e,t){super(t),this.url=e,ev(this,t)}toString(){return GT(this._root)}};function ev(n,e){e.value._routerState=n,e.children.forEach(t=>ev(n,t))}function GT(n){let e=n.children.length>0?` { ${n.children.map(GT).join(", ")} } `:"";return`${n.value}${e}`}function Ty(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Jn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Jn(e.params,t.params)||n.paramsSubject.next(t.params),XV(e.url,t.url)||n.urlSubject.next(t.url),Jn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Gy(n,e){let t=Jn(n.params,e.params)&&rL(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||Gy(n.parent,e.parent))}function WT(n){return typeof n.title=="string"||n.title===null}var tv=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=ce,this.activateEvents=new nt,this.deactivateEvents=new nt,this.attachEvents=new nt,this.detachEvents=new nt,this.parentContexts=B(Ku),this.location=B(vu),this.changeDetector=B(to),this.inputBinder=B(Th,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new J(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new J(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new J(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new J(4013,!1);this._activatedRoute=t;let i=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,u=new Wy(t,a,i.injector);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=zt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Yi]})}}return n})(),Wy=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===uo?this.route:e===Ku?this.childContexts:this.parent.get(e,t)}},Th=new W(""),bT=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=tu([r.queryParams,r.params,r.data]).pipe(Qe(([o,s,a],u)=>(a=P(P(P({},o),s),a),u===0?te(a):Promise.resolve(a)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=xb(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function SL(n,e,t){let r=Uu(n,e._root,t?t._root:void 0);return new _h(r,e)}function Uu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=AL(n,e,t);return new dn(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Uu(n,a)),s}}let r=ML(e.value),i=e.children.map(o=>Uu(n,o));return new dn(r,i)}}function AL(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Uu(n,r,i);return Uu(n,r)})}function ML(n){return new uo(new yt(n.url),new yt(n.params),new yt(n.queryParams),new yt(n.fragment),new yt(n.data),n.outlet,n.component,n)}var $u=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},KT="ngNavigationCancelingError";function Ih(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ao(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=QT(!1,hn.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function QT(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[KT]=!0,t.cancellationCode=e,t}function xL(n){return YT(n)&&ao(n.url)}function YT(n){return!!n&&n[KT]}var RL=(n,e,t,r)=>Q(i=>(new Ky(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),Ky=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Ty(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=Ms(t);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ms(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=Ms(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=Ms(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new $y(o.value.snapshot))}),e.children.length&&this.forwardEvent(new By(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Ty(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Ty(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Dh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ns=class{constructor(e,t){this.component=e,this.route=t}};function NL(n,e,t){let r=n._root,i=e?e._root:null;return Pu(r,i,t,[r.value])}function PL(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Ls(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!dC(n)?n:e.get(n):r}function Pu(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Ms(e);return n.children.forEach(s=>{kL(s,o[s.value.outlet],t,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Vu(a,t.getContext(s),i)),i}function kL(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=OL(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Dh(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Pu(n,e,a?a.children:null,r,i):Pu(n,e,t,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ns(a.outlet.component,s))}else s&&Vu(e,a,i),i.canActivateChecks.push(new Dh(r)),o.component?Pu(n,null,a?a.children:null,r,i):Pu(n,null,t,r,i);return i}function OL(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!so(n.url,e.url);case"pathParamsOrQueryParamsChange":return!so(n.url,e.url)||!Jn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gy(n,e)||!Jn(n.queryParams,e.queryParams);case"paramsChange":default:return!Gy(n,e)}}function Vu(n,e,t){let r=Ms(n),i=n.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Vu(s,e.children.getContext(o),t):Vu(s,null,t):Vu(s,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ns(e.outlet.component,i)):t.canDeactivateChecks.push(new Ns(null,i)):t.canDeactivateChecks.push(new Ns(null,i))}function Qu(n){return typeof n=="function"}function FL(n){return typeof n=="boolean"}function VL(n){return n&&Qu(n.canLoad)}function LL(n){return n&&Qu(n.canActivate)}function jL(n){return n&&Qu(n.canActivateChild)}function BL(n){return n&&Qu(n.canDeactivate)}function UL(n){return n&&Qu(n.canMatch)}function ZT(n){return n instanceof gr||n?.name==="EmptyError"}var ch=Symbol("INITIAL_VALUE");function Vs(){return Qe(n=>tu(n.map(e=>e.pipe(mr(1),Ui(ch)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===ch)return ch;if(t===!1||$L(t))return t}return!0}),vt(e=>e!==ch),mr(1)))}function $L(n){return ao(n)||n instanceof $u}function HL(n,e){return tt(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=t;return s.length===0&&o.length===0?te(fe(P({},t),{guardsResult:!0})):qL(s,r,i,n).pipe(tt(a=>a&&FL(a)?zL(r,o,n,e):te(a)),Q(a=>fe(P({},t),{guardsResult:a})))})}function qL(n,e,t,r){return Ce(n).pipe(tt(i=>YL(i.component,i.route,t,e,r)),mn(i=>i!==!0,!0))}function zL(n,e,t,r){return Ce(e).pipe(ji(i=>Jo(WL(i.route.parent,r),GL(i.route,r),QL(n,i.path,t),KL(n,i.route,t))),mn(i=>i!==!0,!0))}function GL(n,e){return n!==null&&e&&e(new Uy(n)),te(!0)}function WL(n,e){return n!==null&&e&&e(new jy(n)),te(!0)}function KL(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return te(!0);let i=r.map(o=>Vl(()=>{let s=Wu(e)??t,a=Ls(o,s),u=LL(a)?a.canActivate(e,n):Yn(s,()=>a(e,n));return ci(u).pipe(mn())}));return te(i).pipe(Vs())}function QL(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>PL(s)).filter(s=>s!==null).map(s=>Vl(()=>{let a=s.guards.map(u=>{let l=Wu(s.node)??t,h=Ls(u,l),p=jL(h)?h.canActivateChild(r,n):Yn(l,()=>h(r,n));return ci(p).pipe(mn())});return te(a).pipe(Vs())}));return te(o).pipe(Vs())}function YL(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return te(!0);let s=o.map(a=>{let u=Wu(e)??i,l=Ls(a,u),h=BL(l)?l.canDeactivate(n,e,t,r):Yn(u,()=>l(n,e,t,r));return ci(h).pipe(mn())});return te(s).pipe(Vs())}function ZL(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return te(!0);let o=i.map(s=>{let a=Ls(s,n),u=VL(a)?a.canLoad(e,t):Yn(n,()=>a(e,t));return ci(u)});return te(o).pipe(Vs(),JT(r))}function JT(n){return Jp(ct(e=>{if(typeof e!="boolean")throw Ih(n,e)}),Q(e=>e===!0))}function JL(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return te(!0);let o=i.map(s=>{let a=Ls(s,n),u=UL(a)?a.canMatch(e,t):Yn(n,()=>a(e,t));return ci(u)});return te(o).pipe(Vs(),JT(r))}var Hu=class{constructor(e){this.segmentGroup=e||null}},qu=class extends Error{constructor(e){super(),this.urlTree=e}};function As(n){return Zo(new Hu(n))}function XL(n){return Zo(new J(4e3,!1))}function e2(n){return Zo(QT(!1,hn.GuardRejected))}var Qy=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return te(r);if(i.numberOfChildren>1||!i.children[ce])return XL(`${e.redirectTo}`);i=i.children[ce]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let a=t,{queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,params:y,data:b,title:A}=i,M=Yn(o,()=>a({params:y,data:b,queryParams:u,fragment:l,routeConfig:h,url:p,outlet:m,title:A}));if(M instanceof Sr)throw new qu(M);t=M}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new qu(s);return s}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new Sr(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=t[a]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),s={};return Object.entries(t.children).forEach(([a,u])=>{s[a]=this.createSegmentGroup(e,u,r,i)}),new xe(o,s)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new J(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Yy={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function t2(n,e,t,r,i){let o=XT(n,e,t);return o.matched?(r=CL(e,r),JL(r,e,t,i).pipe(Q(s=>s===!0?o:P({},Yy)))):te(o)}function XT(n,e,t){if(e.path==="**")return n2(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?P({},Yy):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||JV)(t,n,e);if(!i)return P({},Yy);let o={};Object.entries(i.posParams??{}).forEach(([a,u])=>{o[a]=u.path});let s=i.consumed.length>0?P(P({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function n2(n){return{matched:!0,parameters:n.length>0?NT(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function TT(n,e,t,r){return t.length>0&&o2(n,t,r)?{segmentGroup:new xe(e,i2(r,new xe(t,n.children))),slicedSegments:[]}:t.length===0&&s2(n,t,r)?{segmentGroup:new xe(n.segments,r2(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new xe(n.segments,n.children),slicedSegments:t}}function r2(n,e,t,r){let i={};for(let o of t)if(Sh(n,e,o)&&!r[On(o)]){let s=new xe([],{});i[On(o)]=s}return P(P({},r),i)}function i2(n,e){let t={};t[ce]=e;for(let r of n)if(r.path===""&&On(r)!==ce){let i=new xe([],{});t[On(r)]=i}return t}function o2(n,e,t){return t.some(r=>Sh(n,e,r)&&On(r)!==ce)}function s2(n,e,t){return t.some(r=>Sh(n,e,r))}function Sh(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function a2(n,e,t){return e.length===0&&!n.children[t]}var Zy=class{};function u2(n,e,t,r,i,o,s="emptyOnly"){return new Jy(n,e,t,r,i,s,o).recognize()}var c2=31,Jy=class{constructor(e,t,r,i,o,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new Qy(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new J(4002,`'${e.segmentGroup}'`)}recognize(){let e=TT(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(({children:t,rootSnapshot:r})=>{let i=new dn(r,t),o=new Eh("",i),s=yL(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let t=new Rs([],Object.freeze({}),Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,ce,t).pipe(Q(r=>({children:r,rootSnapshot:t})),qr(r=>{if(r instanceof qu)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Hu?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(Q(s=>s instanceof dn?[s]:[]))}processChildren(e,t,r,i){let o=[];for(let s of Object.keys(r.children))s==="primary"?o.unshift(s):o.push(s);return Ce(o).pipe(ji(s=>{let a=r.children[s],u=bL(t,s);return this.processSegmentGroup(e,u,a,s,i)}),Bi((s,a)=>(s.push(...a),s)),zr(null),cg(),tt(s=>{if(s===null)return As(r);let a=eS(s);return l2(a),te(a)}))}processSegment(e,t,r,i,o,s,a){return Ce(t).pipe(ji(u=>this.processSegmentAgainstRoute(u._injector??e,t,u,r,i,o,s,a).pipe(qr(l=>{if(l instanceof Hu)return te(null);throw l}))),mn(u=>!!u),qr(u=>{if(ZT(u))return a2(r,i,o)?te(new Zy):As(r);throw u}))}processSegmentAgainstRoute(e,t,r,i,o,s,a,u){return On(r)!==s&&(s===ce||!Sh(i,o,r))?As(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,s,u):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,s,u):As(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,s,a){let{matched:u,parameters:l,consumedSegments:h,positionalParamSegments:p,remainingSegments:m}=XT(t,i,o);if(!u)return As(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>c2&&(this.allowRedirects=!1));let y=new Rs(o,l,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,ST(i),On(i),i.component??i._loadedComponent??null,i,AT(i)),b=wh(y,a,this.paramsInheritanceStrategy);y.params=Object.freeze(b.params),y.data=Object.freeze(b.data);let A=this.applyRedirects.applyRedirectCommands(h,i.redirectTo,p,y,e);return this.applyRedirects.lineralizeSegments(i,A).pipe(tt(M=>this.processSegment(e,r,t,M.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,i,o,s){let a=t2(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(Qe(u=>u.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Qe(({routes:l})=>{let h=r._loadedInjector??e,{parameters:p,consumedSegments:m,remainingSegments:y}=u,b=new Rs(m,p,Object.freeze(P({},this.urlTree.queryParams)),this.urlTree.fragment,ST(r),On(r),r.component??r._loadedComponent??null,r,AT(r)),A=wh(b,s,this.paramsInheritanceStrategy);b.params=Object.freeze(A.params),b.data=Object.freeze(A.data);let{segmentGroup:M,slicedSegments:L}=TT(t,m,y,l);if(L.length===0&&M.hasChildren())return this.processChildren(h,l,M,b).pipe(Q(V=>new dn(b,V)));if(l.length===0&&L.length===0)return te(new dn(b,[]));let G=On(r)===o;return this.processSegment(h,l,M,L,G?ce:o,!0,b).pipe(Q(V=>new dn(b,V instanceof dn?[V]:[])))}))):As(t)))}getChildConfig(e,t,r){return t.children?te({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?te({routes:t._loadedRoutes,injector:t._loadedInjector}):ZL(e,t,r,this.urlSerializer).pipe(tt(i=>i?this.configLoader.loadChildren(e,t).pipe(ct(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):e2(t))):te({routes:[],injector:e})}};function l2(n){n.sort((e,t)=>e.value.outlet===ce?-1:t.value.outlet===ce?1:e.value.outlet.localeCompare(t.value.outlet))}function d2(n){let e=n.value.routeConfig;return e&&e.path===""}function eS(n){let e=[],t=new Set;for(let r of n){if(!d2(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=eS(r.children);e.push(new dn(r.value,i))}return e.filter(r=>!t.has(r))}function ST(n){return n.data||{}}function AT(n){return n.resolve||{}}function h2(n,e,t,r,i,o){return tt(s=>u2(n,e,t,r,s.extractedUrl,i,o).pipe(Q(({state:a,tree:u})=>fe(P({},s),{targetSnapshot:a,urlAfterRedirects:u}))))}function f2(n,e){return tt(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return te(t);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of tS(u))s.add(l);let a=0;return Ce(s).pipe(ji(u=>o.has(u)?p2(u,r,n,e):(u.data=wh(u,u.parent,n).resolve,te(void 0))),ct(()=>a++),Xo(1),tt(u=>a===s.size?te(t):Rt))})}function tS(n){let e=n.children.map(t=>tS(t)).flat();return[n,...e]}function p2(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!WT(i)&&(o[zu]=i.title),g2(o,n,e,r).pipe(Q(s=>(n._resolvedData=s,n.data=wh(n,n.parent,t).resolve,null)))}function g2(n,e,t,r){let i=My(n);if(i.length===0)return te({});let o={};return Ce(i).pipe(tt(s=>m2(n[s],e,t,r).pipe(mn(),ct(a=>{if(a instanceof $u)throw Ih(new ks,a);o[s]=a}))),Xo(1),ag(o),qr(s=>ZT(s)?Rt:Zo(s)))}function m2(n,e,t,r){let i=Wu(e)??r,o=Ls(n,i),s=o.resolve?o.resolve(e,t):Yn(i,()=>o(e,t));return ci(s)}function Sy(n){return Qe(e=>{let t=n(e);return t?Ce(t).pipe(Q(()=>e)):te(e)})}var nS=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===ce);return r}getResolvedTitleForRoute(t){return t.data[zu]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>B(y2),providedIn:"root"})}}return n})(),y2=(()=>{class n extends nS{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(F(Zb))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Yu=new W("",{providedIn:"root",factory:()=>({})}),v2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ft({type:n,selectors:[["ng-component"]],standalone:!0,features:[_b],decls:1,vars:0,template:function(r,i){r&1&&ve(0,"router-outlet")},dependencies:[tv],encapsulation:2})}}return n})();function nv(n){let e=n.children&&n.children.map(nv),t=e?fe(P({},n),{children:e}):P({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ce&&(t.component=v2),t}var Ch=new W(""),rv=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=B(Qd)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return te(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=ci(t.loadComponent()).pipe(Q(rS),ct(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),nu(()=>{this.componentLoaders.delete(t)})),i=new Wo(r,()=>new $e).pipe(Go());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return te({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=_2(r,this.compiler,t,this.onLoadEndListener).pipe(nu(()=>{this.childrenLoaders.delete(r)})),s=new Wo(o,()=>new $e).pipe(Go());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _2(n,e,t,r){return ci(n.loadChildren()).pipe(Q(rS),tt(i=>i instanceof du||Array.isArray(i)?te(i):Ce(e.compileModuleAsync(i))),Q(i=>{r&&r(n);let o,s,a=!1;return Array.isArray(i)?(s=i,a=!0):(o=i.create(t).injector,s=o.get(Ch,[],{optional:!0,self:!0}).flat()),{routes:s.map(nv),injector:o}}))}function w2(n){return n&&typeof n=="object"&&"default"in n}function rS(n){return w2(n)?n.default:n}var iv=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>B(E2),providedIn:"root"})}}return n})(),E2=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),iS=new W(""),oS=new W("");function I2(n,e,t){let r=n.get(oS),i=n.get(Jt);return n.get(we).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=i.startViewTransition(()=>(o(),D2(n))),{onViewTransitionCreated:u}=r;return u&&Yn(n,()=>u({transition:a,from:e,to:t})),s})}function D2(n){return new Promise(e=>{Qm({read:()=>setTimeout(e)},{injector:n})})}var C2=new W(""),ov=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new $e,this.transitionAbortSubject=new $e,this.configLoader=B(rv),this.environmentInjector=B(cn),this.urlSerializer=B(Gu),this.rootContexts=B(Ku),this.location=B(Ds),this.inputBindingEnabled=B(Th,{optional:!0})!==null,this.titleStrategy=B(nS),this.options=B(Yu,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=B(iv),this.createViewTransition=B(iS,{optional:!0}),this.navigationErrorHandler=B(C2,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>te(void 0),this.rootComponentType=null;let t=i=>this.events.next(new Vy(i)),r=i=>this.events.next(new Ly(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(fe(P(P({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new yt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Fu,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vt(o=>o.id!==0),Q(o=>fe(P({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Qe(o=>{let s=!1,a=!1;return te(o).pipe(Qe(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",hn.SupersededByNewNavigation),Rt;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,targetBrowserUrl:typeof u.extras.browserUrl=="string"?this.urlSerializer.parse(u.extras.browserUrl):u.extras.browserUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?fe(P({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&h!=="reload"){let p="";return this.events.next(new ai(u.id,this.urlSerializer.serialize(u.rawUrl),p,gh.IgnoredSameUrlNavigation)),u.resolve(!1),Rt}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return te(u).pipe(Qe(p=>{let m=this.transitions?.getValue();return this.events.next(new Os(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),m!==this.transitions?.getValue()?Rt:Promise.resolve(p)}),h2(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ct(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=fe(P({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let m=new mh(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(m)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:p,extractedUrl:m,source:y,restoredState:b,extras:A}=u,M=new Os(p,this.urlSerializer.serialize(m),y,b);this.events.next(M);let L=zT(this.rootComponentType).snapshot;return this.currentTransition=o=fe(P({},u),{targetSnapshot:L,urlAfterRedirects:m,extras:fe(P({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,te(o)}else{let p="";return this.events.next(new ai(u.id,this.urlSerializer.serialize(u.extractedUrl),p,gh.IgnoredByUrlHandlingStrategy)),u.resolve(!1),Rt}}),ct(u=>{let l=new Py(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(l)}),Q(u=>(this.currentTransition=o=fe(P({},u),{guards:NL(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),HL(this.environmentInjector,u=>this.events.next(u)),ct(u=>{if(o.guardsResult=u.guardsResult,u.guardsResult&&typeof u.guardsResult!="boolean")throw Ih(this.urlSerializer,u.guardsResult);let l=new ky(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(l)}),vt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",hn.GuardRejected),!1)),Sy(u=>{if(u.guards.canActivateChecks.length)return te(u).pipe(ct(l=>{let h=new Oy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),Qe(l=>{let h=!1;return te(l).pipe(f2(this.paramsInheritanceStrategy,this.environmentInjector),ct({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(l,"",hn.NoDataFromResolver)}}))}),ct(l=>{let h=new Fy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}))}),Sy(u=>{let l=h=>{let p=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(h.routeConfig).pipe(ct(m=>{h.component=m}),Q(()=>{})));for(let m of h.children)p.push(...l(m));return p};return tu(l(u.targetSnapshot.root)).pipe(zr(null),mr(1))}),Sy(()=>this.afterPreactivation()),Qe(()=>{let{currentSnapshot:u,targetSnapshot:l}=o,h=this.createViewTransition?.(this.environmentInjector,u.root,l.root);return h?Ce(h).pipe(Q(()=>o)):te(o)}),Q(u=>{let l=SL(t.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=fe(P({},u),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),ct(()=>{this.events.next(new Bu)}),RL(this.rootContexts,t.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),mr(1),ct({next:u=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Xn(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{s=!0}}),dg(this.transitionAbortSubject.pipe(ct(u=>{throw u}))),nu(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",hn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),qr(u=>{if(a=!0,YT(u))this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),xL(u)?this.events.next(new Fs(u.url,u.navigationBehaviorOptions)):o.resolve(!1);else{let l=new ju(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0);try{let h=Yn(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(h instanceof $u){let{message:p,cancellationCode:m}=Ih(this.urlSerializer,h);this.events.next(new Tr(o.id,this.urlSerializer.serialize(o.extractedUrl),p,m)),this.events.next(new Fs(h.redirectTo,h.navigationBehaviorOptions))}else{this.events.next(l);let p=t.errorHandler(u);o.resolve(!!p)}}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Rt}))}))}cancelNavigationTransition(t,r,i){let o=new Tr(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function b2(n){return n!==Fu}var T2=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>B(S2),providedIn:"root"})}}return n})(),Xy=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},S2=(()=>{class n extends Xy{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mu(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),sS=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:()=>B(A2),providedIn:"root"})}}return n})(),A2=(()=>{class n extends sS{constructor(){super(...arguments),this.location=B(Ds),this.urlSerializer=B(Gu),this.options=B(Yu,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=B(iv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Sr,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=zT(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Os)this.stateMemento=this.createStateMemento();else if(t instanceof ai)this.rawUrlTree=r.initialUrl;else if(t instanceof mh){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Bu?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof Tr&&(t.code===hn.GuardRejected||t.code===hn.NoDataFromResolver)?this.restoreHistory(r):t instanceof ju?this.restoreHistory(r,!0):t instanceof Xn&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof Sr?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,s=P(P({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",s)}else{let o=P(P({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=mu(n)))(i||n)}})()}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),ku=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ku||{});function aS(n,e){n.events.pipe(vt(t=>t instanceof Xn||t instanceof Tr||t instanceof ju||t instanceof ai),Q(t=>t instanceof Xn||t instanceof ai?ku.COMPLETE:(t instanceof Tr?t.code===hn.Redirect||t.code===hn.SupersededByNewNavigation:!1)?ku.REDIRECTING:ku.FAILED),vt(t=>t!==ku.REDIRECTING),mr(1)).subscribe(()=>{e()})}function M2(n){throw n}var x2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},R2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ui=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=B(zd),this.stateManager=B(sS),this.options=B(Yu,{optional:!0})||{},this.pendingTasks=B(Is),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=B(ov),this.urlSerializer=B(Gu),this.location=B(Ds),this.urlHandlingStrategy=B(iv),this._events=new $e,this.errorHandler=this.options.errorHandler||M2,this.navigated=!1,this.routeReuseStrategy=B(T2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=B(Ch,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!B(Th,{optional:!0}),this.eventsSubscription=new Ke,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Tr&&r.code!==hn.Redirect&&r.code!==hn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Xn)this.navigated=!0;else if(r instanceof Fs){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=P({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||b2(i.source)},s);this.scheduleNavigation(a,Fu,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}P2(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Fu,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=P({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(nv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,h=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":h=P(P({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=UT(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),p=this.currentUrlTree.root}return $T(p,t,h,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=ao(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Fu,null,r)}navigate(t,r={skipLocationChange:!1}){return N2(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=P({},x2):r===!1?i=P({},R2):i=r,ao(t))return ET(this.currentUrlTree,t,i);let o=this.parseUrl(t);return ET(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,u,l;s?(a=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{a=p,u=m});let h=this.pendingTasks.add();return aS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:a,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function N2(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new J(4008,!1)}function P2(n){return!(n instanceof Bu)&&!(n instanceof Fs)}var uS=(()=>{class n{constructor(t,r,i,o,s,a){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new $e,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Xn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ao(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,u),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:A0(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:ao(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(se(ui),se(uo),Am("tabindex"),se(Zi),se(ri),se(br))}}static{this.\u0275dir=zt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&Oe("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&$d("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",no],skipLocationChange:[2,"skipLocationChange","skipLocationChange",no],replaceUrl:[2,"replaceUrl","replaceUrl",no],routerLink:"routerLink"},standalone:!0,features:[Km,Yi]})}}return n})();var bh=class{};var k2=(()=>{class n{constructor(t,r,i,o,s){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(vt(t=>t instanceof Xn),ji(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ud(o.providers,t,`Route: ${o.path}`));let s=o._injector??t,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(a,o.children??o._loadedRoutes))}return Ce(i).pipe(Hr())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=te(null);let o=i.pipe(tt(s=>s===null?te(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return Ce([o,s]).pipe(Hr())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(F(ui),F(Qd),F(cn),F(bh),F(rv))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),cS=new W(""),O2=(()=>{class n{constructor(t,r,i,o,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Os?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Xn?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof ai&&t.code===gh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof yh&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new yh(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){U0()}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac})}}return n})();function F2(n){return n.routerState.root}function Zu(n,e){return{\u0275kind:n,\u0275providers:e}}function V2(){let n=B(ln);return e=>{let t=n.get(oi);if(e!==t.components[0])return;let r=n.get(ui),i=n.get(lS);n.get(sv)===1&&r.initialNavigation(),n.get(dS,null,he.Optional)?.setUpPreloading(),n.get(cS,null,he.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var lS=new W("",{factory:()=>new $e}),sv=new W("",{providedIn:"root",factory:()=>1});function L2(){return Zu(2,[{provide:sv,useValue:0},{provide:Kd,multi:!0,deps:[ln],useFactory:e=>{let t=e.get(Fb,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(ui),o=e.get(lS);aS(i,()=>{r(!0)}),e.get(ov).afterPreactivation=()=>(r(!0),o.closed?te(void 0):o),i.initialNavigation()}))}}])}function j2(){return Zu(3,[{provide:Kd,multi:!0,useFactory:()=>{let e=B(ui);return()=>{e.setUpLocationChangeListener()}}},{provide:sv,useValue:2}])}var dS=new W("");function B2(n){return Zu(0,[{provide:dS,useExisting:k2},{provide:bh,useExisting:n}])}function U2(){return Zu(8,[bT,{provide:Th,useExisting:bT}])}function $2(n){let e=[{provide:iS,useValue:I2},{provide:oS,useValue:P({skipNextTransition:!!n?.skipInitialTransition},n)}];return Zu(9,e)}var MT=new W("ROUTER_FORROOT_GUARD"),H2=[Ds,{provide:Gu,useClass:ks},ui,Ku,{provide:uo,useFactory:F2,deps:[ui]},rv,[]],av=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[H2,[],{provide:Ch,multi:!0,useValue:t},{provide:MT,useFactory:W2,deps:[[ui,new ws,new pm]]},{provide:Yu,useValue:r||{}},r?.useHash?z2():G2(),q2(),r?.preloadingStrategy?B2(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?K2(r):[],r?.bindToComponentInputs?U2().\u0275providers:[],r?.enableViewTransitions?$2().\u0275providers:[],Q2()]}}static forChild(t){return{ngModule:n,providers:[{provide:Ch,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(F(MT,8))}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({})}}return n})();function q2(){return{provide:cS,useFactory:()=>{let n=B(Ub),e=B(we),t=B(Yu),r=B(ov),i=B(Gu);return t.scrollOffset&&n.setOffset(t.scrollOffset),new O2(i,r,n,e,t)}}}function z2(){return{provide:br,useClass:Lb}}function G2(){return{provide:br,useClass:cy}}function W2(n){return"guarded"}function K2(n){return[n.initialNavigation==="disabled"?j2().\u0275providers:[],n.initialNavigation==="enabledBlocking"?L2().\u0275providers:[]]}var xT=new W("");function Q2(){return[{provide:xT,useFactory:V2},{provide:Xm,multi:!0,useExisting:xT}]}var Ah=class{constructor(){this.name="",this.goalLife="",this.photoUrl="",this.email="",this.phoneNumber="",this.location="",this.socialNetwork=""}};var Z2="firebase",J2="10.14.1";$r(Z2,J2,"app");var Ju=new wr("ANGULARFIRE2_VERSION");var X2=(n,e)=>{let t=e?[e]:jI(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(s=>{r.includes(s)||r.push(s)})}),r},co=class{constructor(){return X2(ej)}},ej="app-check";function uv(){}var Mh=class{zone;delegate;constructor(e,t=ng){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(s){i.runGuarded(()=>{e.apply(this,[s])})};return this.delegate.schedule(o,t,r)}},cv=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",uv,{},uv,uv)),t.pipe(ct({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},xh=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Mh(Zone.current)),this.insideAngular=t.run(()=>new Mh(Zone.current,eu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(F(we))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tj(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function rn(n){return nj(tj())(n)}function nj(n){return function(t){return t=t.lift(new cv(n.ngZone)),t.pipe(An(n.outsideAngular),gn(n.insideAngular))}}var oj=new Map,sj={activated:!1,tokenObservers:[]},aj={initialized:!1,enabled:!1};function Fn(n){return oj.get(n)||Object.assign({},sj)}function yS(){return aj}var uj="https://content-firebaseappcheck.googleapis.com/v1";var cj="exchangeDebugToken",fS={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},e5=24*60*60*1e3;var dv=class{constructor(e,t,r,i,o){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){return N(this,null,function*(){this.stop();try{this.pending=new Vp,this.pending.promise.catch(t=>{}),yield lj(this.getNextRun(e)),this.pending.resolve(),yield this.pending.promise,this.pending=new Vp,this.pending.promise.catch(t=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(t){this.retryPolicy(t)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}};function lj(n){return new Promise(e=>{setTimeout(e,n)})}var dj={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},li=new VI("appCheck","AppCheck",dj);function vS(n){if(!Fn(n).activated)throw li.create("use-before-activation",{appName:n.name})}function _S(r,i){return N(this,arguments,function*({url:n,body:e},t){let o={"Content-Type":"application/json"},s=t.getImmediate({optional:!0});if(s){let y=yield s.getHeartbeatsHeader();y&&(o["X-Firebase-Client"]=y)}let a={method:"POST",body:JSON.stringify(e),headers:o},u;try{u=yield fetch(n,a)}catch(y){throw li.create("fetch-network-error",{originalErrorMessage:y?.message})}if(u.status!==200)throw li.create("fetch-status-error",{httpStatus:u.status});let l;try{l=yield u.json()}catch(y){throw li.create("fetch-parse-error",{originalErrorMessage:y?.message})}let h=l.ttl.match(/^([\d.]+)(s)$/);if(!h||!h[2]||isNaN(Number(h[1])))throw li.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${l.ttl}`});let p=Number(h[1])*1e3,m=Date.now();return{token:l.token,expireTimeMillis:m+p,issuedAtTimeMillis:m}})}function wS(n,e){let{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${uj}/projects/${t}/apps/${r}:${cj}?key=${i}`,body:{debug_token:e}}}var hj="firebase-app-check-database",fj=1,hv="firebase-app-check-store";var Rh=null;function pj(){return Rh||(Rh=new Promise((n,e)=>{try{let t=indexedDB.open(hj,fj);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(li.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},t.onupgradeneeded=r=>{let i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(hv,{keyPath:"compositeKey"})}}}catch(t){e(li.create("storage-open",{originalErrorMessage:t?.message}))}}),Rh)}function gj(n,e){return mj(yj(n),e)}function mj(n,e){return N(this,null,function*(){let r=(yield pj()).transaction(hv,"readwrite"),o=r.objectStore(hv).put({compositeKey:n,value:e});return new Promise((s,a)=>{o.onsuccess=u=>{s()},r.onerror=u=>{var l;a(li.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})})}function yj(n){return`${n.options.appId}-${n.name}`}var fv=new al("@firebase/app-check");function lv(n,e){return sl()?gj(n,e).catch(t=>{fv.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ES(){return yS().enabled}function IS(){return N(this,null,function*(){let n=yS();if(n.enabled&&n.token)return n.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var vj={error:"UNKNOWN_ERROR"};function _j(n){return kI.encodeString(JSON.stringify(n),!1)}function pv(n,e=!1){return N(this,null,function*(){let t=n.app;vS(t);let r=Fn(t),i=r.token,o;if(i&&!Xu(i)&&(r.token=void 0,i=void 0),!i){let u=yield r.cachedTokenPromise;u&&(Xu(u)?i=u:yield lv(t,void 0))}if(!e&&i&&Xu(i))return{token:i.token};let s=!1;if(ES()){r.exchangeTokenPromise||(r.exchangeTokenPromise=_S(wS(t,yield IS()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),s=!0);let u=yield r.exchangeTokenPromise;return yield lv(t,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),s=!0),i=yield Fn(t).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?fv.warn(u.message):fv.error(u),o=u}let a;return i?o?Xu(i)?a={token:i.token,internalError:o}:a=gS(o):(a={token:i.token},r.token=i,yield lv(t,i)):a=gS(o),s&&Dj(t,a),a})}function wj(n){return N(this,null,function*(){let e=n.app;vS(e);let{provider:t}=Fn(e);if(ES()){let r=yield IS(),{token:i}=yield _S(wS(e,r),n.heartbeatServiceProvider);return{token:i}}else{let{token:r}=yield t.getToken();return{token:r}}})}function Ej(n,e,t,r){let{app:i}=n,o=Fn(i),s={next:t,error:r,type:e};if(o.tokenObservers=[...o.tokenObservers,s],o.token&&Xu(o.token)){let a=o.token;Promise.resolve().then(()=>{t({token:a.token}),pS(n)}).catch(()=>{})}o.cachedTokenPromise.then(()=>pS(n))}function DS(n,e){let t=Fn(n),r=t.tokenObservers.filter(i=>i.next!==e);r.length===0&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function pS(n){let{app:e}=n,t=Fn(e),r=t.tokenRefresher;r||(r=Ij(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Ij(n){let{app:e}=n;return new dv(()=>N(this,null,function*(){let t=Fn(e),r;if(t.token?r=yield pv(n,!0):r=yield pv(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{let t=Fn(e);if(t.token){let r=t.token.issuedAtTimeMillis+(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)*.5+3e5,i=t.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},fS.RETRIAL_MIN_WAIT,fS.RETRIAL_MAX_WAIT)}function Dj(n,e){let t=Fn(n).tokenObservers;for(let r of t)try{r.type==="EXTERNAL"&&e.error!=null?r.error(e.error):r.next(e)}catch{}}function Xu(n){return n.expireTimeMillis-Date.now()>0}function gS(n){return{token:_j(vj),error:n}}var gv=class{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){let{tokenObservers:e}=Fn(this.app);for(let t of e)DS(this.app,t.next);return Promise.resolve()}};function Cj(n,e){return new gv(n,e)}function bj(n){return{getToken:e=>pv(n,e),getLimitedUseToken:()=>wj(n),addTokenListener:e=>Ej(n,"INTERNAL",e),removeTokenListener:e=>DS(n.app,e)}}var Tj="@firebase/app-check",Sj="0.8.8";var Aj="app-check",mS="app-check-internal";function Mj(){Ka(new Oi(Aj,n=>{let e=n.getProvider("app").getImmediate(),t=n.getProvider("heartbeat");return Cj(e,t)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(mS).initialize()})),Ka(new Oi(mS,n=>{let e=n.getProvider("app-check").getImmediate();return bj(e)},"PUBLIC").setInstantiationMode("EXPLICIT")),$r(Tj,Sj)}Mj();var xj=["localhost","0.0.0.0","127.0.0.1"],h5=typeof window<"u"&&xj.includes(window.location.hostname);var Rj="firebase",Nj="10.14.1";un.registerVersion(Rj,Nj,"app-compat");var Pj=["ngOnDestroy"],TS=(n,e,t,r={})=>new Proxy(n,{get:(i,o)=>t.runOutsideAngular(()=>{if(n[o])return r?.spy?.get&&r.spy.get(o,n[o]),n[o];if(Pj.indexOf(o)>-1)return()=>{};let s=e.toPromise().then(a=>{let u=a?.[o];return typeof u=="function"?u.bind(a):u?.then?u.then(l=>t.run(()=>l)):t.run(()=>u)});return new Proxy(()=>{},{get:(a,u)=>s[u],apply:(a,u,l)=>s.then(h=>{let p=h?.(...l);return r?.spy?.apply&&r.spy.apply(o,l,p),p})})})});var Nh=class{constructor(e){return e}},js=new W("angularfire2.app.options"),Bs=new W("angularfire2.app.name");function ec(n,e,t){let r=typeof t=="string"&&t||"[DEFAULT]",i=typeof t=="object"&&t||{};i.name=i.name||r;let s=un.apps.filter(a=>a&&a.name===i.name)[0]||e.runOutsideAngular(()=>un.initializeApp(n,i));try{if(JSON.stringify(n)!==JSON.stringify(s.options)){let a=!!module.hot;kj("error",`${s.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new Nh(s)}var kj=(n,...e)=>{ny()&&typeof console<"u"&&console[n](...e)},Oj={provide:Nh,useFactory:ec,deps:[js,we,[new ws,Bs]]},SS=(()=>{class n{static initializeApp(t,r){return{ngModule:n,providers:[{provide:js,useValue:t},{provide:Bs,useValue:r}]}}constructor(t){un.registerVersion("angularfire",Ju.full,"core"),un.registerVersion("angularfire",Ju.full,"app-compat"),un.registerVersion("angular",wb.full,t.toString())}static \u0275fac=function(r){return new(r||n)(F(Qt))};static \u0275mod=pt({type:n});static \u0275inj=ht({providers:[Oj]})}return n})();function Ph(n,e,t,r,i){let[,o,s]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===n)||[];if(o)return Fj(i,s)||(bS("error",`${e} was already initialized on the ${t} Firebase App with different settings.${Vj?" You may need to reload as Firebase is not HMR aware.":""}`),bS("warn",{is:i,was:s})),o;{let a=r();return globalThis.\u0275AngularfireInstanceCache.push([n,a,i]),a}}function Fj(n,e){try{return n.toString()===e.toString()}catch{return n===e}}var Vj=typeof module<"u"&&!!module.hot,bS=(n,...e)=>{ny()&&typeof console<"u"&&console[n](...e)};globalThis.\u0275AngularfireInstanceCache||=[];var mv=new W("angularfire2.auth.use-emulator"),yv=new W("angularfire2.auth.settings"),vv=new W("angularfire2.auth.tenant-id"),_v=new W("angularfire2.auth.langugage-code"),wv=new W("angularfire2.auth.use-device-language"),Ev=new W("angularfire.auth.persistence"),Iv=(n,e,t,r,i,o,s,a)=>Ph(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{let u=e.runOutsideAngular(()=>n.auth());if(t&&u.useEmulator(...t),r&&(u.tenantId=r),u.languageCode=i,o&&u.useDeviceLanguage(),s)for(let[l,h]of Object.entries(s))u.settings[l]=h;return a&&u.setPersistence(a),u},[t,r,i,o,s,a]),AS=(()=>{class n{authState;idToken;user;idTokenResult;credential;constructor(t,r,i,o,s,a,u,l,h,p,m,y){let b=new $e,A=te(void 0).pipe(gn(s.outsideAngular),Qe(()=>o.runOutsideAngular(()=>import("./chunk-DT56ZVVI.js"))),Q(()=>ec(t,o,r)),Q(M=>Iv(M,o,a,l,h,p,u,m)),jl({bufferSize:1,refCount:!1}));if(ro(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=te(null);else{A.pipe(mn()).subscribe();let M=A.pipe(Qe(V=>V.getRedirectResult().then(Z=>Z,()=>null)),rn,jl({bufferSize:1,refCount:!1})),L=A.pipe(Qe(V=>new pe(Z=>({unsubscribe:o.runOutsideAngular(()=>V.onAuthStateChanged(re=>Z.next(re),re=>Z.error(re),()=>Z.complete()))})))),G=A.pipe(Qe(V=>new pe(Z=>({unsubscribe:o.runOutsideAngular(()=>V.onIdTokenChanged(re=>Z.next(re),re=>Z.error(re),()=>Z.complete()))}))));this.authState=M.pipe(Bl(L),An(s.outsideAngular),gn(s.insideAngular)),this.user=M.pipe(Bl(G),An(s.outsideAngular),gn(s.insideAngular)),this.idToken=this.user.pipe(Qe(V=>V?Ce(V.getIdToken()):te(null))),this.idTokenResult=this.user.pipe(Qe(V=>V?Ce(V.getIdTokenResult()):te(null))),this.credential=sg(M,b,this.authState.pipe(vt(V=>!V))).pipe(Q(V=>V?.user?V:null),An(s.outsideAngular),gn(s.insideAngular))}return TS(this,A,o,{spy:{apply:(M,L,G)=>{(M.startsWith("signIn")||M.startsWith("createUser"))&&G.then(V=>b.next(V))}}})}static \u0275fac=function(r){return new(r||n)(F(js),F(Bs,8),F(Qt),F(we),F(xh),F(mv,8),F(yv,8),F(vv,8),F(_v,8),F(wv,8),F(Ev,8),F(co,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var MS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xS={};var di,Dv;(function(){var n;function e(E,v){function w(){}w.prototype=v.prototype,E.D=v.prototype,E.prototype=new w,E.prototype.constructor=E,E.C=function(I,D,T){for(var _=Array(arguments.length-2),lr=2;lr<arguments.length;lr++)_[lr-2]=arguments[lr];return v.prototype[D].apply(I,_)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(E,v,w){w||(w=0);var I=Array(16);if(typeof v=="string")for(var D=0;16>D;++D)I[D]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(D=0;16>D;++D)I[D]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=E.g[0],w=E.g[1],D=E.g[2];var T=E.g[3],_=v+(T^w&(D^T))+I[0]+3614090360&4294967295;v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[2]+606105819&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[3]+3250441966&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[4]+4118548399&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[6]+2821735955&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[7]+4249261313&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[8]+1770035416&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[10]+4294925233&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[11]+2304563134&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(T^w&(D^T))+I[12]+1804603682&4294967295,v=w+(_<<7&4294967295|_>>>25),_=T+(D^v&(w^D))+I[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=D+(w^T&(v^w))+I[14]+2792965006&4294967295,D=T+(_<<17&4294967295|_>>>15),_=w+(v^D&(T^v))+I[15]+1236535329&4294967295,w=D+(_<<22&4294967295|_>>>10),_=v+(D^T&(w^D))+I[1]+4129170786&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[11]+643717713&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[0]+3921069994&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[5]+3593408605&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[15]+3634488961&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[4]+3889429448&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[9]+568446438&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[3]+4107603335&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[8]+1163531501&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(D^T&(w^D))+I[13]+2850285829&4294967295,v=w+(_<<5&4294967295|_>>>27),_=T+(w^D&(v^w))+I[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=D+(v^w&(T^v))+I[7]+1735328473&4294967295,D=T+(_<<14&4294967295|_>>>18),_=w+(T^v&(D^T))+I[12]+2368359562&4294967295,w=D+(_<<20&4294967295|_>>>12),_=v+(w^D^T)+I[5]+4294588738&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[11]+1839030562&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[14]+4259657740&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[1]+2763975236&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[7]+4139469664&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[10]+3200236656&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[13]+681279174&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[3]+3572445317&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[6]+76029189&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(w^D^T)+I[9]+3654602809&4294967295,v=w+(_<<4&4294967295|_>>>28),_=T+(v^w^D)+I[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=D+(T^v^w)+I[15]+530742520&4294967295,D=T+(_<<16&4294967295|_>>>16),_=w+(D^T^v)+I[2]+3299628645&4294967295,w=D+(_<<23&4294967295|_>>>9),_=v+(D^(w|~T))+I[0]+4096336452&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[14]+2878612391&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[5]+4237533241&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[12]+1700485571&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[10]+4293915773&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[1]+2240044497&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[8]+1873313359&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[6]+2734768916&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[13]+1309151649&4294967295,w=D+(_<<21&4294967295|_>>>11),_=v+(D^(w|~T))+I[4]+4149444226&4294967295,v=w+(_<<6&4294967295|_>>>26),_=T+(w^(v|~D))+I[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=D+(v^(T|~w))+I[2]+718787259&4294967295,D=T+(_<<15&4294967295|_>>>17),_=w+(T^(D|~v))+I[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(D+(_<<21&4294967295|_>>>11))&4294967295,E.g[2]=E.g[2]+D&4294967295,E.g[3]=E.g[3]+T&4294967295}r.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var w=v-this.blockSize,I=this.B,D=this.h,T=0;T<v;){if(D==0)for(;T<=w;)i(this,E,T),T+=this.blockSize;if(typeof E=="string"){for(;T<v;)if(I[D++]=E.charCodeAt(T++),D==this.blockSize){i(this,I),D=0;break}}else for(;T<v;)if(I[D++]=E[T++],D==this.blockSize){i(this,I),D=0;break}}this.h=D,this.o+=v},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var w=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=w&255,w/=256;for(this.u(E),E=Array(16),v=w=0;4>v;++v)for(var I=0;32>I;I+=8)E[w++]=this.g[v]>>>I&255;return E};function o(E,v){var w=a;return Object.prototype.hasOwnProperty.call(w,E)?w[E]:w[E]=v(E)}function s(E,v){this.h=v;for(var w=[],I=!0,D=E.length-1;0<=D;D--){var T=E[D]|0;I&&T==v||(w[D]=T,I=!1)}this.g=w}var a={};function u(E){return-128<=E&&128>E?o(E,function(v){return new s([v|0],0>v?-1:0)}):new s([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return M(l(-E));for(var v=[],w=1,I=0;E>=w;I++)v[I]=E/w|0,w*=4294967296;return new s(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return M(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=l(Math.pow(v,8)),I=p,D=0;D<E.length;D+=8){var T=Math.min(8,E.length-D),_=parseInt(E.substring(D,D+T),v);8>T?(T=l(Math.pow(v,T)),I=I.j(T).add(l(_))):(I=I.j(w),I=I.add(l(_)))}return I}var p=u(0),m=u(1),y=u(16777216);n=s.prototype,n.m=function(){if(A(this))return-M(this).m();for(var E=0,v=1,w=0;w<this.g.length;w++){var I=this.i(w);E+=(0<=I?I:4294967296+I)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(A(this))return"-"+M(this).toString(E);for(var v=l(Math.pow(E,6)),w=this,I="";;){var D=Z(w,v).g;w=L(w,D.j(v));var T=((0<w.g.length?w.g[0]:w.h)>>>0).toString(E);if(w=D,b(w))return T+I;for(;6>T.length;)T="0"+T;I=T+I}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=L(this,E),A(E)?-1:b(E)?0:1};function M(E){for(var v=E.g.length,w=[],I=0;I<v;I++)w[I]=~E.g[I];return new s(w,~E.h).add(m)}n.abs=function(){return A(this)?M(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0,D=0;D<=v;D++){var T=I+(this.i(D)&65535)+(E.i(D)&65535),_=(T>>>16)+(this.i(D)>>>16)+(E.i(D)>>>16);I=_>>>16,T&=65535,_&=65535,w[D]=_<<16|T}return new s(w,w[w.length-1]&-2147483648?-1:0)};function L(E,v){return E.add(M(v))}n.j=function(E){if(b(this)||b(E))return p;if(A(this))return A(E)?M(this).j(M(E)):M(M(this).j(E));if(A(E))return M(this.j(M(E)));if(0>this.l(y)&&0>E.l(y))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,w=[],I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(var D=0;D<E.g.length;D++){var T=this.i(I)>>>16,_=this.i(I)&65535,lr=E.i(D)>>>16,Aa=E.i(D)&65535;w[2*I+2*D]+=_*Aa,G(w,2*I+2*D),w[2*I+2*D+1]+=T*Aa,G(w,2*I+2*D+1),w[2*I+2*D+1]+=_*lr,G(w,2*I+2*D+1),w[2*I+2*D+2]+=T*lr,G(w,2*I+2*D+2)}for(I=0;I<v;I++)w[I]=w[2*I+1]<<16|w[2*I];for(I=v;I<2*v;I++)w[I]=0;return new s(w,0)};function G(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function V(E,v){this.g=E,this.h=v}function Z(E,v){if(b(v))throw Error("division by zero");if(b(E))return new V(p,p);if(A(E))return v=Z(M(E),v),new V(M(v.g),M(v.h));if(A(v))return v=Z(E,M(v)),new V(M(v.g),v.h);if(30<E.g.length){if(A(E)||A(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;0>=I.l(E);)w=re(w),I=re(I);var D=X(w,1),T=X(I,1);for(I=X(I,2),w=X(w,2);!b(I);){var _=T.add(I);0>=_.l(E)&&(D=D.add(w),T=_),I=X(I,1),w=X(w,1)}return v=L(E,D.j(v)),new V(D,v)}for(D=p;0<=E.l(v);){for(w=Math.max(1,Math.floor(E.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),T=l(w),_=T.j(v);A(_)||0<_.l(E);)w-=I,T=l(w),_=T.j(v);b(T)&&(T=m),D=D.add(T),E=L(E,_)}return new V(D,E)}n.A=function(E){return Z(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)&E.i(I);return new s(w,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)|E.i(I);return new s(w,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),w=[],I=0;I<v;I++)w[I]=this.i(I)^E.i(I);return new s(w,this.h^E.h)};function re(E){for(var v=E.g.length+1,w=[],I=0;I<v;I++)w[I]=E.i(I)<<1|E.i(I-1)>>>31;return new s(w,E.h)}function X(E,v){var w=v>>5;v%=32;for(var I=E.g.length-w,D=[],T=0;T<I;T++)D[T]=0<v?E.i(T+w)>>>v|E.i(T+w+1)<<32-v:E.i(T+w);return new s(D,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Dv=xS.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=h,di=xS.Integer=s}).apply(typeof MS<"u"?MS:typeof self<"u"?self:typeof window<"u"?window:{});var kh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ar={};var Cv,jj,Us,bv,tc,Oh,Tv,Sv,Av;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof kh=="object"&&kh];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=t(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var C=c[g];if(!(C in f))break e;f=f[C]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function o(c,d){c instanceof String&&(c+="");var f=0,g=!1,C={next:function(){if(!g&&f<c.length){var x=f++;return{value:d(x,c[x]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}i("Array.prototype.values",function(c){return c||function(){return o(this,function(d,f){return f})}});var s=s||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),c.apply(d,C)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function y(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,C,x){for(var j=Array(arguments.length-2),Pe=2;Pe<arguments.length;Pe++)j[Pe-2]=arguments[Pe];return d.prototype[C].apply(g,j)}}function A(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function M(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let C=c.length||0,x=g.length||0;c.length=C+x;for(let j=0;j<x;j++)c[C+j]=g[j]}else c.push(g)}}class L{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function G(c){return/^[\s\xa0]*$/.test(c)}function V(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function Z(c){return Z[" "](c),c}Z[" "]=function(){};var re=V().indexOf("Gecko")!=-1&&!(V().toLowerCase().indexOf("webkit")!=-1&&V().indexOf("Edge")==-1)&&!(V().indexOf("Trident")!=-1||V().indexOf("MSIE")!=-1)&&V().indexOf("Edge")==-1;function X(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function E(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function v(c){let d={};for(let f in c)d[f]=c[f];return d}let w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(c,d){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)c[f]=g[f];for(let x=0;x<w.length;x++)f=w[x],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function D(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function T(c){a.setTimeout(()=>{throw c},0)}function _(){var c=dp;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class lr{constructor(){this.h=this.g=null}add(d,f){let g=Aa.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Aa=new L(()=>new TR,c=>c.reset());class TR{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Ma,xa=!1,dp=new lr,xE=()=>{let c=a.Promise.resolve(void 0);Ma=()=>{c.then(SR)}};var SR=()=>{for(var c;c=_();){try{c.h.call(c.g)}catch(f){T(f)}var d=Aa;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}xa=!1};function Lr(){this.s=this.s,this.C=this.C}Lr.prototype.s=!1,Lr.prototype.ma=function(){this.s||(this.s=!0,this.N())},Lr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Et(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}Et.prototype.h=function(){this.defaultPrevented=!0};var AR=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function Ra(c,d){if(Et.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(re){e:{try{Z(d.nodeName);var C=!0;break e}catch{}C=!1}C||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:MR[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&Ra.aa.h.call(this)}}b(Ra,Et);var MR={2:"touch",3:"pen",4:"mouse"};Ra.prototype.h=function(){Ra.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Na="closure_listenable_"+(1e6*Math.random()|0),xR=0;function RR(c,d,f,g,C){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=C,this.key=++xR,this.da=this.fa=!1}function $c(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Hc(c){this.src=c,this.g={},this.h=0}Hc.prototype.add=function(c,d,f,g,C){var x=c.toString();c=this.g[x],c||(c=this.g[x]=[],this.h++);var j=fp(c,d,g,C);return-1<j?(d=c[j],f||(d.fa=!1)):(d=new RR(d,this.src,x,!!g,C),d.fa=f,c.push(d)),d};function hp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],C=Array.prototype.indexOf.call(g,d,void 0),x;(x=0<=C)&&Array.prototype.splice.call(g,C,1),x&&($c(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function fp(c,d,f,g){for(var C=0;C<c.length;++C){var x=c[C];if(!x.da&&x.listener==d&&x.capture==!!f&&x.ha==g)return C}return-1}var pp="closure_lm_"+(1e6*Math.random()|0),gp={};function RE(c,d,f,g,C){if(g&&g.once)return PE(c,d,f,g,C);if(Array.isArray(d)){for(var x=0;x<d.length;x++)RE(c,d[x],f,g,C);return null}return f=_p(f),c&&c[Na]?c.K(d,f,l(g)?!!g.capture:!!g,C):NE(c,d,f,!1,g,C)}function NE(c,d,f,g,C,x){if(!d)throw Error("Invalid event type");var j=l(C)?!!C.capture:!!C,Pe=yp(c);if(Pe||(c[pp]=Pe=new Hc(c)),f=Pe.add(d,f,g,j,x),f.proxy)return f;if(g=NR(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)AR||(C=j),C===void 0&&(C=!1),c.addEventListener(d.toString(),g,C);else if(c.attachEvent)c.attachEvent(OE(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function NR(){function c(f){return d.call(c.src,c.listener,f)}let d=PR;return c}function PE(c,d,f,g,C){if(Array.isArray(d)){for(var x=0;x<d.length;x++)PE(c,d[x],f,g,C);return null}return f=_p(f),c&&c[Na]?c.L(d,f,l(g)?!!g.capture:!!g,C):NE(c,d,f,!0,g,C)}function kE(c,d,f,g,C){if(Array.isArray(d))for(var x=0;x<d.length;x++)kE(c,d[x],f,g,C);else g=l(g)?!!g.capture:!!g,f=_p(f),c&&c[Na]?(c=c.i,d=String(d).toString(),d in c.g&&(x=c.g[d],f=fp(x,f,g,C),-1<f&&($c(x[f]),Array.prototype.splice.call(x,f,1),x.length==0&&(delete c.g[d],c.h--)))):c&&(c=yp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=fp(d,f,g,C)),(f=-1<c?d[c]:null)&&mp(f))}function mp(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Na])hp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(OE(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=yp(d))?(hp(f,c),f.h==0&&(f.src=null,d[pp]=null)):$c(c)}}}function OE(c){return c in gp?gp[c]:gp[c]="on"+c}function PR(c,d){if(c.da)c=!0;else{d=new Ra(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&mp(c),c=f.call(g,d)}return c}function yp(c){return c=c[pp],c instanceof Hc?c:null}var vp="__closure_events_fn_"+(1e9*Math.random()>>>0);function _p(c){return typeof c=="function"?c:(c[vp]||(c[vp]=function(d){return c.handleEvent(d)}),c[vp])}function It(){Lr.call(this),this.i=new Hc(this),this.M=this,this.F=null}b(It,Lr),It.prototype[Na]=!0,It.prototype.removeEventListener=function(c,d,f,g){kE(this,c,d,f,g)};function At(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new Et(d,c);else if(d instanceof Et)d.target=d.target||c;else{var C=d;d=new Et(g,c),I(d,C)}if(C=!0,f)for(var x=f.length-1;0<=x;x--){var j=d.g=f[x];C=qc(j,g,!0,d)&&C}if(j=d.g=c,C=qc(j,g,!0,d)&&C,C=qc(j,g,!1,d)&&C,f)for(x=0;x<f.length;x++)j=d.g=f[x],C=qc(j,g,!1,d)&&C}It.prototype.N=function(){if(It.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)$c(f[g]);delete c.g[d],c.h--}}this.F=null},It.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},It.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function qc(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var C=!0,x=0;x<d.length;++x){var j=d[x];if(j&&!j.da&&j.capture==f){var Pe=j.listener,mt=j.ha||j.src;j.fa&&hp(c.i,j),C=Pe.call(mt,g)!==!1&&C}}return C&&!g.defaultPrevented}function FE(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function VE(c){c.g=FE(()=>{c.g=null,c.i&&(c.i=!1,VE(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class kR extends Lr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:VE(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pa(c){Lr.call(this),this.h=c,this.g={}}b(Pa,Lr);var LE=[];function jE(c){X(c.g,function(d,f){this.g.hasOwnProperty(f)&&mp(d)},c),c.g={}}Pa.prototype.N=function(){Pa.aa.N.call(this),jE(this)},Pa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var wp=a.JSON.stringify,OR=a.JSON.parse,FR=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Ep(){}Ep.prototype.h=null;function BE(c){return c.h||(c.h=c.i())}function UE(){}var ka={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ip(){Et.call(this,"d")}b(Ip,Et);function Dp(){Et.call(this,"c")}b(Dp,Et);var Ri={},$E=null;function zc(){return $E=$E||new It}Ri.La="serverreachability";function HE(c){Et.call(this,Ri.La,c)}b(HE,Et);function Oa(c){let d=zc();At(d,new HE(d))}Ri.STAT_EVENT="statevent";function qE(c,d){Et.call(this,Ri.STAT_EVENT,c),this.stat=d}b(qE,Et);function Mt(c){let d=zc();At(d,new qE(d,c))}Ri.Ma="timingevent";function zE(c,d){Et.call(this,Ri.Ma,c),this.size=d}b(zE,Et);function Fa(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Va(){this.g=!0}Va.prototype.xa=function(){this.g=!1};function VR(c,d,f,g,C,x){c.info(function(){if(c.g)if(x)for(var j="",Pe=x.split("&"),mt=0;mt<Pe.length;mt++){var Te=Pe[mt].split("=");if(1<Te.length){var Dt=Te[0];Te=Te[1];var Ct=Dt.split("_");j=2<=Ct.length&&Ct[1]=="type"?j+(Dt+"="+Te+"&"):j+(Dt+"=redacted&")}}else j=null;else j=x;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+d+`
`+f+`
`+j})}function LR(c,d,f,g,C,x,j){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+d+`
`+f+`
`+x+" "+j})}function Lo(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+BR(c,f)+(g?" "+g:"")})}function jR(c,d){c.info(function(){return"TIMEOUT: "+d})}Va.prototype.info=function(){};function BR(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var x=C[0];if(x!="noop"&&x!="stop"&&x!="close")for(var j=1;j<C.length;j++)C[j]=""}}}}return wp(f)}catch{return d}}var Gc={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},GE={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Cp;function Wc(){}b(Wc,Ep),Wc.prototype.g=function(){return new XMLHttpRequest},Wc.prototype.i=function(){return{}},Cp=new Wc;function jr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Pa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new WE}function WE(){this.i=null,this.g="",this.h=!1}var KE={},bp={};function Tp(c,d,f){c.L=1,c.v=Zc(dr(d)),c.m=f,c.P=!0,QE(c,null)}function QE(c,d){c.F=Date.now(),Kc(c),c.A=dr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),cI(f.i,"t",g),c.C=0,f=c.j.J,c.h=new WE,c.g=SI(c.j,f?d:null,!c.m),0<c.O&&(c.M=new kR(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var C="readystatechange";Array.isArray(C)||(C&&(LE[0]=C.toString()),C=LE);for(var x=0;x<C.length;x++){var j=RE(f,C[x],g||d.handleEvent,!1,d.h||d);if(!j)break;d.g[j.key]=j}d=c.H?v(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Oa(),VR(c.i,c.u,c.A,c.l,c.R,c.m)}jr.prototype.ca=function(c){c=c.target;let d=this.M;d&&hr(c)==3?d.j():this.Y(c)},jr.prototype.Y=function(c){try{if(c==this.g)e:{let Ct=hr(this.g);var d=this.g.Ba();let Uo=this.g.Z();if(!(3>Ct)&&(Ct!=3||this.g&&(this.h.h||this.g.oa()||mI(this.g)))){this.J||Ct!=4||d==7||(d==8||0>=Uo?Oa(3):Oa(2)),Sp(this);var f=this.g.Z();this.X=f;t:if(YE(this)){var g=mI(this.g);c="";var C=g.length,x=hr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ni(this),La(this);var j="";break t}this.h.i=new a.TextDecoder}for(d=0;d<C;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(x&&d==C-1)});g.length=0,this.h.g+=c,this.C=0,j=this.h.g}else j=this.g.oa();if(this.o=f==200,LR(this.i,this.u,this.A,this.l,this.R,Ct,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Pe,mt=this.g;if((Pe=mt.g?mt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!G(Pe)){var Te=Pe;break t}}Te=null}if(f=Te)Lo(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ap(this,f);else{this.o=!1,this.s=3,Mt(12),Ni(this),La(this);break e}}if(this.P){f=!0;let Tn;for(;!this.J&&this.C<j.length;)if(Tn=UR(this,j),Tn==bp){Ct==4&&(this.s=4,Mt(14),f=!1),Lo(this.i,this.l,null,"[Incomplete Response]");break}else if(Tn==KE){this.s=4,Mt(15),Lo(this.i,this.l,j,"[Invalid Chunk]"),f=!1;break}else Lo(this.i,this.l,Tn,null),Ap(this,Tn);if(YE(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||j.length!=0||this.h.h||(this.s=1,Mt(16),f=!1),this.o=this.o&&f,!f)Lo(this.i,this.l,j,"[Invalid Chunked Response]"),Ni(this),La(this);else if(0<j.length&&!this.W){this.W=!0;var Dt=this.j;Dt.g==this&&Dt.ba&&!Dt.M&&(Dt.j.info("Great, no buffering proxy detected. Bytes received: "+j.length),kp(Dt),Dt.M=!0,Mt(11))}}else Lo(this.i,this.l,j,null),Ap(this,j);Ct==4&&Ni(this),this.o&&!this.J&&(Ct==4?DI(this.j,this):(this.o=!1,Kc(this)))}else iN(this.g),f==400&&0<j.indexOf("Unknown SID")?(this.s=3,Mt(12)):(this.s=0,Mt(13)),Ni(this),La(this)}}}catch{}finally{}};function YE(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function UR(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?bp:(f=Number(d.substring(f,g)),isNaN(f)?KE:(g+=1,g+f>d.length?bp:(d=d.slice(g,g+f),c.C=g+f,d)))}jr.prototype.cancel=function(){this.J=!0,Ni(this)};function Kc(c){c.S=Date.now()+c.I,ZE(c,c.I)}function ZE(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=Fa(m(c.ba,c),d)}function Sp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}jr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(jR(this.i,this.A),this.L!=2&&(Oa(),Mt(17)),Ni(this),this.s=2,La(this)):ZE(this,this.S-c)};function La(c){c.j.G==0||c.J||DI(c.j,c)}function Ni(c){Sp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,jE(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Ap(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Mp(f.h,c))){if(!c.K&&Mp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)nl(f),el(f);else break e;Pp(f),Mt(18)}}else f.za=C[1],0<f.za-f.T&&37500>C[2]&&f.F&&f.v==0&&!f.C&&(f.C=Fa(m(f.Za,f),6e3));if(1>=eI(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else ki(f,11)}else if((c.K||f.g==c)&&nl(f),!G(d))for(C=f.Da.g.parse(d),d=0;d<C.length;d++){let Te=C[d];if(f.T=Te[0],Te=Te[1],f.G==2)if(Te[0]=="c"){f.K=Te[1],f.ia=Te[2];let Dt=Te[3];Dt!=null&&(f.la=Dt,f.j.info("VER="+f.la));let Ct=Te[4];Ct!=null&&(f.Aa=Ct,f.j.info("SVER="+f.Aa));let Uo=Te[5];Uo!=null&&typeof Uo=="number"&&0<Uo&&(g=1.5*Uo,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let Tn=c.g;if(Tn){let il=Tn.g?Tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(il){var x=g.h;x.g||il.indexOf("spdy")==-1&&il.indexOf("quic")==-1&&il.indexOf("h2")==-1||(x.j=x.l,x.g=new Set,x.h&&(xp(x,x.h),x.h=null))}if(g.D){let Op=Tn.g?Tn.g.getResponseHeader("X-HTTP-Session-Id"):null;Op&&(g.ya=Op,Le(g.I,g.D,Op))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var j=c;if(g.qa=TI(g,g.J?g.ia:null,g.W),j.K){tI(g.h,j);var Pe=j,mt=g.L;mt&&(Pe.I=mt),Pe.B&&(Sp(Pe),Kc(Pe)),g.g=j}else EI(g);0<f.i.length&&tl(f)}else Te[0]!="stop"&&Te[0]!="close"||ki(f,7);else f.G==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?ki(f,7):Np(f):Te[0]!="noop"&&f.l&&f.l.ta(Te),f.v=0)}}Oa(4)}catch{}}var $R=class{constructor(c,d){this.g=c,this.map=d}};function JE(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function XE(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function eI(c){return c.h?1:c.g?c.g.size:0}function Mp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function xp(c,d){c.g?c.g.add(d):c.h=d}function tI(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}JE.prototype.cancel=function(){if(this.i=nI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function nI(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return A(c.i)}function HR(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function qR(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function rI(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=qR(c),g=HR(c),C=g.length,x=0;x<C;x++)d.call(void 0,g[x],f&&f[x],c)}var iI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zR(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),C=null;if(0<=g){var x=c[f].substring(0,g);C=c[f].substring(g+1)}else x=c[f];d(x,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Pi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof Pi){this.h=c.h,Qc(this,c.j),this.o=c.o,this.g=c.g,Yc(this,c.s),this.l=c.l;var d=c.i,f=new Ua;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),oI(this,f),this.m=c.m}else c&&(d=String(c).match(iI))?(this.h=!1,Qc(this,d[1]||"",!0),this.o=ja(d[2]||""),this.g=ja(d[3]||"",!0),Yc(this,d[4]),this.l=ja(d[5]||"",!0),oI(this,d[6]||"",!0),this.m=ja(d[7]||"")):(this.h=!1,this.i=new Ua(null,this.h))}Pi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ba(d,sI,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ba(d,sI,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ba(f,f.charAt(0)=="/"?KR:WR,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ba(f,YR)),c.join("")};function dr(c){return new Pi(c)}function Qc(c,d,f){c.j=f?ja(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function Yc(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function oI(c,d,f){d instanceof Ua?(c.i=d,ZR(c.i,c.h)):(f||(d=Ba(d,QR)),c.i=new Ua(d,c.h))}function Le(c,d,f){c.i.set(d,f)}function Zc(c){return Le(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ja(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ba(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,GR),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function GR(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var sI=/[#\/\?@]/g,WR=/[#\?:]/g,KR=/[#\?]/g,QR=/[#\?@]/g,YR=/#/g;function Ua(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Br(c){c.g||(c.g=new Map,c.h=0,c.i&&zR(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}n=Ua.prototype,n.add=function(c,d){Br(this),this.i=null,c=jo(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function aI(c,d){Br(c),d=jo(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function uI(c,d){return Br(c),d=jo(c,d),c.g.has(d)}n.forEach=function(c,d){Br(this),this.g.forEach(function(f,g){f.forEach(function(C){c.call(d,C,g,this)},this)},this)},n.na=function(){Br(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let C=c[g];for(let x=0;x<C.length;x++)f.push(d[g])}return f},n.V=function(c){Br(this);let d=[];if(typeof c=="string")uI(this,c)&&(d=d.concat(this.g.get(jo(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},n.set=function(c,d){return Br(this),this.i=null,c=jo(this,c),uI(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},n.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function cI(c,d,f){aI(c,d),0<f.length&&(c.i=null,c.g.set(jo(c,d),A(f)),c.h+=f.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let x=encodeURIComponent(String(g)),j=this.V(g);for(g=0;g<j.length;g++){var C=x;j[g]!==""&&(C+="="+encodeURIComponent(String(j[g]))),c.push(C)}}return this.i=c.join("&")};function jo(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function ZR(c,d){d&&!c.j&&(Br(c),c.i=null,c.g.forEach(function(f,g){var C=g.toLowerCase();g!=C&&(aI(this,g),cI(this,C,f))},c)),c.j=d}function JR(c,d){let f=new Va;if(a.Image){let g=new Image;g.onload=y(Ur,f,"TestLoadImage: loaded",!0,d,g),g.onerror=y(Ur,f,"TestLoadImage: error",!1,d,g),g.onabort=y(Ur,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=y(Ur,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function XR(c,d){let f=new Va,g=new AbortController,C=setTimeout(()=>{g.abort(),Ur(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(x=>{clearTimeout(C),x.ok?Ur(f,"TestPingServer: ok",!0,d):Ur(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(C),Ur(f,"TestPingServer: error",!1,d)})}function Ur(c,d,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function eN(){this.g=new FR}function tN(c,d,f){let g=f||"";try{rI(c,function(C,x){let j=C;l(C)&&(j=wp(C)),d.push(g+x+"="+encodeURIComponent(j))})}catch(C){throw d.push(g+"type="+encodeURIComponent("_badmap")),C}}function $a(c){this.l=c.Ub||null,this.j=c.eb||!1}b($a,Ep),$a.prototype.g=function(){return new Jc(this.l,this.j)},$a.prototype.i=function(c){return function(){return c}}({});function Jc(c,d){It.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Jc,It),n=Jc.prototype,n.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,qa(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ha(this)),this.readyState=0},n.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,qa(this)),this.g&&(this.readyState=3,qa(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;lI(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function lI(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}n.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ha(this):qa(this),this.readyState==3&&lI(this)}},n.Ra=function(c){this.g&&(this.response=this.responseText=c,Ha(this))},n.Qa=function(c){this.g&&(this.response=c,Ha(this))},n.ga=function(){this.g&&Ha(this)};function Ha(c){c.readyState=4,c.l=null,c.j=null,c.v=null,qa(c)}n.setRequestHeader=function(c,d){this.u.append(c,d)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function qa(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Jc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function dI(c){let d="";return X(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function Rp(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=dI(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):Le(c,d,f))}function We(c){It.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(We,It);var nN=/^https?$/i,rN=["POST","PUT"];n=We.prototype,n.Ha=function(c){this.J=c},n.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Cp.g(),this.v=this.o?BE(this.o):BE(Cp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(x){hI(this,x);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let x of g.keys())f.set(x,g.get(x));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(x=>x.toLowerCase()=="content-type"),C=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rN,d,void 0))||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[x,j]of f)this.g.setRequestHeader(x,j);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gI(this),this.u=!0,this.g.send(c),this.u=!1}catch(x){hI(this,x)}};function hI(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,fI(c),Xc(c)}function fI(c){c.A||(c.A=!0,At(c,"complete"),At(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,At(this,"complete"),At(this,"abort"),Xc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Xc(this,!0)),We.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?pI(this):this.bb())},n.bb=function(){pI(this)};function pI(c){if(c.h&&typeof s<"u"&&(!c.v[1]||hr(c)!=4||c.Z()!=2)){if(c.u&&hr(c)==4)FE(c.Ea,0,c);else if(At(c,"readystatechange"),hr(c)==4){c.h=!1;try{let j=c.Z();e:switch(j){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=j===0){var C=String(c.D).match(iI)[1]||null;!C&&a.self&&a.self.location&&(C=a.self.location.protocol.slice(0,-1)),g=!nN.test(C?C.toLowerCase():"")}f=g}if(f)At(c,"complete"),At(c,"success");else{c.m=6;try{var x=2<hr(c)?c.g.statusText:""}catch{x=""}c.l=x+" ["+c.Z()+"]",fI(c)}}finally{Xc(c)}}}}function Xc(c,d){if(c.g){gI(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||At(c,"ready");try{f.onreadystatechange=g}catch{}}}function gI(c){c.I&&(a.clearTimeout(c.I),c.I=null)}n.isActive=function(){return!!this.g};function hr(c){return c.g?c.g.readyState:0}n.Z=function(){try{return 2<hr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),OR(d)}};function mI(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function iN(c){let d={};c=(c.g&&2<=hr(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(G(c[g]))continue;var f=D(c[g]);let C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let x=d[C]||[];d[C]=x,x.push(f)}E(d,function(g){return g.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function yI(c){this.Aa=0,this.i=[],this.j=new Va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=za("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=za("baseRetryDelayMs",5e3,c),this.cb=za("retryDelaySeedMs",1e4,c),this.Wa=za("forwardChannelMaxRetries",2,c),this.wa=za("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new JE(c&&c.concurrentRequestLimit),this.Da=new eN,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=yI.prototype,n.la=8,n.G=1,n.connect=function(c,d,f,g){Mt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=TI(this,null,this.W),tl(this)};function Np(c){if(vI(c),c.G==3){var d=c.U++,f=dr(c.I);if(Le(f,"SID",c.K),Le(f,"RID",d),Le(f,"TYPE","terminate"),Ga(c,f),d=new jr(c,c.j,d),d.L=2,d.v=Zc(dr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=SI(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Kc(d)}bI(c)}function el(c){c.g&&(kp(c),c.g.cancel(),c.g=null)}function vI(c){el(c),c.u&&(a.clearTimeout(c.u),c.u=null),nl(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function tl(c){if(!XE(c.h)&&!c.s){c.s=!0;var d=c.Ga;Ma||xE(),xa||(Ma(),xa=!0),dp.add(d,c),c.B=0}}function oN(c,d){return eI(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=Fa(m(c.Ga,c,d),CI(c,c.B)),c.B++,!0)}n.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let C=new jr(this,this.j,c),x=this.o;if(this.S&&(x?(x=v(x),I(x,this.S)):x=this.S),this.m!==null||this.O||(C.H=x,x=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=wI(this,C,d),f=dr(this.I),Le(f,"RID",c),Le(f,"CVER",22),this.D&&Le(f,"X-HTTP-Session-Id",this.D),Ga(this,f),x&&(this.O?d="headers="+encodeURIComponent(String(dI(x)))+"&"+d:this.m&&Rp(f,this.m,x)),xp(this.h,C),this.Ua&&Le(f,"TYPE","init"),this.P?(Le(f,"$req",d),Le(f,"SID","null"),C.T=!0,Tp(C,f,null)):Tp(C,f,d),this.G=2}}else this.G==3&&(c?_I(this,c):this.i.length==0||XE(this.h)||_I(this))};function _I(c,d){var f;d?f=d.l:f=c.U++;let g=dr(c.I);Le(g,"SID",c.K),Le(g,"RID",f),Le(g,"AID",c.T),Ga(c,g),c.m&&c.o&&Rp(g,c.m,c.o),f=new jr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=wI(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),xp(c.h,f),Tp(f,g,d)}function Ga(c,d){c.H&&X(c.H,function(f,g){Le(d,g,f)}),c.l&&rI({},function(f,g){Le(d,g,f)})}function wI(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var C=c.i;let x=-1;for(;;){let j=["count="+f];x==-1?0<f?(x=C[0].g,j.push("ofs="+x)):x=0:j.push("ofs="+x);let Pe=!0;for(let mt=0;mt<f;mt++){let Te=C[mt].g,Dt=C[mt].map;if(Te-=x,0>Te)x=Math.max(0,C[mt].g-100),Pe=!1;else try{tN(Dt,j,"req"+Te+"_")}catch{g&&g(Dt)}}if(Pe){g=j.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function EI(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Ma||xE(),xa||(Ma(),xa=!0),dp.add(d,c),c.v=0}}function Pp(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=Fa(m(c.Fa,c),CI(c,c.v)),c.v++,!0)}n.Fa=function(){if(this.u=null,II(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=Fa(m(this.ab,this),c)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Mt(10),el(this),II(this))};function kp(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function II(c){c.g=new jr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=dr(c.qa);Le(d,"RID","rpc"),Le(d,"SID",c.K),Le(d,"AID",c.T),Le(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&Le(d,"TO",c.ja),Le(d,"TYPE","xmlhttp"),Ga(c,d),c.m&&c.o&&Rp(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=Zc(dr(d)),f.m=null,f.P=!0,QE(f,c)}n.Za=function(){this.C!=null&&(this.C=null,el(this),Pp(this),Mt(19))};function nl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function DI(c,d){var f=null;if(c.g==d){nl(c),kp(c),c.g=null;var g=2}else if(Mp(c.h,d))f=d.D,tI(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var C=c.B;g=zc(),At(g,new zE(g,f)),tl(c)}else EI(c);else if(C=d.s,C==3||C==0&&0<d.X||!(g==1&&oN(c,d)||g==2&&Pp(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),C){case 1:ki(c,5);break;case 4:ki(c,10);break;case 3:ki(c,6);break;default:ki(c,2)}}}function CI(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function ki(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let C=!g;g=new Pi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qc(g,"https"),Zc(g),C?JR(g.toString(),f):XR(g.toString(),f)}else Mt(2);c.G=0,c.l&&c.l.sa(d),bI(c),vI(c)}n.fb=function(c){c?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function bI(c){if(c.G=0,c.ka=[],c.l){let d=nI(c.h);(d.length!=0||c.i.length!=0)&&(M(c.ka,d),M(c.ka,c.i),c.h.i.length=0,A(c.i),c.i.length=0),c.l.ra()}}function TI(c,d,f){var g=f instanceof Pi?dr(f):new Pi(f);if(g.g!="")d&&(g.g=d+"."+g.g),Yc(g,g.s);else{var C=a.location;g=C.protocol,d=d?d+"."+C.hostname:C.hostname,C=+C.port;var x=new Pi(null);g&&Qc(x,g),d&&(x.g=d),C&&Yc(x,C),f&&(x.l=f),g=x}return f=c.D,d=c.ya,f&&d&&Le(g,f,d),Le(g,"VER",c.la),Ga(c,g),g}function SI(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new We(new $a({eb:f})):new We(c.pa),d.Ha(c.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function AI(){}n=AI.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function rl(){}rl.prototype.g=function(c,d){return new an(c,d)};function an(c,d){It.call(this),this.g=new yI(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!G(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!G(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Bo(this)}b(an,It),an.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},an.prototype.close=function(){Np(this.g)},an.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=wp(c),c=f);d.i.push(new $R(d.Ya++,c)),d.G==3&&tl(d)},an.prototype.N=function(){this.g.l=null,delete this.j,Np(this.g),delete this.g,an.aa.N.call(this)};function MI(c){Ip.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(MI,Ip);function xI(){Dp.call(this),this.status=1}b(xI,Dp);function Bo(c){this.g=c}b(Bo,AI),Bo.prototype.ua=function(){At(this.g,"a")},Bo.prototype.ta=function(c){At(this.g,new MI(c))},Bo.prototype.sa=function(c){At(this.g,new xI)},Bo.prototype.ra=function(){At(this.g,"b")},rl.prototype.createWebChannel=rl.prototype.g,an.prototype.send=an.prototype.o,an.prototype.open=an.prototype.m,an.prototype.close=an.prototype.close,Av=Ar.createWebChannelTransport=function(){return new rl},Sv=Ar.getStatEventTarget=function(){return zc()},Tv=Ar.Event=Ri,Oh=Ar.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Gc.NO_ERROR=0,Gc.TIMEOUT=8,Gc.HTTP_ERROR=6,tc=Ar.ErrorCode=Gc,GE.COMPLETE="complete",bv=Ar.EventType=GE,UE.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",It.prototype.listen=It.prototype.K,Us=Ar.WebChannel=UE,jj=Ar.FetchXmlHttpFactory=$a,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,Cv=Ar.XhrIo=We}).apply(typeof kh<"u"?kh:typeof self<"u"?self:typeof window<"u"?window:{});var RS="@firebase/firestore";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var va="10.14.0";var vi=new al("@firebase/firestore");function Gs(){return vi.logLevel}function kA(n){vi.setLogLevel(n)}function O(n,...e){if(vi.logLevel<=$n.DEBUG){let t=e.map(Pw);vi.debug(`Firestore (${va}): ${n}`,...t)}}function Ze(n,...e){if(vi.logLevel<=$n.ERROR){let t=e.map(Pw);vi.error(`Firestore (${va}): ${n}`,...t)}}function Vn(n,...e){if(vi.logLevel<=$n.WARN){let t=e.map(Pw);vi.warn(`Firestore (${va}): ${n}`,...t)}}function Pw(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${va}) INTERNAL ASSERTION FAILED: `+n;throw Ze(e),new Error(e)}function Y(n,e){n||K()}function OA(n,e){n||K()}function H(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},k=class extends FI{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var lt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var zh=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},kv=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(st.UNAUTHENTICATED))}shutdown(){}},Ov=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Fv=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Y(this.o===void 0);let r=this.i,i=u=>this.i!==r?(r=this.i,t(u)):Promise.resolve(),o=new lt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new lt,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(()=>N(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new lt)}},0),s()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Y(typeof r.accessToken=="string"),new zh(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Y(e===null||typeof e=="string"),new st(e)}},Vv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Lv=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Vv(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},jv=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Bv=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){Y(this.o===void 0);let r=o=>{o.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.R;return this.R=o.token,O("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Y(typeof t.token=="string"),this.R=t.token,new jv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function Bj(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Gh=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Bj(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function ae(n,e){return n<e?-1:n>e?1:0}function ta(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function FA(n){return n+"\0"}var ze=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new k(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new k(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ee=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ze(0,0))}static max(){return new n(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Wh=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&K(),r===void 0?r=e.length-t:r>e.length-t&&K(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),s=t.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ie=class n extends Wh{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},Uj=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Je=class n extends Wh{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return Uj.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},s=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new k(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new k(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new k(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var q=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ie.fromString(e))}static fromName(e){return new n(Ie.fromString(e).popFirst(5))}static empty(){return new n(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ie.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ie(e.slice()))}};var na=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};function Uv(n){return n.fields.find(e=>e.kind===2)}function ho(n){return n.fields.filter(e=>e.kind!==2)}na.UNKNOWN_ID=-1;var Js=class{constructor(e,t){this.fieldPath=e,this.kind=t}};var fc=class n{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new n(0,Cn.min())}};function VA(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new ze(t+1,0):new ze(t,r));return new Cn(i,q.empty(),e)}function LA(n){return new Cn(n.readTime,n.key,-1)}var Cn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(ee.min(),q.empty(),-1)}static max(){return new n(ee.max(),q.empty(),-1)}};function kw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=q.comparator(n.documentKey,e.documentKey),t!==0?t:ae(n.largestBatchId,e.largestBatchId))}var jA="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Kh=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ai(n){return N(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==jA)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var S=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&t()},u=>r(u))}),s=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,s=new Array(o),a=0;for(let u=0;u<o;u++){let l=u;t(e[l]).next(h=>{s[l]=h,++a,a===o&&r(s)},h=>i(h))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};var Qh=class n{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new lt,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new vo(e,t.error)):this.V.resolve()},this.transaction.onerror=r=>{let i=Ow(r.target.error);this.V.reject(new vo(e,i))}}static open(e,t,r,i){try{return new n(t,e.transaction(i,r))}catch(o){throw new vo(t,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(O("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){let e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){let t=this.transaction.objectStore(e);return new Hv(t)}},_i=class n{constructor(e,t,r){this.name=e,this.version=t,this.p=r,n.S(Wa())===12.2&&Ze("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return O("SimpleDb","Removing database:",e),fo(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!sl())return!1;if(n.v())return!0;let e=Wa(),t=n.S(e),r=0<t&&t<10,i=BA(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static v(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.C)==="YES"}static F(e,t){return e.store(t)}static S(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}M(e){return N(this,null,function*(){return this.db||(O("SimpleDb","Opening database:",this.name),this.db=yield new Promise((t,r)=>{let i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{let s=o.target.result;t(s)},i.onblocked=()=>{r(new vo(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{let s=o.target.error;s.name==="VersionError"?r(new k(R.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new k(R.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new vo(e,s))},i.onupgradeneeded=o=>{O("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);let s=o.target.result;this.p.O(s,i.transaction,o.oldVersion,this.version).next(()=>{O("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=t=>this.N(t)),this.db})}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){return N(this,null,function*(){let o=t==="readonly",s=0;for(;;){++s;try{this.db=yield this.M(e);let a=Qh.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),S.reject(l))).toPromise();return u.catch(()=>{}),yield a.m,u}catch(a){let u=a,l=u.name!=="FirebaseError"&&s<3;if(O("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function BA(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}var $v=class{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return fo(this.B.delete())}},vo=class extends k{constructor(e,t){super(R.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}};function Mi(n){return n.name==="IndexedDbTransactionError"}var Hv=class{constructor(e){this.store=e}put(e,t){let r;return t!==void 0?(O("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(O("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),fo(r)}add(e){return O("SimpleDb","ADD",this.store.name,e,e),fo(this.store.add(e))}get(e){return fo(this.store.get(e)).next(t=>(t===void 0&&(t=null),O("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return O("SimpleDb","DELETE",this.store.name,e),fo(this.store.delete(e))}count(){return O("SimpleDb","COUNT",this.store.name),fo(this.store.count())}U(e,t){let r=this.options(e,t),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){let o=i.getAll(r.range);return new S((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{let o=this.cursor(r),s=[];return this.W(o,(a,u)=>{s.push(u)}).next(()=>s)}}G(e,t){let r=this.store.getAll(e,t===null?void 0:t);return new S((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}j(e,t){O("SimpleDb","DELETE ALL",this.store.name);let r=this.options(e,t);r.H=!1;let i=this.cursor(r);return this.W(i,(o,s,a)=>a.delete())}J(e,t){let r;t?r=e:(r={},t=e);let i=this.cursor(r);return this.W(i,t)}Y(e){let t=this.cursor({});return new S((r,i)=>{t.onerror=o=>{let s=Ow(o.target.error);i(s)},t.onsuccess=o=>{let s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}W(e,t){let r=[];return new S((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{let a=s.target.result;if(!a)return void i();let u=new $v(a),l=t(a.primaryKey,a.value,u);if(l instanceof S){let h=l.catch(p=>(u.done(),S.reject(p)));r.push(h)}u.isDone?i():u.K===null?a.continue():a.continue(u.K)}}).next(()=>S.waitFor(r))}options(e,t){let r;return e!==void 0&&(typeof e=="string"?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.H?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}};function fo(n){return new S((e,t)=>{n.onsuccess=r=>{let i=r.target.result;e(i)},n.onerror=r=>{let i=Ow(r.target.error);t(i)}})}var NS=!1;function Ow(n){let e=_i.S(Wa());if(e>=12.2&&e<13){let t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){let r=new k("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return NS||(NS=!0,setTimeout(()=>{throw r},0)),r}}return n}var qv=class{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}X(e){O("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,()=>N(this,null,function*(){this.task=null;try{O("IndexBackfiller",`Documents written: ${yield this.Z.ee()}`)}catch(t){Mi(t)?O("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):yield Ai(t)}yield this.X(6e4)}))}},zv=class{constructor(e,t){this.localStore=e,this.persistence=t}ee(e=50){return N(this,null,function*(){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))})}te(e,t){let r=new Set,i=t,o=!0;return S.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return O("IndexBackfiller",`Processing collection: ${s}`),this.ne(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>t-i)}ne(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(o=>{let s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.re(i,o)).next(a=>(O("IndexBackfiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,t,a))).next(()=>s.size)}))}re(e,t){let r=e;return t.changes.forEach((i,o)=>{let s=LA(o);kw(s,r)>0&&(r=s)}),new Cn(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}};var fn=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function kc(n){return n==null}function pc(n){return n===0&&1/n==-1/0}function UA(n){return typeof n=="number"&&Number.isInteger(n)&&!pc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Bt(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=PS(e)),e=$j(n.get(t),e);return PS(e)}function $j(n,e){let t=e,r=n.length;for(let i=0;i<r;i++){let o=n.charAt(i);switch(o){case"\0":t+="";break;case"":t+="";break;default:t+=o}}return t}function PS(n){return n+""}function er(n){let e=n.length;if(Y(e>=2),e===2)return Y(n.charAt(0)===""&&n.charAt(1)===""),Ie.emptyPath();let t=e-2,r=[],i="";for(let o=0;o<e;){let s=n.indexOf("",o);switch((s<0||s>t)&&K(),n.charAt(s+1)){case"":let a=n.substring(o,s),u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=n.substring(o,s),i+="\0";break;case"":i+=n.substring(o,s+1);break;default:K()}o=s+2}return new Ie(r)}var kS=["userId","batchId"];function Bh(n,e){return[n,Bt(e)]}function $A(n,e,t){return[n,Bt(e),t]}var Hj={},qj=["prefixPath","collectionGroup","readTime","documentId"],zj=["prefixPath","collectionGroup","documentId"],Gj=["collectionGroup","readTime","prefixPath","documentId"],Wj=["canonicalId","targetId"],Kj=["targetId","path"],Qj=["path","targetId"],Yj=["collectionId","parent"],Zj=["indexId","uid"],Jj=["uid","sequenceNumber"],Xj=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],eB=["indexId","uid","orderedDocumentKey"],tB=["userId","collectionPath","documentId"],nB=["userId","collectionPath","largestBatchId"],rB=["userId","collectionGroup","largestBatchId"],HA=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],iB=[...HA,"documentOverlays"],qA=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],zA=qA,Fw=[...zA,"indexConfiguration","indexState","indexEntries"],oB=Fw,sB=[...Fw,"globals"];var gc=class extends Kh{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}};function dt(n,e){let t=H(n);return _i.F(t._e,e)}function OS(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function xo(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function GA(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ue=class n{constructor(e,t){this.comparator=e,this.root=t||nr.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Zs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Zs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Zs(this.root,e,this.comparator,!0)}},Zs=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nr=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,r,i,o){return this}insert(e,t,r){return new nr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Fe=class n{constructor(e){this.comparator=e,this.data=new Ue(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Yh(this.data.getIterator())}getIteratorFrom(e){return new Yh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Yh=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function $s(n){return n.hasNext()?n.getNext():void 0}var pn=class n{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new n([])}unionWith(e){let t=new Fe(Je.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ta(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var Zh=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};function WA(){return typeof atob<"u"}var et=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Zh("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};et.EMPTY_BYTE_STRING=new et("");var aB=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rr(n){if(Y(!!n),typeof n=="string"){let e=0,t=aB.exec(n);if(Y(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(n.seconds),nanos:He(n.nanos)}}function He(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function wi(n){return typeof n=="string"?et.fromBase64String(n):et.fromUint8Array(n)}function Hf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Vw(n){let e=n.mapValue.fields.__previous_value__;return Hf(e)?Vw(e):e}function mc(n){let e=Rr(n.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}var Gv=class{constructor(e,t,r,i,o,s,a,u,l){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},Ei=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var mi={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Uh={nullValue:"NULL_VALUE"};function _o(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Hf(n)?4:KA(n)?9007199254740991:qf(n)?10:11:K()}function or(n,e){if(n===e)return!0;let t=_o(n);if(t!==_o(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return mc(n).isEqual(mc(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=Rr(i.timestampValue),a=Rr(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return wi(i.bytesValue).isEqual(wi(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return He(i.geoPointValue.latitude)===He(o.geoPointValue.latitude)&&He(i.geoPointValue.longitude)===He(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return He(i.integerValue)===He(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=He(i.doubleValue),a=He(o.doubleValue);return s===a?pc(s)===pc(a):isNaN(s)&&isNaN(a)}return!1}(n,e);case 9:return ta(n.arrayValue.values||[],e.arrayValue.values||[],or);case 10:case 11:return function(i,o){let s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(OS(s)!==OS(a))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!or(s[u],a[u])))return!1;return!0}(n,e);default:return K()}}function yc(n,e){return(n.values||[]).find(t=>or(t,e))!==void 0}function Ii(n,e){if(n===e)return 0;let t=_o(n),r=_o(e);if(t!==r)return ae(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return ae(n.booleanValue,e.booleanValue);case 2:return function(o,s){let a=He(o.integerValue||o.doubleValue),u=He(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(n,e);case 3:return FS(n.timestampValue,e.timestampValue);case 4:return FS(mc(n),mc(e));case 5:return ae(n.stringValue,e.stringValue);case 6:return function(o,s){let a=wi(o),u=wi(s);return a.compareTo(u)}(n.bytesValue,e.bytesValue);case 7:return function(o,s){let a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=ae(a[l],u[l]);if(h!==0)return h}return ae(a.length,u.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,s){let a=ae(He(o.latitude),He(s.latitude));return a!==0?a:ae(He(o.longitude),He(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return VS(n.arrayValue,e.arrayValue);case 10:return function(o,s){var a,u,l,h;let p=o.fields||{},m=s.fields||{},y=(a=p.value)===null||a===void 0?void 0:a.arrayValue,b=(u=m.value)===null||u===void 0?void 0:u.arrayValue,A=ae(((l=y?.values)===null||l===void 0?void 0:l.length)||0,((h=b?.values)===null||h===void 0?void 0:h.length)||0);return A!==0?A:VS(y,b)}(n.mapValue,e.mapValue);case 11:return function(o,s){if(o===mi.mapValue&&s===mi.mapValue)return 0;if(o===mi.mapValue)return 1;if(s===mi.mapValue)return-1;let a=o.fields||{},u=Object.keys(a),l=s.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=ae(u[p],h[p]);if(m!==0)return m;let y=Ii(a[u[p]],l[h[p]]);if(y!==0)return y}return ae(u.length,h.length)}(n.mapValue,e.mapValue);default:throw K()}}function FS(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return ae(n,e);let t=Rr(n),r=Rr(e),i=ae(t.seconds,r.seconds);return i!==0?i:ae(t.nanos,r.nanos)}function VS(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Ii(t[i],r[i]);if(o)return o}return ae(t.length,r.length)}function ra(n){return Wv(n)}function Wv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Rr(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return wi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return q.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Wv(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${Wv(t.fields[s])}`;return i+"}"}(n.mapValue):K()}function wo(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Kv(n){return!!n&&"integerValue"in n}function vc(n){return!!n&&"arrayValue"in n}function LS(n){return!!n&&"nullValue"in n}function jS(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function $h(n){return!!n&&"mapValue"in n}function qf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function uc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return xo(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=uc(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function KA(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var QA={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function uB(n){return"nullValue"in n?Uh:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?wo(Ei.empty(),q.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?qf(n)?QA:{mapValue:{}}:K()}function cB(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?wo(Ei.empty(),q.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?QA:"mapValue"in n?qf(n)?{mapValue:{}}:mi:K()}function BS(n,e){let t=Ii(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function US(n,e){let t=Ii(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}var St=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!$h(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uc(t)}setAll(e){let t=Je.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!t.isImmediateParentOf(a)){let u=this.getFieldsMap(t);this.applyChanges(u,r,i),r={},i=[],t=a.popLast()}s?r[a.lastSegment()]=uc(s):i.push(a.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());$h(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return or(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];$h(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){xo(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(uc(this.value))}};function YA(n){let e=[];return xo(n.fields,(t,r)=>{let i=new Je([t]);if($h(r)){let o=YA(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new pn(e)}var at=class n{constructor(e,t,r,i,o,s,a){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ee.min(),ee.min(),ee.min(),St.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,ee.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,ee.min(),ee.min(),St.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ee.min(),ee.min(),St.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=St.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=St.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var sr=class{constructor(e,t){this.position=e,this.inclusive=t}};function $S(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],s=n.position[i];if(o.field.isKeyField()?r=q.comparator(q.fromName(s.referenceValue),t.key):r=Ii(s,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function HS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!or(n.position[t],e.position[t]))return!1;return!0}var Eo=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function lB(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Jh=class{},_e=class n extends Jh{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Zv(e,t,r):t==="array-contains"?new e_(e,r):t==="in"?new Xh(e,r):t==="not-in"?new t_(e,r):t==="array-contains-any"?new n_(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Jv(e,r):new Xv(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ii(t,this.value)):t!==null&&_o(this.value)===_o(t)&&this.matchesComparison(Ii(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Re=class n extends Jh{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return ia(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function ia(n){return n.op==="and"}function Qv(n){return n.op==="or"}function Lw(n){return ZA(n)&&ia(n)}function ZA(n){for(let e of n.filters)if(e instanceof Re)return!1;return!0}function Yv(n){if(n instanceof _e)return n.field.canonicalString()+n.op.toString()+ra(n.value);if(Lw(n))return n.filters.map(e=>Yv(e)).join(",");{let e=n.filters.map(t=>Yv(t)).join(",");return`${n.op}(${e})`}}function JA(n,e){return n instanceof _e?function(r,i){return i instanceof _e&&r.op===i.op&&r.field.isEqual(i.field)&&or(r.value,i.value)}(n,e):n instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&JA(s,i.filters[a]),!0):!1}(n,e):void K()}function XA(n,e){let t=n.filters.concat(e);return Re.create(t,n.op)}function eM(n){return n instanceof _e?function(t){return`${t.field.canonicalString()} ${t.op} ${ra(t.value)}`}(n):n instanceof Re?function(t){return t.op.toString()+" {"+t.getFilters().map(eM).join(" ,")+"}"}(n):"Filter"}var Zv=class extends _e{constructor(e,t,r){super(e,t,r),this.key=q.fromName(r.referenceValue)}matches(e){let t=q.comparator(e.key,this.key);return this.matchesComparison(t)}},Jv=class extends _e{constructor(e,t){super(e,"in",t),this.keys=tM("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Xv=class extends _e{constructor(e,t){super(e,"not-in",t),this.keys=tM("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function tM(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>q.fromName(r.referenceValue))}var e_=class extends _e{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return vc(t)&&yc(t.arrayValue,this.value)}},Xh=class extends _e{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&yc(this.value.arrayValue,t)}},t_=class extends _e{constructor(e,t){super(e,"not-in",t)}matches(e){if(yc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!yc(this.value.arrayValue,t)}},n_=class extends _e{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!vc(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>yc(this.value.arrayValue,r))}};var r_=class{constructor(e,t=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ue=null}};function i_(n,e=null,t=[],r=[],i=null,o=null,s=null){return new r_(n,e,t,r,i,o,s)}function Io(n){let e=H(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Yv(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),kc(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>ra(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>ra(r)).join(",")),e.ue=t}return e.ue}function Oc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!lB(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!JA(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!HS(n.startAt,e.startAt)&&HS(n.endAt,e.endAt)}function ef(n){return q.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function tf(n,e){return n.filters.filter(t=>t instanceof _e&&t.field.isEqual(e))}function qS(n,e,t){let r=Uh,i=!0;for(let o of tf(n,e)){let s=Uh,a=!0;switch(o.op){case"<":case"<=":s=uB(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Uh}BS({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];BS({value:r,inclusive:i},{value:s,inclusive:t.inclusive})<0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}function zS(n,e,t){let r=mi,i=!0;for(let o of tf(n,e)){let s=mi,a=!0;switch(o.op){case">=":case">":s=cB(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=mi}US({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(t!==null){for(let o=0;o<n.orderBy.length;++o)if(n.orderBy[o].field.isEqual(e)){let s=t.position[o];US({value:r,inclusive:i},{value:s,inclusive:t.inclusive})>0&&(r=s,i=t.inclusive);break}}return{value:r,inclusive:i}}var Ln=class{constructor(e,t=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function nM(n,e,t,r,i,o,s,a){return new Ln(n,e,t,r,i,o,s,a)}function _a(n){return new Ln(n)}function GS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function jw(n){return n.collectionGroup!==null}function Xs(n){let e=H(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Fe(Je.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Eo(o,r))}),t.has(Je.keyField().canonicalString())||e.ce.push(new Eo(Je.keyField(),r))}return e.ce}function Ut(n){let e=H(n);return e.le||(e.le=dB(e,Xs(n))),e.le}function dB(n,e){if(n.limitType==="F")return i_(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Eo(i.field,o)});let t=n.endAt?new sr(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new sr(n.startAt.position,n.startAt.inclusive):null;return i_(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function o_(n,e){let t=n.filters.concat([e]);return new Ln(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function nf(n,e,t){return new Ln(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Fc(n,e){return Oc(Ut(n),Ut(e))&&n.limitType===e.limitType}function rM(n){return`${Io(Ut(n))}|lt:${n.limitType}`}function Ws(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>eM(i)).join(", ")}]`),kc(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>ra(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>ra(i)).join(",")),`Target(${r})`}(Ut(n))}; limitType=${n.limitType})`}function Vc(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):q.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Xs(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){let l=$S(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Xs(r),i)||r.endAt&&!function(s,a,u){let l=$S(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Xs(r),i))}(n,e)}function iM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oM(n){return(e,t)=>{let r=!1;for(let i of Xs(n)){let o=hB(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function hB(n,e,t){let r=n.field.isKeyField()?q.comparator(e.key,t.key):function(o,s,a){let u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?Ii(u,l):K()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return K()}}var ar=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){xo(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return GA(this.inner)}size(){return this.innerSize}};var fB=new Ue(q.comparator);function on(){return fB}var sM=new Ue(q.comparator);function sc(...n){let e=sM;for(let t of n)e=e.insert(t.key,t);return e}function aM(n){let e=sM;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function tr(){return cc()}function uM(){return cc()}function cc(){return new ar(n=>n.toString(),(n,e)=>n.isEqual(e))}var pB=new Ue(q.comparator),gB=new Fe(q.comparator);function ue(...n){let e=gB;for(let t of n)e=e.add(t);return e}var mB=new Fe(ae);function Bw(){return mB}function Uw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pc(e)?"-0":e}}function cM(n){return{integerValue:""+n}}function lM(n,e){return UA(e)?cM(e):Uw(n,e)}var oa=class{constructor(){this._=void 0}};function yB(n,e,t){return n instanceof Di?function(i,o){let s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Hf(o)&&(o=Vw(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(t,e):n instanceof Nr?hM(n,e):n instanceof Pr?fM(n,e):function(i,o){let s=dM(i,o),a=WS(s)+WS(i.Pe);return Kv(s)&&Kv(i.Pe)?cM(a):Uw(i.serializer,a)}(n,e)}function vB(n,e,t){return n instanceof Nr?hM(n,e):n instanceof Pr?fM(n,e):t}function dM(n,e){return n instanceof Ci?function(r){return Kv(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Di=class extends oa{},Nr=class extends oa{constructor(e){super(),this.elements=e}};function hM(n,e){let t=pM(e);for(let r of n.elements)t.some(i=>or(i,r))||t.push(r);return{arrayValue:{values:t}}}var Pr=class extends oa{constructor(e){super(),this.elements=e}};function fM(n,e){let t=pM(e);for(let r of n.elements)t=t.filter(i=>!or(i,r));return{arrayValue:{values:t}}}var Ci=class extends oa{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function WS(n){return He(n.integerValue||n.doubleValue)}function pM(n){return vc(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var Do=class{constructor(e,t){this.field=e,this.transform=t}};function _B(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof Nr&&i instanceof Nr||r instanceof Pr&&i instanceof Pr?ta(r.elements,i.elements,or):r instanceof Ci&&i instanceof Ci?or(r.Pe,i.Pe):r instanceof Di&&i instanceof Di}(n.transform,e.transform)}var s_=class{constructor(e,t){this.version=e,this.transformResults=t}},Ye=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Hh(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var sa=class{};function gM(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ti(n.key,Ye.none()):new bi(n.key,n.data,Ye.none());{let t=n.data,r=St.empty(),i=new Fe(Je.comparator);for(let o of e.fields)if(!i.has(o)){let s=t.field(o);s===null&&o.length>1&&(o=o.popLast(),s=t.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new jn(n.key,r,new pn(i.toArray()),Ye.none())}}function wB(n,e,t){n instanceof bi?function(i,o,s){let a=i.value.clone(),u=QS(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(n,e,t):n instanceof jn?function(i,o,s){if(!Hh(i.precondition,o))return void o.convertToUnknownDocument(s.version);let a=QS(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(mM(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,t)}function lc(n,e,t,r){return n instanceof bi?function(o,s,a,u){if(!Hh(o.precondition,s))return a;let l=o.value.clone(),h=YS(o.fieldTransforms,u,s);return l.setAll(h),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(n,e,t,r):n instanceof jn?function(o,s,a,u){if(!Hh(o.precondition,s))return a;let l=YS(o.fieldTransforms,u,s),h=s.data;return h.setAll(mM(o)),h.setAll(l),s.convertToFoundDocument(s.version,h).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))}(n,e,t,r):function(o,s,a){return Hh(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(n,e,t)}function EB(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=dM(r.transform,i||null);o!=null&&(t===null&&(t=St.empty()),t.set(r.field,o))}return t||null}function KS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ta(r,i,(o,s)=>_B(o,s))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var bi=class extends sa{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},jn=class extends sa{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function mM(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function QS(n,e,t){let r=new Map;Y(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,vB(s,a,t[i]))}return r}function YS(n,e,t){let r=new Map;for(let i of n){let o=i.transform,s=t.data.field(i.field);r.set(i.field,yB(o,s,e))}return r}var Ti=class extends sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},_c=class extends sa{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var wc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&wB(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=lc(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=lc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=uM();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,a=this.applyToLocalView(s,o.mutatedFields);a=t.has(i.key)?null:a;let u=gM(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ue())}isEqual(e){return this.batchId===e.batchId&&ta(this.mutations,e.mutations,(t,r)=>KS(t,r))&&ta(this.baseMutations,e.baseMutations,(t,r)=>KS(t,r))}},a_=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Y(e.mutations.length===r.length);let i=function(){return pB}(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new n(e,t,r,i)}};var Ec=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var u_=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var it,Ee;function yM(n){switch(n){default:return K();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function vM(n){if(n===void 0)return Ze("GRPC error has no .code"),R.UNKNOWN;switch(n){case it.OK:return R.OK;case it.CANCELLED:return R.CANCELLED;case it.UNKNOWN:return R.UNKNOWN;case it.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case it.INTERNAL:return R.INTERNAL;case it.UNAVAILABLE:return R.UNAVAILABLE;case it.UNAUTHENTICATED:return R.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case it.NOT_FOUND:return R.NOT_FOUND;case it.ALREADY_EXISTS:return R.ALREADY_EXISTS;case it.PERMISSION_DENIED:return R.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case it.ABORTED:return R.ABORTED;case it.OUT_OF_RANGE:return R.OUT_OF_RANGE;case it.UNIMPLEMENTED:return R.UNIMPLEMENTED;case it.DATA_LOSS:return R.DATA_LOSS;default:return K()}}(Ee=it||(it={}))[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var ZS=null;function _M(){return new TextEncoder}var IB=new di([4294967295,4294967295],0);function JS(n){let e=_M().encode(n),t=new Dv;return t.update(e),new Uint8Array(t.digest())}function XS(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new di([t,r],0),new di([i,o],0)]}var c_=class n{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new yo(`Invalid padding: ${t}`);if(r<0)throw new yo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new yo(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new yo(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=di.fromNumber(this.Ie)}Ee(e,t,r){let i=e.add(t.multiply(di.fromNumber(r)));return i.compare(IB)===1&&(i=new di([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=JS(e),[r,i]=XS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);if(!this.de(s))return!1}return!0}static create(e,t,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new n(o,i,t);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Ie===0)return;let t=JS(e),[r,i]=XS(t);for(let o=0;o<this.hashCount;o++){let s=this.Ee(r,i,o);this.Ae(s)}}Ae(e){let t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}},yo=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Ic=class n{constructor(e,t,r,i,o){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let i=new Map;return i.set(e,Dc.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new n(ee.min(),i,new Ue(ae),on(),ue())}},Dc=class n{constructor(e,t,r,i,o){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new n(r,t,ue(),ue(),ue())}};var ea=class{constructor(e,t,r,i){this.Re=e,this.removedTargetIds=t,this.key=r,this.Ve=i}},rf=class{constructor(e,t){this.targetId=e,this.me=t}},of=class{constructor(e,t,r=et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}},sf=class{constructor(){this.fe=0,this.ge=tA(),this.pe=et.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ue(),t=ue(),r=ue();return this.ge.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:K()}}),new Dc(this.pe,this.ye,e,t,r)}Ce(){this.we=!1,this.ge=tA()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Y(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},l_=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=on(),this.qe=eA(),this.Qe=new Ue(ae)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let r=this.Ge(t);switch(e.state){case 0:this.ze(t)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),r.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((r,i)=>{this.ze(i)&&t(i)})}He(e){let t=e.targetId,r=e.me.count,i=this.Je(t);if(i){let o=i.target;if(ef(o))if(r===0){let s=new q(o.path);this.Ue(t,s,at.newNoDocument(s,ee.min()))}else Y(r===1);else{let s=this.Ye(t);if(s!==r){let a=this.Ze(e),u=a?this.Xe(a,e,s):1;if(u!==0){this.je(t);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}ZS?.et(function(h,p,m,y,b){var A,M,L,G,V,Z;let re={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},X=p.unchangedNames;return X&&(re.bloomFilter={applied:b===0,hashCount:(A=X?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(G=(L=(M=X?.bits)===null||M===void 0?void 0:M.bitmap)===null||L===void 0?void 0:L.length)!==null&&G!==void 0?G:0,padding:(Z=(V=X?.bits)===null||V===void 0?void 0:V.padding)!==null&&Z!==void 0?Z:0,mightContain:E=>{var v;return(v=y?.mightContain(E))!==null&&v!==void 0&&v}}),re}(s,e.me,this.Le.tt(),a,u))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=t,s,a;try{s=wi(r).toUint8Array()}catch(u){if(u instanceof Zh)return Vn("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new c_(s,i,o)}catch(u){return Vn(u instanceof yo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,t,r){return t.me.count===r-this.nt(e,t.targetId)?0:2}nt(e,t){let r=this.Le.getRemoteKeysForTarget(t),i=0;return r.forEach(o=>{let s=this.Le.tt(),a=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,o,null),i++)}),i}rt(e){let t=new Map;this.Be.forEach((o,s)=>{let a=this.Je(s);if(a){if(o.current&&ef(a.target)){let u=new q(a.target.path);this.ke.get(u)!==null||this.it(s,u)||this.Ue(s,u,at.newNoDocument(u,e))}o.be&&(t.set(s,o.ve()),o.Ce())}});let r=ue();this.qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.ke.forEach((o,s)=>s.setReadTime(e));let i=new Ic(e,t,this.Qe,this.ke,r);return this.ke=on(),this.qe=eA(),this.Qe=new Ue(ae),i}$e(e,t){if(!this.ze(e))return;let r=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,r),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,t)?i.Fe(t,1):i.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),r&&(this.ke=this.ke.insert(t,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new sf,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Fe(ae),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sf),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function eA(){return new Ue(q.comparator)}function tA(){return new Ue(q.comparator)}var DB={asc:"ASCENDING",desc:"DESCENDING"},CB={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bB={and:"AND",or:"OR"},d_=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function h_(n,e){return n.useProto3Json||kc(e)?e:{value:e}}function aa(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wM(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function TB(n,e){return aa(n,e.toTimestamp())}function Xe(n){return Y(!!n),ee.fromTimestamp(function(t){let r=Rr(t);return new ze(r.seconds,r.nanos)}(n))}function $w(n,e){return f_(n,e).canonicalString()}function f_(n,e){let t=function(i){return new Ie(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function EM(n){let e=Ie.fromString(n);return Y(RM(e)),e}function Cc(n,e){return $w(n.databaseId,e.path)}function rr(n,e){let t=EM(e);if(t.get(1)!==n.databaseId.projectId)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new k(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new q(CM(t))}function IM(n,e){return $w(n.databaseId,e)}function DM(n){let e=EM(n);return e.length===4?Ie.emptyPath():CM(e)}function p_(n){return new Ie(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function CM(n){return Y(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function nA(n,e,t){return{name:Cc(n,e),fields:t.value.mapValue.fields}}function bM(n,e,t){let r=rr(n,e.name),i=Xe(e.updateTime),o=e.createTime?Xe(e.createTime):ee.min(),s=new St({mapValue:{fields:e.fields}}),a=at.newFoundDocument(r,i,o,s);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function SB(n,e){return"found"in e?function(r,i){Y(!!i.found),i.found.name,i.found.updateTime;let o=rr(r,i.found.name),s=Xe(i.found.updateTime),a=i.found.createTime?Xe(i.found.createTime):ee.min(),u=new St({mapValue:{fields:i.found.fields}});return at.newFoundDocument(o,s,a,u)}(n,e):"missing"in e?function(r,i){Y(!!i.missing),Y(!!i.readTime);let o=rr(r,i.missing),s=Xe(i.readTime);return at.newNoDocument(o,s)}(n,e):K()}function AB(n,e){let t;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,h){return l.useProto3Json?(Y(h===void 0||typeof h=="string"),et.fromBase64String(h||"")):(Y(h===void 0||h instanceof Buffer||h instanceof Uint8Array),et.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){let h=l.code===void 0?R.UNKNOWN:vM(l.code);return new k(h,l.message||"")}(s);t=new of(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=rr(n,r.document.name),o=Xe(r.document.updateTime),s=r.document.createTime?Xe(r.document.createTime):ee.min(),a=new St({mapValue:{fields:r.document.fields}}),u=at.newFoundDocument(i,o,s,a),l=r.targetIds||[],h=r.removedTargetIds||[];t=new ea(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=rr(n,r.document),o=r.readTime?Xe(r.readTime):ee.min(),s=at.newNoDocument(i,o),a=r.removedTargetIds||[];t=new ea([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=rr(n,r.document),o=r.removedTargetIds||[];t=new ea([],o,i,null)}else{if(!("filter"in e))return K();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new u_(i,o),a=r.targetId;t=new rf(a,s)}}return t}function bc(n,e){let t;if(e instanceof bi)t={update:nA(n,e.key,e.value)};else if(e instanceof Ti)t={delete:Cc(n,e.key)};else if(e instanceof jn)t={update:nA(n,e.key,e.data),updateMask:kB(e.fieldMask)};else{if(!(e instanceof _c))return K();t={verify:Cc(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,s){let a=s.transform;if(a instanceof Di)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Nr)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Pr)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ci)return{fieldPath:s.field.canonicalString(),increment:a.Pe};throw K()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:TB(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:K()}(n,e.precondition)),t}function g_(n,e){let t=e.currentDocument?function(o){return o.updateTime!==void 0?Ye.updateTime(Xe(o.updateTime)):o.exists!==void 0?Ye.exists(o.exists):Ye.none()}(e.currentDocument):Ye.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)Y(a.setToServerValue==="REQUEST_TIME"),u=new Di;else if("appendMissingElements"in a){let h=a.appendMissingElements.values||[];u=new Nr(h)}else if("removeAllFromArray"in a){let h=a.removeAllFromArray.values||[];u=new Pr(h)}else"increment"in a?u=new Ci(s,a.increment):K();let l=Je.fromServerFormat(a.fieldPath);return new Do(l,u)}(n,i)):[];if(e.update){e.update.name;let i=rr(n,e.update.name),o=new St({mapValue:{fields:e.update.fields}});if(e.updateMask){let s=function(u){let l=u.fieldPaths||[];return new pn(l.map(h=>Je.fromServerFormat(h)))}(e.updateMask);return new jn(i,o,s,t,r)}return new bi(i,o,t,r)}if(e.delete){let i=rr(n,e.delete);return new Ti(i,t)}if(e.verify){let i=rr(n,e.verify);return new _c(i,t)}return K()}function MB(n,e){return n&&n.length>0?(Y(e!==void 0),n.map(t=>function(i,o){let s=i.updateTime?Xe(i.updateTime):Xe(o);return s.isEqual(ee.min())&&(s=Xe(o)),new s_(s,i.transformResults||[])}(t,e))):[]}function TM(n,e){return{documents:[IM(n,e.path)]}}function SM(n,e){let t={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=IM(n,i);let o=function(l){if(l.length!==0)return xM(Re.create(l,"and"))}(e.filters);o&&(t.structuredQuery.where=o);let s=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:Ks(m.field),direction:RB(m.dir)}}(h))}(e.orderBy);s&&(t.structuredQuery.orderBy=s);let a=h_(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:i}}function AM(n){let e=DM(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){Y(r===1);let h=t.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let o=[];t.where&&(o=function(p){let m=MM(p);return m instanceof Re&&Lw(m)?m.getFilters():[m]}(t.where));let s=[];t.orderBy&&(s=function(p){return p.map(m=>function(b){return new Eo(Qs(b.field),function(M){switch(M){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,kc(m)?null:m}(t.limit));let u=null;t.startAt&&(u=function(p){let m=!!p.before,y=p.values||[];return new sr(y,m)}(t.startAt));let l=null;return t.endAt&&(l=function(p){let m=!p.before,y=p.values||[];return new sr(y,m)}(t.endAt)),nM(e,i,s,o,a,"F",u,l)}function xB(n,e){let t=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function MM(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Qs(t.unaryFilter.field);return _e.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Qs(t.unaryFilter.field);return _e.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Qs(t.unaryFilter.field);return _e.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Qs(t.unaryFilter.field);return _e.create(s,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return _e.create(Qs(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Re.create(t.compositeFilter.filters.map(r=>MM(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function RB(n){return DB[n]}function NB(n){return CB[n]}function PB(n){return bB[n]}function Ks(n){return{fieldPath:n.canonicalString()}}function Qs(n){return Je.fromServerFormat(n.fieldPath)}function xM(n){return n instanceof _e?function(t){if(t.op==="=="){if(jS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NAN"}};if(LS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(jS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NOT_NAN"}};if(LS(t.value))return{unaryFilter:{field:Ks(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ks(t.field),op:NB(t.op),value:t.value}}}(n):n instanceof Re?function(t){let r=t.getFilters().map(i=>xM(i));return r.length===1?r[0]:{compositeFilter:{op:PB(t.op),filters:r}}}(n):K()}function kB(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function RM(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var ua=class n{constructor(e,t,r,i,o=ee.min(),s=ee.min(),a=et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var af=class{constructor(e){this.ct=e}};function OB(n,e){let t;if(e.document)t=bM(n.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){let r=q.fromSegments(e.noDocument.path),i=bo(e.noDocument.readTime);t=at.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return K();{let r=q.fromSegments(e.unknownDocument.path),i=bo(e.unknownDocument.version);t=at.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(i){let o=new ze(i[0],i[1]);return ee.fromTimestamp(o)}(e.readTime)),t}function rA(n,e){let t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:uf(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:Cc(o,s.key),fields:s.data.value.mapValue.fields,updateTime:aa(o,s.version.toTimestamp()),createTime:aa(o,s.createTime.toTimestamp())}}(n.ct,e);else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Co(e.version)};else{if(!e.isUnknownDocument())return K();r.unknownDocument={path:t.path.toArray(),version:Co(e.version)}}return r}function uf(n){let e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Co(n){let e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bo(n){let e=new ze(n.seconds,n.nanoseconds);return ee.fromTimestamp(e)}function po(n,e){let t=(e.baseMutations||[]).map(o=>g_(n.ct,o));for(let o=0;o<e.mutations.length-1;++o){let s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){let a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}let r=e.mutations.map(o=>g_(n.ct,o)),i=ze.fromMillis(e.localWriteTimeMs);return new wc(e.batchId,i,t,r)}function ac(n){let e=bo(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?bo(n.lastLimboFreeSnapshotVersion):ee.min(),r;return r=function(o){return o.documents!==void 0}(n.query)?function(o){return Y(o.documents.length===1),Ut(_a(DM(o.documents[0])))}(n.query):function(o){return Ut(AM(o))}(n.query),new ua(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,et.fromBase64String(n.resumeToken))}function NM(n,e){let t=Co(e.snapshotVersion),r=Co(e.lastLimboFreeSnapshotVersion),i;i=ef(e.target)?TM(n.ct,e.target):SM(n.ct,e.target)._t;let o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Io(e.target),readTime:t,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Hw(n){let e=AM({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?nf(e,e.limit,"L"):e}function Mv(n,e){return new Ec(e.largestBatchId,g_(n.ct,e.overlayMutation))}function iA(n,e){let t=e.path.lastSegment();return[n,Bt(e.path.popLast()),t]}function oA(n,e,t,r){return{indexId:n,uid:e,sequenceNumber:t,readTime:Co(r.readTime),documentKey:Bt(r.documentKey.path),largestBatchId:r.largestBatchId}}var m_=class{getBundleMetadata(e,t){return sA(e).get(t).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:bo(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,t){return sA(e).put(function(i){return{bundleId:i.id,createTime:Co(Xe(i.createTime)),version:i.version}}(t))}getNamedQuery(e,t){return aA(e).get(t).next(r=>{if(r)return function(o){return{name:o.name,query:Hw(o.bundledQuery),readTime:bo(o.readTime)}}(r)})}saveNamedQuery(e,t){return aA(e).put(function(i){return{name:i.name,readTime:Co(Xe(i.readTime)),bundledQuery:i.bundledQuery}}(t))}};function sA(n){return dt(n,"bundles")}function aA(n){return dt(n,"namedQueries")}var cf=class n{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){let r=t.uid||"";return new n(e,r)}getOverlay(e,t){return nc(e).get(iA(this.userId,t)).next(r=>r?Mv(this.serializer,r):null)}getOverlays(e,t){let r=tr();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){let i=[];return r.forEach((o,s)=>{let a=new Ec(t,s);i.push(this.ht(e,a))}),S.waitFor(i)}removeOverlaysForBatchId(e,t,r){let i=new Set;t.forEach(s=>i.add(Bt(s.getCollectionPath())));let o=[];return i.forEach(s=>{let a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(nc(e).j("collectionPathOverlayIndex",a))}),S.waitFor(o)}getOverlaysForCollection(e,t,r){let i=tr(),o=Bt(t),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return nc(e).U("collectionPathOverlayIndex",s).next(a=>{for(let u of a){let l=Mv(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,t,r,i){let o=tr(),s,a=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return nc(e).J({index:"collectionGroupOverlayIndex",range:a},(u,l,h)=>{let p=Mv(this.serializer,l);o.size()<i||p.largestBatchId===s?(o.set(p.getKey(),p),s=p.largestBatchId):h.done()}).next(()=>o)}ht(e,t){return nc(e).put(function(i,o,s){let[a,u,l]=iA(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:bc(i.ct,s.mutation)}}(this.serializer,this.userId,t))}};function nc(n){return dt(n,"documentOverlays")}var y_=class{Pt(e){return dt(e,"globals")}getSessionToken(e){return this.Pt(e).get("sessionToken").next(t=>{let r=t?.value;return r?et.fromUint8Array(r):et.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.Pt(e).put({name:"sessionToken",value:t.toUint8Array()})}};var Mr=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(He(e.integerValue));else if("doubleValue"in e){let r=He(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),pc(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Rr(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(wi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?KA(e)?this.dt(t,Number.MAX_SAFE_INTEGER):qf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let s="value",a=((i=(r=o[s].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(He(a)),this.Vt(s,t),this.Tt(o[s],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),q.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Mr.vt=new Mr;function FB(n){if(n===0)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function uA(n){let e=64-function(r){let i=0;for(let o=0;o<8;++o){let s=FB(255&r[o]);if(i+=s,s!==8)break}return i}(n);return Math.ceil(e/8)}var v_=class{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ct(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ft(r.value),r=t.next();this.Mt()}xt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ot(r.value),r=t.next();this.Nt()}Lt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ft(r);else if(r<2048)this.Ft(960|r>>>6),this.Ft(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ft(480|r>>>12),this.Ft(128|63&r>>>6),this.Ft(128|63&r);else{let i=t.codePointAt(0);this.Ft(240|i>>>18),this.Ft(128|63&i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i)}}this.Mt()}Bt(e){for(let t of e){let r=t.charCodeAt(0);if(r<128)this.Ot(r);else if(r<2048)this.Ot(960|r>>>6),this.Ot(128|63&r);else if(t<"\uD800"||"\uDBFF"<t)this.Ot(480|r>>>12),this.Ot(128|63&r>>>6),this.Ot(128|63&r);else{let i=t.codePointAt(0);this.Ot(240|i>>>18),this.Ot(128|63&i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i)}}this.Nt()}kt(e){let t=this.qt(e),r=uA(t);this.Qt(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Kt(e){let t=this.qt(e),r=uA(t);this.Qt(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}$t(){this.Ut(255),this.Ut(255)}Wt(){this.Gt(255),this.Gt(255)}reset(){this.position=0}seed(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}zt(){return this.buffer.slice(0,this.position)}qt(e){let t=function(o){let s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&t[0])!=0;t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ft(e){let t=255&e;t===0?(this.Ut(0),this.Ut(255)):t===255?(this.Ut(255),this.Ut(0)):this.Ut(t)}Ot(e){let t=255&e;t===0?(this.Gt(0),this.Gt(255)):t===255?(this.Gt(255),this.Gt(0)):this.Gt(e)}Mt(){this.Ut(0),this.Ut(1)}Nt(){this.Gt(0),this.Gt(1)}Ut(e){this.Qt(1),this.buffer[this.position++]=e}Gt(e){this.Qt(1),this.buffer[this.position++]=~e}Qt(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}},__=class{constructor(e){this.jt=e}gt(e){this.jt.Ct(e)}Rt(e){this.jt.Lt(e)}At(e){this.jt.kt(e)}Et(){this.jt.$t()}},w_=class{constructor(e){this.jt=e}gt(e){this.jt.xt(e)}Rt(e){this.jt.Bt(e)}At(e){this.jt.Kt(e)}Et(){this.jt.Wt()}},go=class{constructor(){this.jt=new v_,this.Ht=new __(this.jt),this.Jt=new w_(this.jt)}seed(e){this.jt.seed(e)}Yt(e){return e===0?this.Ht:this.Jt}zt(){return this.jt.zt()}reset(){this.jt.reset()}};var mo=class n{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Zt(){let e=this.directionalValue.length,t=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new n(this.indexId,this.documentKey,this.arrayValue,r)}};function hi(n,e){let t=n.indexId-e.indexId;return t!==0?t:(t=cA(n.arrayValue,e.arrayValue),t!==0?t:(t=cA(n.directionalValue,e.directionalValue),t!==0?t:q.comparator(n.documentKey,e.documentKey)))}function cA(n,e){for(let t=0;t<n.length&&t<e.length;++t){let r=n[t]-e[t];if(r!==0)return r}return n.length-e.length}var lf=class{constructor(e){this.Xt=new Fe((t,r)=>Je.comparator(t.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.en=e.orderBy,this.tn=[];for(let t of e.filters){let r=t;r.isInequality()?this.Xt=this.Xt.add(r):this.tn.push(r)}}get nn(){return this.Xt.size>1}rn(e){if(Y(e.collectionGroup===this.collectionId),this.nn)return!1;let t=Uv(e);if(t!==void 0&&!this.sn(t))return!1;let r=ho(e),i=new Set,o=0,s=0;for(;o<r.length&&this.sn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Xt.size>0){let a=this.Xt.getIterator().getNext();if(!i.has(a.field.canonicalString())){let u=r[o];if(!this.on(a,u)||!this._n(this.en[s++],u))return!1}++o}for(;o<r.length;++o){let a=r[o];if(s>=this.en.length||!this._n(this.en[s++],a))return!1}return!0}an(){if(this.nn)return null;let e=new Fe(Je.comparator),t=[];for(let r of this.tn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")t.push(new Js(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new Js(r.field,0))}for(let r of this.en)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new Js(r.field,r.dir==="asc"?0:1)));return new na(na.UNKNOWN_ID,this.collectionId,t,fc.empty())}sn(e){for(let t of this.tn)if(this.on(t,e))return!0;return!1}on(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;let r=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===r}_n(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}};function PM(n){var e,t;if(Y(n instanceof _e||n instanceof Re),n instanceof _e){if(n instanceof Xh){let i=((t=(e=n.value.arrayValue)===null||e===void 0?void 0:e.values)===null||t===void 0?void 0:t.map(o=>_e.create(n.field,"==",o)))||[];return Re.create(i,"or")}return n}let r=n.filters.map(i=>PM(i));return Re.create(r,n.op)}function VB(n){if(n.getFilters().length===0)return[];let e=D_(PM(n));return Y(kM(e)),E_(e)||I_(e)?[e]:e.getFilters()}function E_(n){return n instanceof _e}function I_(n){return n instanceof Re&&Lw(n)}function kM(n){return E_(n)||I_(n)||function(t){if(t instanceof Re&&Qv(t)){for(let r of t.getFilters())if(!E_(r)&&!I_(r))return!1;return!0}return!1}(n)}function D_(n){if(Y(n instanceof _e||n instanceof Re),n instanceof _e)return n;if(n.filters.length===1)return D_(n.filters[0]);let e=n.filters.map(r=>D_(r)),t=Re.create(e,n.op);return t=df(t),kM(t)?t:(Y(t instanceof Re),Y(ia(t)),Y(t.filters.length>1),t.filters.reduce((r,i)=>qw(r,i)))}function qw(n,e){let t;return Y(n instanceof _e||n instanceof Re),Y(e instanceof _e||e instanceof Re),t=n instanceof _e?e instanceof _e?function(i,o){return Re.create([i,o],"and")}(n,e):lA(n,e):e instanceof _e?lA(e,n):function(i,o){if(Y(i.filters.length>0&&o.filters.length>0),ia(i)&&ia(o))return XA(i,o.getFilters());let s=Qv(i)?i:o,a=Qv(i)?o:i,u=s.filters.map(l=>qw(l,a));return Re.create(u,"or")}(n,e),df(t)}function lA(n,e){if(ia(e))return XA(e,n.getFilters());{let t=e.filters.map(r=>qw(n,r));return Re.create(t,"or")}}function df(n){if(Y(n instanceof _e||n instanceof Re),n instanceof _e)return n;let e=n.getFilters();if(e.length===1)return df(e[0]);if(ZA(n))return n;let t=e.map(i=>df(i)),r=[];return t.forEach(i=>{i instanceof _e?r.push(i):i instanceof Re&&(i.op===n.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:Re.create(r,n.op)}var C_=class{constructor(){this.un=new Tc}addToCollectionParentIndex(e,t){return this.un.add(t),S.resolve()}getCollectionParents(e,t){return S.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return S.resolve()}deleteFieldIndex(e,t){return S.resolve()}deleteAllFieldIndexes(e){return S.resolve()}createTargetIndexes(e,t){return S.resolve()}getDocumentsMatchingTarget(e,t){return S.resolve(null)}getIndexType(e,t){return S.resolve(0)}getFieldIndexes(e,t){return S.resolve([])}getNextCollectionGroupToUpdate(e){return S.resolve(null)}getMinOffset(e,t){return S.resolve(Cn.min())}getMinOffsetFromCollectionGroup(e,t){return S.resolve(Cn.min())}updateCollectionGroup(e,t,r){return S.resolve()}updateIndexEntries(e,t){return S.resolve()}},Tc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Fe(Ie.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Fe(Ie.comparator)).toArray()}};var Fh=new Uint8Array(0),b_=class{constructor(e,t){this.databaseId=t,this.cn=new Tc,this.ln=new ar(r=>Io(r),(r,i)=>Oc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.cn.has(t)){let r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.cn.add(t)});let o={collectionId:r,parent:Bt(i)};return dA(e).put(o)}return S.resolve()}getCollectionParents(e,t){let r=[],i=IDBKeyRange.bound([t,""],[FA(t),""],!1,!0);return dA(e).U(i).next(o=>{for(let s of o){if(s.collectionId!==t)break;r.push(er(s.parent))}return r})}addFieldIndex(e,t){let r=rc(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(t);delete i.indexId;let o=r.add(i);if(t.indexState){let s=qs(e);return o.next(a=>{s.put(oA(a,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return o.next()}deleteFieldIndex(e,t){let r=rc(e),i=qs(e),o=Hs(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=rc(e),r=Hs(e),i=qs(e);return t.j().next(()=>r.j()).next(()=>i.j())}createTargetIndexes(e,t){return S.forEach(this.hn(t),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){let o=new lf(r).an();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,t){let r=Hs(e),i=!0,o=new Map;return S.forEach(this.hn(t),s=>this.Pn(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=ue(),a=[];return S.forEach(o,(u,l)=>{O("IndexedDbIndexManager",`Using index ${function(V){return`id=${V.indexId}|cg=${V.collectionGroup}|f=${V.fields.map(Z=>`${Z.fieldPath}:${Z.kind}`).join(",")}`}(u)} to execute ${Io(t)}`);let h=function(V,Z){let re=Uv(Z);if(re===void 0)return null;for(let X of tf(V,re.fieldPath))switch(X.op){case"array-contains-any":return X.value.arrayValue.values||[];case"array-contains":return[X.value]}return null}(l,u),p=function(V,Z){let re=new Map;for(let X of ho(Z))for(let E of tf(V,X.fieldPath))switch(E.op){case"==":case"in":re.set(X.fieldPath.canonicalString(),E.value);break;case"not-in":case"!=":return re.set(X.fieldPath.canonicalString(),E.value),Array.from(re.values())}return null}(l,u),m=function(V,Z){let re=[],X=!0;for(let E of ho(Z)){let v=E.kind===0?qS(V,E.fieldPath,V.startAt):zS(V,E.fieldPath,V.startAt);re.push(v.value),X&&(X=v.inclusive)}return new sr(re,X)}(l,u),y=function(V,Z){let re=[],X=!0;for(let E of ho(Z)){let v=E.kind===0?zS(V,E.fieldPath,V.endAt):qS(V,E.fieldPath,V.endAt);re.push(v.value),X&&(X=v.inclusive)}return new sr(re,X)}(l,u),b=this.In(u,l,m),A=this.In(u,l,y),M=this.Tn(u,l,p),L=this.En(u.indexId,h,b,m.inclusive,A,y.inclusive,M);return S.forEach(L,G=>r.G(G,t.limit).next(V=>{V.forEach(Z=>{let re=q.fromSegments(Z.documentKey);s.has(re)||(s=s.add(re),a.push(re))})}))}).next(()=>a)}return S.resolve(null)})}hn(e){let t=this.ln.get(e);return t||(e.filters.length===0?t=[e]:t=VB(Re.create(e.filters,"and")).map(r=>i_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.ln.set(e,t),t)}En(e,t,r,i,o,s,a){let u=(t!=null?t.length:1)*Math.max(r.length,o.length),l=u/(t!=null?t.length:1),h=[];for(let p=0;p<u;++p){let m=t?this.dn(t[p/l]):Fh,y=this.An(e,m,r[p%l],i),b=this.Rn(e,m,o[p%l],s),A=a.map(M=>this.An(e,m,M,!0));h.push(...this.createRange(y,b,A))}return h}An(e,t,r,i){let o=new mo(e,q.empty(),t,r);return i?o:o.Zt()}Rn(e,t,r,i){let o=new mo(e,q.empty(),t,r);return i?o.Zt():o}Pn(e,t){let r=new lf(t),i=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(let a of o)r.rn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,t){let r=2,i=this.hn(t);return S.forEach(i,o=>this.Pn(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Fe(Je.comparator),h=!1;for(let p of u.filters)for(let m of p.getFlattenedFilters())m.field.isKeyField()||(m.op==="array-contains"||m.op==="array-contains-any"?h=!0:l=l.add(m.field));for(let p of u.orderBy)p.field.isKeyField()||(l=l.add(p.field));return l.size+(h?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(t)&&i.length>1&&r===2?1:r)}Vn(e,t){let r=new go;for(let i of ho(e)){let o=t.data.field(i.fieldPath);if(o==null)return null;let s=r.Yt(i.kind);Mr.vt.It(o,s)}return r.zt()}dn(e){let t=new go;return Mr.vt.It(e,t.Yt(0)),t.zt()}mn(e,t){let r=new go;return Mr.vt.It(wo(this.databaseId,t),r.Yt(function(o){let s=ho(o);return s.length===0?0:s[s.length-1].kind}(e))),r.zt()}Tn(e,t,r){if(r===null)return[];let i=[];i.push(new go);let o=0;for(let s of ho(e)){let a=r[o++];for(let u of i)if(this.fn(t,s.fieldPath)&&vc(a))i=this.gn(i,s,a);else{let l=u.Yt(s.kind);Mr.vt.It(a,l)}}return this.pn(i)}In(e,t,r){return this.Tn(e,t,r.position)}pn(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].zt();return t}gn(e,t,r){let i=[...e],o=[];for(let s of r.arrayValue.values||[])for(let a of i){let u=new go;u.seed(a.zt()),Mr.vt.It(s,u.Yt(t.kind)),o.push(u)}return o}fn(e,t){return!!e.filters.find(r=>r instanceof _e&&r.field.isEqual(t)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,t){let r=rc(e),i=qs(e);return(t?r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.U()).next(o=>{let s=[];return S.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(h,p){let m=p?new fc(p.sequenceNumber,new Cn(bo(p.readTime),new q(er(p.documentKey)),p.largestBatchId)):fc.empty(),y=h.fields.map(([b,A])=>new Js(Je.fromServerFormat(b),A));return new na(h.indexId,h.collectionGroup,y,m)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>t.length===0?null:(t.sort((r,i)=>{let o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:ae(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){let i=rc(e),o=qs(e);return this.yn(e).next(s=>i.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(a=>S.forEach(a,u=>o.put(oA(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,t){let r=new Map;return S.forEach(t,(i,o)=>{let s=r.get(i.collectionGroup);return(s?S.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),S.forEach(a,u=>this.wn(e,i,u).next(l=>{let h=this.Sn(o,u);return l.isEqual(h)?S.resolve():this.bn(e,o,u,l,h)}))))})}Dn(e,t,r,i){return Hs(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.mn(r,t.key),documentKey:t.key.path.toArray()})}vn(e,t,r,i){return Hs(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.mn(r,t.key),t.key.path.toArray()])}wn(e,t,r){let i=Hs(e),o=new Fe(hi);return i.J({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.mn(r,t)])},(s,a)=>{o=o.add(new mo(r.indexId,t,a.arrayValue,a.directionalValue))}).next(()=>o)}Sn(e,t){let r=new Fe(hi),i=this.Vn(t,e);if(i==null)return r;let o=Uv(t);if(o!=null){let s=e.data.field(o.fieldPath);if(vc(s))for(let a of s.arrayValue.values||[])r=r.add(new mo(t.indexId,e.key,this.dn(a),i))}else r=r.add(new mo(t.indexId,e.key,Fh,i));return r}bn(e,t,r,i,o){O("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);let s=[];return function(u,l,h,p,m){let y=u.getIterator(),b=l.getIterator(),A=$s(y),M=$s(b);for(;A||M;){let L=!1,G=!1;if(A&&M){let V=h(A,M);V<0?G=!0:V>0&&(L=!0)}else A!=null?G=!0:L=!0;L?(p(M),M=$s(b)):G?(m(A),A=$s(y)):(A=$s(y),M=$s(b))}}(i,o,hi,a=>{s.push(this.Dn(e,t,r,a))},a=>{s.push(this.vn(e,t,r,a))}),S.waitFor(s)}yn(e){let t=1;return qs(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((s,a)=>hi(s,a)).filter((s,a,u)=>!a||hi(s,u[a-1])!==0);let i=[];i.push(e);for(let s of r){let a=hi(s,e),u=hi(s,t);if(a===0)i[0]=e.Zt();else if(a>0&&u<0)i.push(s),i.push(s.Zt());else if(u>0)break}i.push(t);let o=[];for(let s=0;s<i.length;s+=2){if(this.Cn(i[s],i[s+1]))return[];let a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Fh,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Fh,[]];o.push(IDBKeyRange.bound(a,u))}return o}Cn(e,t){return hi(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(hA)}getMinOffset(e,t){return S.mapArray(this.hn(t),r=>this.Pn(e,r).next(i=>i||K())).next(hA)}};function dA(n){return dt(n,"collectionParents")}function Hs(n){return dt(n,"indexEntries")}function rc(n){return dt(n,"indexConfiguration")}function qs(n){return dt(n,"indexState")}function hA(n){Y(n.length!==0);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){let i=n[r].indexState.offset;kw(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Cn(e.readTime,e.documentKey,t)}var fA={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Dn=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};function OM(n,e,t){let r=n.store("mutations"),i=n.store("documentMutations"),o=[],s=IDBKeyRange.only(t.batchId),a=0,u=r.J({range:s},(h,p,m)=>(a++,m.delete()));o.push(u.next(()=>{Y(a===1)}));let l=[];for(let h of t.mutations){let p=$A(e,h.key.path,t.batchId);o.push(i.delete(p)),l.push(h.key)}return S.waitFor(o).next(()=>l)}function hf(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw K();e=n.noDocument}return JSON.stringify(e).length}Dn.DEFAULT_COLLECTION_PERCENTILE=10,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Dn.DEFAULT=new Dn(41943040,Dn.DEFAULT_COLLECTION_PERCENTILE,Dn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Dn.DISABLED=new Dn(-1,0,0);var ff=class n{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Fn={}}static lt(e,t,r,i){Y(e.uid!=="");let o=e.isAuthenticated()?e.uid:"";return new n(o,t,r,i)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return fi(e).J({index:"userMutationsIndex",range:r},(i,o,s)=>{t=!1,s.done()}).next(()=>t)}addMutationBatch(e,t,r,i){let o=Ys(e),s=fi(e);return s.add({}).next(a=>{Y(typeof a=="number");let u=new wc(a,t,r,i),l=function(y,b,A){let M=A.baseMutations.map(G=>bc(y.ct,G)),L=A.mutations.map(G=>bc(y.ct,G));return{userId:b,batchId:A.batchId,localWriteTimeMs:A.localWriteTime.toMillis(),baseMutations:M,mutations:L}}(this.serializer,this.userId,u),h=[],p=new Fe((m,y)=>ae(m.canonicalString(),y.canonicalString()));for(let m of i){let y=$A(this.userId,m.key.path,a);p=p.add(m.key.path.popLast()),h.push(s.put(l)),h.push(o.put(y,Hj))}return p.forEach(m=>{h.push(this.indexManager.addToCollectionParentIndex(e,m))}),e.addOnCommittedListener(()=>{this.Fn[a]=u.keys()}),S.waitFor(h).next(()=>u)})}lookupMutationBatch(e,t){return fi(e).get(t).next(r=>r?(Y(r.userId===this.userId),po(this.serializer,r)):null)}Mn(e,t){return this.Fn[t]?S.resolve(this.Fn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){let i=r.keys();return this.Fn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return fi(e).J({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(Y(a.batchId>=r),o=po(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return fi(e).J({index:"userMutationsIndex",range:t,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return fi(e).U("userMutationsIndex",t).next(r=>r.map(i=>po(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=Bh(this.userId,t.path),i=IDBKeyRange.lowerBound(r),o=[];return Ys(e).J({range:i},(s,a,u)=>{let[l,h,p]=s,m=er(h);if(l===this.userId&&t.path.isEqual(m))return fi(e).get(p).next(y=>{if(!y)throw K();Y(y.userId===this.userId),o.push(po(this.serializer,y))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fe(ae),i=[];return t.forEach(o=>{let s=Bh(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=Ys(e).J({range:a},(l,h,p)=>{let[m,y,b]=l,A=er(y);m===this.userId&&o.path.isEqual(A)?r=r.add(b):p.done()});i.push(u)}),S.waitFor(i).next(()=>this.xn(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=Bh(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new Fe(ae);return Ys(e).J({range:s},(u,l,h)=>{let[p,m,y]=u,b=er(m);p===this.userId&&r.isPrefixOf(b)?b.length===i&&(a=a.add(y)):h.done()}).next(()=>this.xn(e,a))}xn(e,t){let r=[],i=[];return t.forEach(o=>{i.push(fi(e).get(o).next(s=>{if(s===null)throw K();Y(s.userId===this.userId),r.push(po(this.serializer,s))}))}),S.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return OM(e._e,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.On(t.batchId)}),S.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}On(e){delete this.Fn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return S.resolve();let r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return Ys(e).J({range:r},(o,s,a)=>{if(o[0]===this.userId){let u=er(o[1]);i.push(u)}else a.done()}).next(()=>{Y(i.length===0)})})}containsKey(e,t){return FM(e,this.userId,t)}Nn(e){return VM(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}};function FM(n,e,t){let r=Bh(e,t.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Ys(n).J({range:o,H:!0},(a,u,l)=>{let[h,p,m]=a;h===e&&p===i&&(s=!0),l.done()}).next(()=>s)}function fi(n){return dt(n,"mutations")}function Ys(n){return dt(n,"documentMutations")}function VM(n){return dt(n,"mutationQueues")}var ca=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var T_=class{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.qn(e).next(t=>{let r=new ca(t.highestTargetId);return t.highestTargetId=r.next(),this.Qn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.qn(e).next(t=>ee.fromTimestamp(new ze(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.qn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.qn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Qn(e,i)))}addTargetData(e,t){return this.Kn(e,t).next(()=>this.qn(e).next(r=>(r.targetCount+=1,this.$n(t,r),this.Qn(e,r))))}updateTargetData(e,t){return this.Kn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>zs(e).delete(t.targetId)).next(()=>this.qn(e)).next(r=>(Y(r.targetCount>0),r.targetCount-=1,this.Qn(e,r)))}removeTargets(e,t,r){let i=0,o=[];return zs(e).J((s,a)=>{let u=ac(a);u.sequenceNumber<=t&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>S.waitFor(o)).next(()=>i)}forEachTarget(e,t){return zs(e).J((r,i)=>{let o=ac(i);t(o)})}qn(e){return pA(e).get("targetGlobalKey").next(t=>(Y(t!==null),t))}Qn(e,t){return pA(e).put("targetGlobalKey",t)}Kn(e,t){return zs(e).put(NM(this.serializer,t))}$n(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.qn(e).next(t=>t.targetCount)}getTargetData(e,t){let r=Io(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return zs(e).J({range:i,index:"queryTargetsIndex"},(s,a,u)=>{let l=ac(a);Oc(t,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,t,r){let i=[],o=pi(e);return t.forEach(s=>{let a=Bt(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),S.waitFor(i)}removeMatchingKeys(e,t,r){let i=pi(e);return S.forEach(t,o=>{let s=Bt(o.path);return S.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,t){let r=pi(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),i=pi(e),o=ue();return i.J({range:r,H:!0},(s,a,u)=>{let l=er(s[1]),h=new q(l);o=o.add(h)}).next(()=>o)}containsKey(e,t){let r=Bt(t.path),i=IDBKeyRange.bound([r],[FA(r)],!1,!0),o=0;return pi(e).J({index:"documentTargetsIndex",H:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}ot(e,t){return zs(e).get(t).next(r=>r?ac(r):null)}};function zs(n){return dt(n,"targets")}function pA(n){return dt(n,"targetGlobal")}function pi(n){return dt(n,"targetDocuments")}function gA([n,e],[t,r]){let i=ae(n,t);return i===0?ae(e,r):i}var S_=class{constructor(e){this.Un=e,this.buffer=new Fe(gA),this.Wn=0}Gn(){return++this.Wn}zn(e){let t=[e,this.Gn()];if(this.buffer.size<this.Un)this.buffer=this.buffer.add(t);else{let r=this.buffer.last();gA(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}},A_=class{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Hn(6e4)}stop(){this.jn&&(this.jn.cancel(),this.jn=null)}get started(){return this.jn!==null}Hn(e){O("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,()=>N(this,null,function*(){this.jn=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(t){Mi(t)?O("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):yield Ai(t)}yield this.Hn(3e5)}))}},M_=class{constructor(e,t){this.Jn=e,this.params=t}calculateTargetCount(e,t){return this.Jn.Yn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return S.resolve(fn.oe);let r=new S_(t);return this.Jn.forEachTarget(e,i=>r.zn(i.sequenceNumber)).next(()=>this.Jn.Zn(e,i=>r.zn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Jn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(O("LruGarbageCollector","Garbage collection skipped; disabled"),S.resolve(fA)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(O("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fA):this.Xn(e,t))}getCacheSize(e){return this.Jn.getCacheSize(e)}Xn(e,t){let r,i,o,s,a,u,l,h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(O("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,a=Date.now(),this.removeTargets(e,r,t))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Gs()<=$n.DEBUG&&O("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-h}ms
	Determined least recently used ${i} in `+(a-s)+`ms
	Removed ${o} targets in `+(u-a)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-h}ms`),S.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function LB(n,e){return new M_(n,e)}var x_=class{constructor(e,t){this.db=e,this.garbageCollector=LB(this,t)}Yn(e){let t=this.er(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}er(e){let t=0;return this.Zn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Zn(e,t){return this.tr(e,(r,i)=>t(i))}addReference(e,t,r){return Vh(e,r)}removeReference(e,t,r){return Vh(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Vh(e,t)}nr(e,t){return function(i,o){let s=!1;return VM(i).Y(a=>FM(i,a,o).next(u=>(u&&(s=!0),S.resolve(!u)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.tr(e,(s,a)=>{if(a<=t){let u=this.nr(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,ee.min()),pi(e).delete(function(p){return[0,Bt(p.path)]}(s))))});i.push(u)}}).next(()=>S.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Vh(e,t)}tr(e,t){let r=pi(e),i,o=fn.oe;return r.J({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==fn.oe&&t(new q(er(i)),o),o=l,i=u):o=fn.oe}).next(()=>{o!==fn.oe&&t(new q(er(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}};function Vh(n,e){return pi(n).put(function(r,i){return{targetId:0,path:Bt(r.path),sequenceNumber:i}}(e,n.currentSequenceNumber))}var pf=class{constructor(){this.changes=new ar(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,at.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?S.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var R_=class{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return lo(e).put(r)}removeEntry(e,t,r){return lo(e).delete(function(o,s){let a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],uf(s),a[a.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.rr(e,r)))}getEntry(e,t){let r=at.newInvalidDocument(t);return lo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ic(t))},(i,o)=>{r=this.ir(t,o)}).next(()=>r)}sr(e,t){let r={size:0,document:at.newInvalidDocument(t)};return lo(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(ic(t))},(i,o)=>{r={document:this.ir(t,o),size:hf(o)}}).next(()=>r)}getEntries(e,t){let r=on();return this._r(e,t,(i,o)=>{let s=this.ir(i,o);r=r.insert(i,s)}).next(()=>r)}ar(e,t){let r=on(),i=new Ue(q.comparator);return this._r(e,t,(o,s)=>{let a=this.ir(o,s);r=r.insert(o,a),i=i.insert(o,hf(s))}).next(()=>({documents:r,ur:i}))}_r(e,t,r){if(t.isEmpty())return S.resolve();let i=new Fe(vA);t.forEach(u=>i=i.add(u));let o=IDBKeyRange.bound(ic(i.first()),ic(i.last())),s=i.getIterator(),a=s.getNext();return lo(e).J({index:"documentKeyIndex",range:o},(u,l,h)=>{let p=q.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&vA(a,p)<0;)r(a,null),a=s.getNext();a&&a.isEqual(p)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?h.$(ic(a)):h.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,r,i,o){let s=t.path,a=[s.popLast().toArray(),s.lastSegment(),uf(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return lo(e).U(IDBKeyRange.bound(a,u,!0)).next(l=>{o?.incrementDocumentReadCount(l.length);let h=on();for(let p of l){let m=this.ir(q.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);m.isFoundDocument()&&(Vc(t,m)||i.has(m.key))&&(h=h.insert(m.key,m))}return h})}getAllFromCollectionGroup(e,t,r,i){let o=on(),s=yA(t,r),a=yA(t,Cn.max());return lo(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,h)=>{let p=this.ir(q.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(p.key,p),o.size===i&&h.done()}).next(()=>o)}newChangeBuffer(e){return new N_(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return mA(e).get("remoteDocumentGlobalKey").next(t=>(Y(!!t),t))}rr(e,t){return mA(e).put("remoteDocumentGlobalKey",t)}ir(e,t){if(t){let r=OB(this.serializer,t);if(!(r.isNoDocument()&&r.version.isEqual(ee.min())))return r}return at.newInvalidDocument(e)}};function LM(n){return new R_(n)}var N_=class extends pf{constructor(e,t){super(),this.cr=e,this.trackRemovals=t,this.lr=new ar(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){let t=[],r=0,i=new Fe((o,s)=>ae(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{let a=this.lr.get(o);if(t.push(this.cr.removeEntry(e,o,a.readTime)),s.isValidDocument()){let u=rA(this.cr.serializer,s);i=i.add(o.path.popLast());let l=hf(u);r+=l-a.size,t.push(this.cr.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){let u=rA(this.cr.serializer,s.convertToNoDocument(ee.min()));t.push(this.cr.addEntry(e,o,u))}}),i.forEach(o=>{t.push(this.cr.indexManager.addToCollectionParentIndex(e,o))}),t.push(this.cr.updateMetadata(e,r)),S.waitFor(t)}getFromCache(e,t){return this.cr.sr(e,t).next(r=>(this.lr.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.cr.ar(e,t).next(({documents:r,ur:i})=>(i.forEach((o,s)=>{this.lr.set(o,{size:s,readTime:r.get(o).readTime})}),r))}};function mA(n){return dt(n,"remoteDocumentGlobal")}function lo(n){return dt(n,"remoteDocumentsV14")}function ic(n){let e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yA(n,e){let t=e.documentKey.path.toArray();return[n,uf(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vA(n,e){let t=n.path.toArray(),r=e.path.toArray(),i=0;for(let o=0;o<t.length-2&&o<r.length-2;++o)if(i=ae(t[o],r[o]),i)return i;return i=ae(t.length,r.length),i||(i=ae(t[t.length-2],r[r.length-2]),i||ae(t[t.length-1],r[r.length-1]))}var P_=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var gf=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&lc(r.mutation,i,pn.empty(),ze.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,t,r=ue()){let i=tr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let s=sc();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,t){let r=tr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,ue()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{t.set(s,a)})})}computeViews(e,t,r,i){let o=on(),s=cc(),a=function(){return cc()}();return t.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof jn)?o=o.insert(l.key,l):h!==void 0?(s.set(l.key,h.mutation.getFieldMask()),lc(h.mutation,l,h.mutation.getFieldMask(),ze.now())):s.set(l.key,pn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,h)=>s.set(l,h)),t.forEach((l,h)=>{var p;return a.set(l,new P_(h,(p=s.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){let r=cc(),i=new Ue((s,a)=>s-a),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(s=>{for(let a of s)a.keys().forEach(u=>{let l=t.get(u);if(l===null)return;let h=r.get(u)||pn.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||ue()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let s=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=uM();h.forEach(m=>{if(!o.has(m)){let y=gM(t.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return S.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(s){return q.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):jw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):S.resolve(tr()),a=-1,u=o;return s.next(l=>S.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),o.get(h)?S.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ue())).next(h=>({batchId:a,changes:aM(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new q(t)).next(r=>{let i=sc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,s=sc();return this.indexManager.getCollectionParents(e,o).next(a=>S.forEach(a,u=>{let l=function(p,m){return new Ln(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(s=>{o.forEach((u,l)=>{let h=l.getKey();s.get(h)===null&&(s=s.insert(h,at.newInvalidDocument(h)))});let a=sc();return s.forEach((u,l)=>{let h=o.get(u);h!==void 0&&lc(h.mutation,l,pn.empty(),ze.now()),Vc(t,l)&&(a=a.insert(u,l))}),a})}};var k_=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return S.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Xe(i.createTime)}}(t)),S.resolve()}getNamedQuery(e,t){return S.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Hw(i.bundledQuery),readTime:Xe(i.readTime)}}(t)),S.resolve()}};var O_=class{constructor(){this.overlays=new Ue(q.comparator),this.Ir=new Map}getOverlay(e,t){return S.resolve(this.overlays.get(t))}getOverlays(e,t){let r=tr();return S.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),S.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),S.resolve()}getOverlaysForCollection(e,t,r){let i=tr(),o=t.length+1,s=new q(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return S.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ue((l,h)=>l-h),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>r){let h=o.get(l.largestBatchId);h===null&&(h=tr(),o=o.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=tr(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return S.resolve(a)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Ec(t,r));let o=this.Ir.get(t);o===void 0&&(o=ue(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var F_=class{constructor(){this.sessionToken=et.EMPTY_BYTE_STRING}getSessionToken(e){return S.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,S.resolve()}};var Sc=class{constructor(){this.Tr=new Fe(ot.Er),this.dr=new Fe(ot.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new ot(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new ot(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new q(new Ie([])),r=new ot(t,e),i=new ot(t,e+1),o=[];return this.dr.forEachInRange([r,i],s=>{this.Vr(s),o.push(s.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new q(new Ie([])),r=new ot(t,e),i=new ot(t,e+1),o=ue();return this.dr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let t=new ot(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},ot=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return q.comparator(e.key,t.key)||ae(e.wr,t.wr)}static Ar(e,t){return ae(e.wr,t.wr)||q.comparator(e.key,t.key)}};var V_=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Fe(ot.Er)}checkEmpty(e){return S.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new wc(o,t,r,i);this.mutationQueue.push(s);for(let a of i)this.br=this.br.add(new ot(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return S.resolve(s)}lookupMutationBatch(e,t){return S.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return S.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return S.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return S.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new ot(t,0),i=new ot(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],s=>{let a=this.Dr(s.wr);o.push(a)}),S.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Fe(ae);return t.forEach(i=>{let o=new ot(i,0),s=new ot(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,s],a=>{r=r.add(a.wr)})}),S.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;q.isDocumentKey(o)||(o=o.child(""));let s=new ot(new q(o),0),a=new Fe(ae);return this.br.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.wr)),!0)},s),S.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){Y(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return S.forEach(t.mutations,i=>{let o=new ot(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new ot(t,0),i=this.br.firstAfterOrEqual(r);return S.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,S.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var L_=class{constructor(e){this.Mr=e,this.docs=function(){return new Ue(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,s=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return S.resolve(r?r.document.mutableCopy():at.newInvalidDocument(t))}getEntries(e,t){let r=on();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():at.newInvalidDocument(i))}),S.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=on(),s=t.path,a=new q(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||kw(LA(h),r)<=0||(i.has(h.key)||Vc(t,h))&&(o=o.insert(h.key,h.mutableCopy()))}return S.resolve(o)}getAllFromCollectionGroup(e,t,r,i){K()}Or(e,t){return S.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new j_(this)}getSize(e){return S.resolve(this.size)}},j_=class extends pf{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),S.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var B_=class{constructor(e){this.persistence=e,this.Nr=new ar(t=>Io(t),Oc),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sc,this.targetCount=0,this.kr=ca.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),S.resolve()}getLastRemoteSnapshotVersion(e){return S.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return S.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),S.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),S.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new ca(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,S.resolve()}updateTargetData(e,t){return this.Kn(t),S.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,S.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((s,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.Nr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),S.waitFor(o).next(()=>i)}getTargetCount(e){return S.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return S.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),S.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),S.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),S.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return S.resolve(r)}containsKey(e,t){return S.resolve(this.Br.containsKey(t))}};var mf=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new fn(0),this.Kr=!1,this.Kr=!0,this.$r=new F_,this.referenceDelegate=e(this),this.Ur=new B_(this),this.indexManager=new C_,this.remoteDocumentCache=function(i){return new L_(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new af(t),this.Gr=new k_(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new O_,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new V_(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("MemoryPersistence","Starting transaction:",e);let i=new U_(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return S.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},U_=class extends Kh{constructor(e){super(),this.currentSequenceNumber=e}},yf=class n{constructor(e){this.persistence=e,this.Jr=new Sc,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw K()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),S.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),S.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),S.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return S.forEach(this.Xr,r=>{let i=q.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,ee.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return S.or([()=>S.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var $_=class{constructor(e){this.serializer=e}O(e,t,r,i){let o=new Qh("createOrUpgrade",t);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kS,{unique:!0}),u.createObjectStore("documentMutations")}(e),_A(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=S.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),_A(e)),s=s.next(()=>function(u){let l=u.store("targetGlobal"),h={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ee.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",h)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").U().next(h=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",kS,{unique:!0});let p=l.store("mutations"),m=h.map(y=>p.put(y));return S.waitFor(m)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.ni(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ri(o)))),r<7&&i>=7&&(s=s.next(()=>this.ii(o))),r<8&&i>=8&&(s=s.next(()=>this.si(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.oi(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){let l=u.createObjectStore("documentOverlays",{keyPath:tB});l.createIndex("collectionPathOverlayIndex",nB,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",rB,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){let l=u.createObjectStore("remoteDocumentsV14",{keyPath:qj});l.createIndex("documentKeyIndex",zj),l.createIndex("collectionGroupIndex",Gj)}(e)).next(()=>this._i(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.ai(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:Zj}).createIndex("sequenceNumberIndex",Jj,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:Xj}).createIndex("documentKeyIndex",eB,{unique:!1})}(e))),r<16&&i>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),r<17&&i>=17&&(s=s.next(()=>{(function(u){u.createObjectStore("globals",{keyPath:"name"})})(e)})),s}ri(e){let t=0;return e.store("remoteDocuments").J((r,i)=>{t+=hf(i)}).next(()=>{let r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}ni(e){let t=e.store("mutationQueues"),r=e.store("mutations");return t.U().next(i=>S.forEach(i,o=>{let s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.U("userMutationsIndex",s).next(a=>S.forEach(a,u=>{Y(u.userId===o.userId);let l=po(this.serializer,u);return OM(e,o.userId,l).next(()=>{})}))}))}ii(e){let t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{let o=[];return r.J((s,a)=>{let u=new Ie(s),l=function(p){return[0,Bt(p)]}(u);o.push(t.get(l).next(h=>h?S.resolve():(p=>t.put({targetId:0,path:Bt(p),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>S.waitFor(o))})}si(e,t){e.createObjectStore("collectionParents",{keyPath:Yj});let r=t.store("collectionParents"),i=new Tc,o=s=>{if(i.add(s)){let a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Bt(u)})}};return t.store("remoteDocuments").J({H:!0},(s,a)=>{let u=new Ie(s);return o(u.popLast())}).next(()=>t.store("documentMutations").J({H:!0},([s,a,u],l)=>{let h=er(a);return o(h.popLast())}))}oi(e){let t=e.store("targets");return t.J((r,i)=>{let o=ac(i),s=NM(this.serializer,o);return t.put(s)})}_i(e,t){let r=t.store("remoteDocuments"),i=[];return r.J((o,s)=>{let a=t.store("remoteDocumentsV14"),u=function(p){return p.document?new q(Ie.fromString(p.document.name).popFirst(5)):p.noDocument?q.fromSegments(p.noDocument.path):p.unknownDocument?q.fromSegments(p.unknownDocument.path):K()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>S.waitFor(i))}ai(e,t){let r=t.store("mutations"),i=LM(this.serializer),o=new mf(yf.Zr,this.serializer.ct);return r.U().next(s=>{let a=new Map;return s.forEach(u=>{var l;let h=(l=a.get(u.userId))!==null&&l!==void 0?l:ue();po(this.serializer,u).keys().forEach(p=>h=h.add(p)),a.set(u.userId,h)}),S.forEach(a,(u,l)=>{let h=new st(l),p=cf.lt(this.serializer,h),m=o.getIndexManager(h),y=ff.lt(h,this.serializer,m,o.referenceDelegate);return new gf(i,y,p,m).recalculateAndSaveOverlaysForDocumentKeys(new gc(t,fn.oe),u).next()})})}};function _A(n){n.createObjectStore("targetDocuments",{keyPath:Kj}).createIndex("documentTargetsIndex",Qj,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Wj,{unique:!0}),n.createObjectStore("targetGlobal")}var xv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",H_=class n{constructor(e,t,r,i,o,s,a,u,l,h,p=17){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ui=o,this.window=s,this.document=a,this.ci=l,this.li=h,this.hi=p,this.Qr=null,this.Kr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Pi=null,this.inForeground=!1,this.Ii=null,this.Ti=null,this.Ei=Number.NEGATIVE_INFINITY,this.di=m=>Promise.resolve(),!n.D())throw new k(R.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new x_(this,i),this.Ai=t+"main",this.serializer=new af(u),this.Ri=new _i(this.Ai,this.hi,new $_(this.serializer)),this.$r=new y_,this.Ur=new T_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=LM(this.serializer),this.Gr=new m_,this.window&&this.window.localStorage?this.Vi=this.window.localStorage:(this.Vi=null,h===!1&&Ze("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,xv);return this.fi(),this.gi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Ur.getHighestSequenceNumber(e))}).then(e=>{this.Qr=new fn(e,this.ci)}).then(()=>{this.Kr=!0}).catch(e=>(this.Ri&&this.Ri.close(),Promise.reject(e)))}yi(e){return this.di=t=>N(this,null,function*(){if(this.started)return e(t)}),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ri.L(t=>N(this,null,function*(){t.newVersion===null&&(yield e())}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ui.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.wi(e).next(t=>{t||(this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)))})}).next(()=>this.Si(e)).next(t=>this.isPrimary&&!t?this.bi(e).next(()=>!1):!!t&&this.Di(e).next(()=>!0))).catch(e=>{if(Mi(e))return O("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return O("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ui.enqueueRetryable(()=>this.di(e)),this.isPrimary=e})}wi(e){return oc(e).get("owner").next(t=>S.resolve(this.vi(t)))}Ci(e){return Lh(e).delete(this.clientId)}Fi(){return N(this,null,function*(){if(this.isPrimary&&!this.Mi(this.Ei,18e5)){this.Ei=Date.now();let e=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{let r=dt(t,"clientMetadata");return r.U().next(i=>{let o=this.xi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return S.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.Vi)for(let t of e)this.Vi.removeItem(this.Oi(t.clientId))}})}pi(){this.Ti=this.ui.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.Fi()).then(()=>this.pi()))}vi(e){return!!e&&e.ownerId===this.clientId}Si(e){return this.li?S.resolve(!0):oc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)){if(this.vi(t)&&this.networkEnabled)return!0;if(!this.vi(t)){if(!t.allowTabSynchronization)throw new k(R.FAILED_PRECONDITION,xv);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lh(e).U().next(r=>this.xi(r,5e3).find(i=>{if(this.clientId!==i.clientId){let o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(t=>(this.isPrimary!==t&&O("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){return N(this,null,function*(){this.Kr=!1,this.Li(),this.Ti&&(this.Ti.cancel(),this.Ti=null),this.Bi(),this.ki(),yield this.Ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{let t=new gc(e,fn.oe);return this.bi(t).next(()=>this.Ci(t))}),this.Ri.close(),this.qi()})}xi(e,t){return e.filter(r=>this.Mi(r.updateTimeMs,t)&&!this.Ni(r.clientId))}Qi(){return this.runTransaction("getActiveClients","readonly",e=>Lh(e).U().next(t=>this.xi(t,18e5).map(r=>r.clientId)))}get started(){return this.Kr}getGlobalsCache(){return this.$r}getMutationQueue(e,t){return ff.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new b_(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return cf.lt(this.serializer,e)}getBundleCache(){return this.Gr}runTransaction(e,t,r){O("IndexedDbPersistence","Starting transaction:",e);let i=t==="readonly"?"readonly":"readwrite",o=function(u){return u===17?sB:u===16?oB:u===15?Fw:u===14?zA:u===13?qA:u===12?iB:u===11?HA:void K()}(this.hi),s;return this.Ri.runTransaction(e,i,o,a=>(s=new gc(a,this.Qr?this.Qr.next():fn.oe),t==="readwrite-primary"?this.wi(s).next(u=>!!u||this.Si(s)).next(u=>{if(!u)throw Ze(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ui.enqueueRetryable(()=>this.di(!1)),new k(R.FAILED_PRECONDITION,jA);return r(s)}).next(u=>this.Di(s).next(()=>u)):this.Ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}Ki(e){return oc(e).get("owner").next(t=>{if(t!==null&&this.Mi(t.leaseTimestampMs,5e3)&&!this.Ni(t.ownerId)&&!this.vi(t)&&!(this.li||this.allowTabSynchronization&&t.allowTabSynchronization))throw new k(R.FAILED_PRECONDITION,xv)})}Di(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return oc(e).put("owner",t)}static D(){return _i.D()}bi(e){let t=oc(e);return t.get("owner").next(r=>this.vi(r)?(O("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):S.resolve())}Mi(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(Ze(`Detected an update time that is in the future: ${e} > ${r}`),!1))}fi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ii=()=>{this.ui.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.mi()))},this.document.addEventListener("visibilitychange",this.Ii),this.inForeground=this.document.visibilityState==="visible")}Bi(){this.Ii&&(this.document.removeEventListener("visibilitychange",this.Ii),this.Ii=null)}gi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Pi=()=>{this.Li();let t=/(?:Version|Mobile)\/1[456]/;Lp()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ui.enterRestrictedMode(!0),this.ui.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Pi))}ki(){this.Pi&&(this.window.removeEventListener("pagehide",this.Pi),this.Pi=null)}Ni(e){var t;try{let r=((t=this.Vi)===null||t===void 0?void 0:t.getItem(this.Oi(e)))!==null;return O("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Ze("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Li(){if(this.Vi)try{this.Vi.setItem(this.Oi(this.clientId),String(Date.now()))}catch(e){Ze("Failed to set zombie client id.",e)}}qi(){if(this.Vi)try{this.Vi.removeItem(this.Oi(this.clientId))}catch{}}Oi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}};function oc(n){return dt(n,"owner")}function Lh(n){return dt(n,"clientMetadata")}function zw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}var q_=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=ue(),i=ue();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var z_=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var vf=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Lp()?8:BA(Wa())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new z_;return this.Xi(e,t,s).next(a=>{if(o.result=a,this.zi)return this.es(e,t,s,a.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Gs()<=$n.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Ws(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),S.resolve()):(Gs()<=$n.DEBUG&&O("QueryEngine","Query:",Ws(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Gs()<=$n.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Ws(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ut(t))):S.resolve())}Yi(e,t){if(GS(t))return S.resolve(null);let r=Ut(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=nf(t,null,"F"),r=Ut(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.Ji.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.ts(t,a);return this.ns(t,l,s,u.readTime)?this.Yi(e,nf(t,null,"F")):this.rs(e,l,t,u)}))})))}Zi(e,t,r,i){return GS(t)||i.isEqual(ee.min())?S.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let s=this.ts(t,o);return this.ns(t,s,r,i)?S.resolve(null):(Gs()<=$n.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ws(t)),this.rs(e,s,t,VA(i,-1)).next(a=>a))})}ts(e,t){let r=new Fe(oM(e));return t.forEach((i,o)=>{Vc(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Gs()<=$n.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Ws(t)),this.Ji.getDocumentsMatchingQuery(e,t,Cn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(s=>{o=o.insert(s.key,s)}),o))}};var G_=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ue(ae),this._s=new ar(o=>Io(o),Oc),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gf(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function jM(n,e,t,r){return new G_(n,e,t,r)}function BM(n,e){return N(this,null,function*(){let t=H(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],a=[],u=ue();for(let l of i){s.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of o){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return t.localDocuments.getDocuments(r,u).next(l=>({hs:l,removedBatchIds:s,addedBatchIds:a}))})})})}function jB(n,e){let t=H(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),y=S.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(u,b)).next(A=>{let M=l.docVersions.get(b);Y(M!==null),A.version.compareTo(M)<0&&(p.applyToRemoteDocument(A,l),A.isValidDocument()&&(A.setReadTime(l.commitVersion),h.addEntry(A)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ue();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function UM(n){let e=H(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function BB(n,e){let t=H(n),r=e.snapshotVersion,i=t.os;return t.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=t.cs.newChangeBuffer({trackRemovals:!0});i=t.os;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(t.Ur.removeMatchingKeys(o,h.removedDocuments,p).next(()=>t.Ur.addMatchingKeys(o,h.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(et.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),i=i.insert(p,y),function(A,M,L){return A.resumeToken.approximateByteSize()===0||M.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:L.addedDocuments.size+L.modifiedDocuments.size+L.removedDocuments.size>0}(m,y,h)&&a.push(t.Ur.updateTargetData(o,y))});let u=on(),l=ue();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(o,h))}),a.push($M(o,s,e.documentUpdates).next(h=>{u=h.Ps,l=h.Is})),!r.isEqual(ee.min())){let h=t.Ur.getLastRemoteSnapshotVersion(o).next(p=>t.Ur.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(h)}return S.waitFor(a).next(()=>s.apply(o)).next(()=>t.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(t.os=i,o))}function $M(n,e,t){let r=ue(),i=ue();return t.forEach(o=>r=r.add(o)),e.getEntries(n,r).next(o=>{let s=on();return t.forEach((a,u)=>{let l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):O("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Ps:s,Is:i}})}function UB(n,e){let t=H(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function la(n,e){let t=H(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Ur.getTargetData(r,e).next(o=>o?(i=o,S.resolve(i)):t.Ur.allocateTargetId(r).next(s=>(i=new ua(e,s,"TargetPurposeListen",r.currentSequenceNumber),t.Ur.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=t.os.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.os=t.os.insert(r.targetId,r),t._s.set(e,r.targetId)),r})}function da(n,e,t){return N(this,null,function*(){let r=H(n),i=r.os.get(e),o=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i)))}catch(s){if(!Mi(s))throw s;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.os=r.os.remove(e),r._s.delete(i.target)})}function _f(n,e,t){let r=H(n),i=ee.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,h){let p=H(u),m=p._s.get(h);return m!==void 0?S.resolve(p.os.get(m)):p.Ur.getTargetData(l,h)}(r,s,Ut(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ss.getDocumentsMatchingQuery(s,e,t?i:ee.min(),t?o:ue())).next(a=>(zM(r,iM(e),a),{documents:a,Ts:o})))}function HM(n,e){let t=H(n),r=H(t.Ur),i=t.os.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",o=>r.ot(o,e).next(s=>s?s.target:null))}function qM(n,e){let t=H(n),r=t.us.get(e)||ee.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.cs.getAllFromCollectionGroup(i,e,VA(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(zM(t,e,i),i))}function zM(n,e,t){let r=n.us.get(e)||ee.min();t.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),n.us.set(e,r)}function $B(n,e,t,r){return N(this,null,function*(){let i=H(n),o=ue(),s=on();for(let l of t){let h=e.Es(l.metadata.name);l.document&&(o=o.add(h));let p=e.ds(l);p.setReadTime(e.As(l.metadata.readTime)),s=s.insert(h,p)}let a=i.cs.newChangeBuffer({trackRemovals:!0}),u=yield la(i,function(h){return Ut(_a(Ie.fromString(`__bundle__/docs/${h}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>$M(l,a,s).next(h=>(a.apply(l),h)).next(h=>i.Ur.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Ur.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,h.Ps,h.Is)).next(()=>h.Ps)))})}function HB(r,i){return N(this,arguments,function*(n,e,t=ue()){let o=yield la(n,Ut(Hw(e.bundledQuery))),s=H(n);return s.persistence.runTransaction("Save named query","readwrite",a=>{let u=Xe(e.readTime);if(o.snapshotVersion.compareTo(u)>=0)return s.Gr.saveNamedQuery(a,e);let l=o.withResumeToken(et.EMPTY_BYTE_STRING,u);return s.os=s.os.insert(l.targetId,l),s.Ur.updateTargetData(a,l).next(()=>s.Ur.removeMatchingKeysForTargetId(a,o.targetId)).next(()=>s.Ur.addMatchingKeys(a,t,o.targetId)).next(()=>s.Gr.saveNamedQuery(a,e))})})}function wA(n,e){return`firestore_clients_${n}_${e}`}function EA(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Rv(n,e){return`firestore_targets_${n}_${e}`}var wf=class n{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Rs(e,t,r){let i=JSON.parse(r),o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new k(i.error.code,i.error.message))),s?new n(e,t,i.state,o):(Ze("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},dc=class n{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Rs(e,t){let r=JSON.parse(t),i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new k(r.error.code,r.error.message))),o?new n(e,r.state,i):(Ze("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Vs(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}},Ef=class n{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Rs(e,t){let r=JSON.parse(t),i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=Bw();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=UA(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new n(e,o):(Ze("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}},W_=class n{constructor(e,t){this.clientId=e,this.onlineState=t}static Rs(e){let t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new n(t.clientId,t.onlineState):(Ze("SharedClientState",`Failed to parse online state: ${e}`),null)}},Ac=class{constructor(){this.activeTargetIds=Bw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}},hc=class{constructor(e,t,r,i,o){this.window=e,this.ui=t,this.persistenceKey=r,this.ps=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ys=this.ws.bind(this),this.Ss=new Ue(ae),this.started=!1,this.bs=[];let s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Ds=wA(this.persistenceKey,this.ps),this.vs=function(u){return`firestore_sequence_number_${u}`}(this.persistenceKey),this.Ss=this.Ss.insert(this.ps,new Ac),this.Cs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Fs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ms=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.xs=function(u){return`firestore_online_state_${u}`}(this.persistenceKey),this.Os=function(u){return`firestore_bundle_loaded_v2_${u}`}(this.persistenceKey),this.window.addEventListener("storage",this.ys)}static D(e){return!(!e||!e.localStorage)}start(){return N(this,null,function*(){let e=yield this.syncEngine.Qi();for(let r of e){if(r===this.ps)continue;let i=this.getItem(wA(this.persistenceKey,r));if(i){let o=Ef.Rs(r,i);o&&(this.Ss=this.Ss.insert(o.clientId,o))}}this.Ns();let t=this.storage.getItem(this.xs);if(t){let r=this.Ls(t);r&&this.Bs(r)}for(let r of this.bs)this.ws(r);this.bs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(e){this.setItem(this.vs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ks(this.Ss)}isActiveQueryTarget(e){let t=!1;return this.Ss.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.qs(e,"pending")}updateMutationState(e,t,r){this.qs(e,t,r),this.Qs(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let i=this.storage.getItem(Rv(this.persistenceKey,e));if(i){let o=dc.Rs(e,i);o&&(r=o.state)}}return t&&this.Ks.fs(e),this.Ns(),r}removeLocalQueryTarget(e){this.Ks.gs(e),this.Ns()}isLocalQueryTarget(e){return this.Ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Rv(this.persistenceKey,e))}updateQueryState(e,t,r){this.$s(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Qs(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Us(e)}notifyBundleLoaded(e){this.Ws(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ys),this.removeItem(this.Ds),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return O("SharedClientState","READ",e,t),t}setItem(e,t){O("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){O("SharedClientState","REMOVE",e),this.storage.removeItem(e)}ws(e){let t=e;if(t.storageArea===this.storage){if(O("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Ds)return void Ze("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ui.enqueueRetryable(()=>N(this,null,function*(){if(this.started){if(t.key!==null){if(this.Cs.test(t.key)){if(t.newValue==null){let r=this.Gs(t.key);return this.zs(r,null)}{let r=this.js(t.key,t.newValue);if(r)return this.zs(r.clientId,r)}}else if(this.Fs.test(t.key)){if(t.newValue!==null){let r=this.Hs(t.key,t.newValue);if(r)return this.Js(r)}}else if(this.Ms.test(t.key)){if(t.newValue!==null){let r=this.Ys(t.key,t.newValue);if(r)return this.Zs(r)}}else if(t.key===this.xs){if(t.newValue!==null){let r=this.Ls(t.newValue);if(r)return this.Bs(r)}}else if(t.key===this.vs){let r=function(o){let s=fn.oe;if(o!=null)try{let a=JSON.parse(o);Y(typeof a=="number"),s=a}catch(a){Ze("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(t.newValue);r!==fn.oe&&this.sequenceNumberHandler(r)}else if(t.key===this.Os){let r=this.Xs(t.newValue);yield Promise.all(r.map(i=>this.syncEngine.eo(i)))}}}else this.bs.push(t)}))}}get Ks(){return this.Ss.get(this.ps)}Ns(){this.setItem(this.Ds,this.Ks.Vs())}qs(e,t,r){let i=new wf(this.currentUser,e,t,r),o=EA(this.persistenceKey,this.currentUser,e);this.setItem(o,i.Vs())}Qs(e){let t=EA(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Us(e){let t={clientId:this.ps,onlineState:e};this.storage.setItem(this.xs,JSON.stringify(t))}$s(e,t,r){let i=Rv(this.persistenceKey,e),o=new dc(e,t,r);this.setItem(i,o.Vs())}Ws(e){let t=JSON.stringify(Array.from(e));this.setItem(this.Os,t)}Gs(e){let t=this.Cs.exec(e);return t?t[1]:null}js(e,t){let r=this.Gs(e);return Ef.Rs(r,t)}Hs(e,t){let r=this.Fs.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return wf.Rs(new st(o),i,t)}Ys(e,t){let r=this.Ms.exec(e),i=Number(r[1]);return dc.Rs(i,t)}Ls(e){return W_.Rs(e)}Xs(e){return JSON.parse(e)}Js(e){return N(this,null,function*(){if(e.user.uid===this.currentUser.uid)return this.syncEngine.no(e.batchId,e.state,e.error);O("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})}Zs(e){return this.syncEngine.ro(e.targetId,e.state,e.error)}zs(e,t){let r=t?this.Ss.insert(e,t):this.Ss.remove(e),i=this.ks(this.Ss),o=this.ks(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.io(s,a).then(()=>{this.Ss=r})}Bs(e){this.Ss.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ks(e){let t=Bw();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}},If=class{constructor(){this.so=new Ac,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ac,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var K_=class{_o(e){}shutdown(){}};var Df=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var jh=null;function Nv(){return jh===null?jh=function(){return 268435456+Math.round(2147483648*Math.random())}():jh++,"0x"+jh.toString(16)}var qB={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Q_=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Tt="WebChannelConnection",Y_=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,s){let a=Nv(),u=this.xo(t,r.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(l,o,s),this.No(t,u,l,i).then(h=>(O("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw Vn("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}Lo(t,r,i,o,s,a){return this.Mo(t,r,i,o,s)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+va}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>t[s]=o),i&&i.headers.forEach((o,s)=>t[s]=o)}xo(t,r){let i=qB[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Nv();return new Promise((s,a)=>{let u=new Cv;u.setWithCredentials(!0),u.listenOnce(bv.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case tc.NO_ERROR:let h=u.getResponseJson();O(Tt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(h)),s(h);break;case tc.TIMEOUT:O(Tt,`RPC '${e}' ${o} timed out`),a(new k(R.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:let p=u.getStatus();if(O(Tt,`RPC '${e}' ${o} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let y=m?.error;if(y&&y.status&&y.message){let b=function(M){let L=M.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(L)>=0?L:R.UNKNOWN}(y.status);a(new k(b,y.message))}else a(new k(R.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new k(R.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{O(Tt,`RPC '${e}' ${o} completed.`)}});let l=JSON.stringify(i);O(Tt,`RPC '${e}' ${o} sending request:`,i),u.send(t,"POST",l,r,15)})}Bo(e,t,r){let i=Nv(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Av(),a=Sv(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,t,r),u.encodeInitMessageHeaders=!0;let h=o.join("");O(Tt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=s.createWebChannel(h,u),m=!1,y=!1,b=new Q_({Io:M=>{y?O(Tt,`Not sending because RPC '${e}' stream ${i} is closed:`,M):(m||(O(Tt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),O(Tt,`RPC '${e}' stream ${i} sending:`,M),p.send(M))},To:()=>p.close()}),A=(M,L,G)=>{M.listen(L,V=>{try{G(V)}catch(Z){setTimeout(()=>{throw Z},0)}})};return A(p,Us.EventType.OPEN,()=>{y||(O(Tt,`RPC '${e}' stream ${i} transport opened.`),b.yo())}),A(p,Us.EventType.CLOSE,()=>{y||(y=!0,O(Tt,`RPC '${e}' stream ${i} transport closed`),b.So())}),A(p,Us.EventType.ERROR,M=>{y||(y=!0,Vn(Tt,`RPC '${e}' stream ${i} transport errored:`,M),b.So(new k(R.UNAVAILABLE,"The operation could not be completed")))}),A(p,Us.EventType.MESSAGE,M=>{var L;if(!y){let G=M.data[0];Y(!!G);let V=G,Z=V.error||((L=V[0])===null||L===void 0?void 0:L.error);if(Z){O(Tt,`RPC '${e}' stream ${i} received error:`,Z);let re=Z.status,X=function(w){let I=it[w];if(I!==void 0)return vM(I)}(re),E=Z.message;X===void 0&&(X=R.INTERNAL,E="Unknown error status: "+re+" with message "+Z.message),y=!0,b.So(new k(X,E)),p.close()}else O(Tt,`RPC '${e}' stream ${i} received:`,G),b.bo(G)}}),A(a,Tv.STAT_EVENT,M=>{M.stat===Oh.PROXY?O(Tt,`RPC '${e}' stream ${i} detected buffering proxy`):M.stat===Oh.NOPROXY&&O(Tt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}};function GM(){return typeof window<"u"?window:null}function qh(){return typeof document<"u"?document:null}function Lc(n){return new d_(n,!0)}var Mc=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&O("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Cf=class{constructor(e,t,r,i,o,s,a,u){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Mc(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return N(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return N(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return N(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(Ze(t.toString()),Ze("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new k(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>N(this,null,function*(){this.state=0,this.start()}))}I_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Z_=class extends Cf{constructor(e,t,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}T_(e,t){return this.connection.Bo("Listen",e,t)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();let t=AB(this.serializer,e),r=function(o){if(!("targetChange"in o))return ee.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?ee.min():s.readTime?Xe(s.readTime):ee.min()}(e);return this.listener.d_(t,r)}A_(e){let t={};t.database=p_(this.serializer),t.addTarget=function(o,s){let a,u=s.target;if(a=ef(u)?{documents:TM(o,u)}:{query:SM(o,u)._t},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=wM(o,s.resumeToken);let l=h_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(ee.min())>0){a.readTime=aa(o,s.snapshotVersion.toTimestamp());let l=h_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=xB(this.serializer,e);r&&(t.labels=r),this.a_(t)}R_(e){let t={};t.database=p_(this.serializer),t.removeTarget=e,this.a_(t)}},J_=class extends Cf{constructor(e,t,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,s),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return Y(!!e.streamToken),this.lastStreamToken=e.streamToken,Y(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Y(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=MB(e.writeResults,e.commitTime),r=Xe(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=p_(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>bc(this.serializer,r))};this.a_(t)}};var X_=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Mo(e,f_(t,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new k(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.Lo(e,f_(t,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new k(R.UNKNOWN,s.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},ew=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Ze(t),this.D_=!1):O("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var tw=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(s=>{r.enqueueAndForget(()=>N(this,null,function*(){xi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(u){return N(this,null,function*(){let l=H(u);l.L_.add(4),yield wa(l),l.q_.set("Unknown"),l.L_.delete(4),yield jc(l)})}(this))}))}),this.q_=new ew(r,i)}};function jc(n){return N(this,null,function*(){if(xi(n))for(let e of n.B_)yield e(!0)})}function wa(n){return N(this,null,function*(){for(let e of n.B_)yield e(!1)})}function zf(n,e){let t=H(n);t.N_.has(e.targetId)||(t.N_.set(e.targetId,e),Kw(t)?Ww(t):Ia(t).r_()&&Gw(t,e))}function ha(n,e){let t=H(n),r=Ia(t);t.N_.delete(e),r.r_()&&WM(t,e),t.N_.size===0&&(r.r_()?r.o_():xi(t)&&t.q_.set("Unknown"))}function Gw(n,e){if(n.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ia(n).A_(e)}function WM(n,e){n.Q_.xe(e),Ia(n).R_(e)}function Ww(n){n.Q_=new l_({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.N_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Ia(n).start(),n.q_.v_()}function Kw(n){return xi(n)&&!Ia(n).n_()&&n.N_.size>0}function xi(n){return H(n).L_.size===0}function KM(n){n.Q_=void 0}function zB(n){return N(this,null,function*(){n.q_.set("Online")})}function GB(n){return N(this,null,function*(){n.N_.forEach((e,t)=>{Gw(n,e)})})}function WB(n,e){return N(this,null,function*(){KM(n),Kw(n)?(n.q_.M_(e),Ww(n)):n.q_.set("Unknown")})}function KB(n,e,t){return N(this,null,function*(){if(n.q_.set("Online"),e instanceof of&&e.state===2&&e.cause)try{yield function(i,o){return N(this,null,function*(){let s=o.cause;for(let a of o.targetIds)i.N_.has(a)&&(yield i.remoteSyncer.rejectListen(a,s),i.N_.delete(a),i.Q_.removeTarget(a))})}(n,e)}catch(r){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bf(n,r)}else if(e instanceof ea?n.Q_.Ke(e):e instanceof rf?n.Q_.He(e):n.Q_.We(e),!t.isEqual(ee.min()))try{let r=yield UM(n.localStore);t.compareTo(r)>=0&&(yield function(o,s){let a=o.Q_.rt(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=o.N_.get(l);h&&o.N_.set(l,h.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{let h=o.N_.get(u);if(!h)return;o.N_.set(u,h.withResumeToken(et.EMPTY_BYTE_STRING,h.snapshotVersion)),WM(o,u);let p=new ua(h.target,u,l,h.sequenceNumber);Gw(o,p)}),o.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(r){O("RemoteStore","Failed to raise snapshot:",r),yield bf(n,r)}})}function bf(n,e,t){return N(this,null,function*(){if(!Mi(e))throw e;n.L_.add(1),yield wa(n),n.q_.set("Offline"),t||(t=()=>UM(n.localStore)),n.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield jc(n)}))})}function QM(n,e){return e().catch(t=>bf(n,t,e))}function Ea(n){return N(this,null,function*(){let e=H(n),t=Si(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;QB(e);)try{let i=yield UB(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,YB(e,i)}catch(i){yield bf(e,i)}YM(e)&&ZM(e)})}function QB(n){return xi(n)&&n.O_.length<10}function YB(n,e){n.O_.push(e);let t=Si(n);t.r_()&&t.V_&&t.m_(e.mutations)}function YM(n){return xi(n)&&!Si(n).n_()&&n.O_.length>0}function ZM(n){Si(n).start()}function ZB(n){return N(this,null,function*(){Si(n).p_()})}function JB(n){return N(this,null,function*(){let e=Si(n);for(let t of n.O_)e.m_(t.mutations)})}function XB(n,e,t){return N(this,null,function*(){let r=n.O_.shift(),i=a_.from(r,e,t);yield QM(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ea(n)})}function eU(n,e){return N(this,null,function*(){e&&Si(n).V_&&(yield function(r,i){return N(this,null,function*(){if(function(s){return yM(s)&&s!==R.ABORTED}(i.code)){let o=r.O_.shift();Si(r).s_(),yield QM(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ea(r)}})}(n,e)),YM(n)&&ZM(n)})}function IA(n,e){return N(this,null,function*(){let t=H(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let r=xi(t);t.L_.add(3),yield wa(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield jc(t)})}function nw(n,e){return N(this,null,function*(){let t=H(n);e?(t.L_.delete(2),yield jc(t)):e||(t.L_.add(2),yield wa(t),t.q_.set("Unknown"))})}function Ia(n){return n.K_||(n.K_=function(t,r,i){let o=H(t);return o.w_(),new Z_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:zB.bind(null,n),Ro:GB.bind(null,n),mo:WB.bind(null,n),d_:KB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.K_.s_(),Kw(n)?Ww(n):n.q_.set("Unknown")):(yield n.K_.stop(),KM(n))}))),n.K_}function Si(n){return n.U_||(n.U_=function(t,r,i){let o=H(t);return o.w_(),new J_(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:ZB.bind(null,n),mo:eU.bind(null,n),f_:JB.bind(null,n),g_:XB.bind(null,n)}),n.B_.push(e=>N(this,null,function*(){e?(n.U_.s_(),yield Ea(n)):(yield n.U_.stop(),n.O_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var rw=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new lt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let s=Date.now()+r,a=new n(e,t,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new k(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Da(n,e){if(Ze("AsyncQueue",`${e}: ${n}`),Mi(n))return new k(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Tf=class n{constructor(e){this.comparator=e?(t,r)=>e(t,r)||q.comparator(t.key,r.key):(t,r)=>q.comparator(t.key,r.key),this.keyedMap=sc(),this.sortedSet=new Ue(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let r=new n;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}};var Sf=class{constructor(){this.W_=new Ue(q.comparator)}track(e){let t=e.doc.key,r=this.W_.get(t);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(t,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(t):e.type===1&&r.type===2?this.W_=this.W_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(t,{type:2,doc:e.doc}):K():this.W_=this.W_.insert(t,e)}G_(){let e=[];return this.W_.inorderTraversal((t,r)=>{e.push(r)}),e}},fa=class n{constructor(e,t,r,i,o,s,a,u,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,i,o){let s=[];return t.forEach(a=>{s.push({type:0,doc:a})}),new n(e,t,Tf.emptySet(t),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}};var iw=class{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}},ow=class{constructor(){this.queries=DA(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=H(t),o=i.queries;i.queries=DA(),o.forEach((s,a)=>{for(let u of a.j_)u.onError(r)})})(this,new k(R.ABORTED,"Firestore shutting down"))}};function DA(){return new ar(n=>rM(n),Fc)}function Qw(n,e){return N(this,null,function*(){let t=H(n),r=3,i=e.query,o=t.queries.get(i);o?!o.H_()&&e.J_()&&(r=2):(o=new iw,r=e.J_()?0:1);try{switch(r){case 0:o.z_=yield t.onListen(i,!0);break;case 1:o.z_=yield t.onListen(i,!1);break;case 2:yield t.onFirstRemoteStoreListen(i)}}catch(s){let a=Da(s,`Initialization of query '${Ws(e.query)}' failed`);return void e.onError(a)}t.queries.set(i,o),o.j_.push(e),e.Z_(t.onlineState),o.z_&&e.X_(o.z_)&&Zw(t)})}function Yw(n,e){return N(this,null,function*(){let t=H(n),r=e.query,i=3,o=t.queries.get(r);if(o){let s=o.j_.indexOf(e);s>=0&&(o.j_.splice(s,1),o.j_.length===0?i=e.J_()?0:1:!o.H_()&&e.J_()&&(i=2))}switch(i){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}})}function tU(n,e){let t=H(n),r=!1;for(let i of e){let o=i.query,s=t.queries.get(o);if(s){for(let a of s.j_)a.X_(i)&&(r=!0);s.z_=i}}r&&Zw(t)}function nU(n,e,t){let r=H(n),i=r.queries.get(e);if(i)for(let o of i.j_)o.onError(t);r.queries.delete(e)}function Zw(n){n.Y_.forEach(e=>{e.next()})}var sw,CA;(CA=sw||(sw={})).ea="default",CA.Cache="cache";var xc=class{constructor(e,t,r){this.query=e,this.ta=t,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.na?this.ia(e)&&(this.ta.next(e),t=!0):this.sa(e,this.onlineState)&&(this.oa(e),t=!0),this.ra=e,t}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let t=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),t=!0),t}sa(e,t){if(!e.fromCache||!this.J_())return!0;let r=t!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ia(e){if(e.docChanges.length>0)return!0;let t=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}oa(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==sw.Cache}};var aw=class{constructor(e,t){this.aa=e,this.byteLength=t}ua(){return"metadata"in this.aa}};var Af=class{constructor(e){this.serializer=e}Es(e){return rr(this.serializer,e)}ds(e){return e.metadata.exists?bM(this.serializer,e.document,!1):at.newNoDocument(this.Es(e.metadata.name),this.As(e.metadata.readTime))}As(e){return Xe(e)}},uw=class{constructor(e,t,r){this.ca=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=JM(e)}la(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.aa.namedQuery)this.queries.push(e.aa.namedQuery);else if(e.aa.documentMetadata){this.documents.push({metadata:e.aa.documentMetadata}),e.aa.documentMetadata.exists||++t;let r=Ie.fromString(e.aa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.aa.document&&(this.documents[this.documents.length-1].document=e.aa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ha(e){let t=new Map,r=new Af(this.serializer);for(let i of e)if(i.metadata.queries){let o=r.Es(i.metadata.name);for(let s of i.metadata.queries){let a=(t.get(s)||ue()).add(o);t.set(s,a)}}return t}complete(){return N(this,null,function*(){let e=yield $B(this.localStore,new Af(this.serializer),this.documents,this.ca.id),t=this.ha(this.documents);for(let r of this.queries)yield HB(this.localStore,r,t.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Pa:this.collectionGroups,Ia:e}})}};function JM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}var Mf=class{constructor(e){this.key=e}},xf=class{constructor(e){this.key=e}},Rf=class{constructor(e,t){this.query=e,this.Ta=t,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ue(),this.mutatedKeys=ue(),this.Aa=oM(e),this.Ra=new Tf(this.Aa)}get Va(){return this.Ta}ma(e,t){let r=t?t.fa:new Sf,i=t?t.Ra:this.Ra,o=t?t.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),y=Vc(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),A=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),M=!1;m&&y?m.data.isEqual(y.data)?b!==A&&(r.track({type:3,doc:y}),M=!0):this.ga(m,y)||(r.track({type:2,doc:y}),M=!0,(u&&this.Aa(y,u)>0||l&&this.Aa(y,l)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),M=!0):m&&!y&&(r.track({type:1,doc:m}),M=!0,(u||l)&&(a=!0)),M&&(y?(s=s.add(y),o=A?o.add(h):o.delete(h)):(s=s.delete(h),o=o.delete(h)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let h=this.query.limitType==="F"?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{Ra:s,fa:r,ns:a,mutatedKeys:o}}ga(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,i){let o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;let s=e.fa.G_();s.sort((h,p)=>function(y,b){let A=M=>{switch(M){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return A(y)-A(b)}(h.type,p.type)||this.Aa(h.doc,p.doc)),this.pa(r),i=i!=null&&i;let a=t&&!i?this.ya():[],u=this.da.size===0&&this.current&&!i?1:0,l=u!==this.Ea;return this.Ea=u,s.length!==0||l?{snapshot:new fa(this.query,e.Ra,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Sf,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(t=>this.Ta=this.Ta.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ta=this.Ta.delete(t)),this.current=e.current)}ya(){if(!this.current)return[];let e=this.da;this.da=ue(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});let t=[];return e.forEach(r=>{this.da.has(r)||t.push(new xf(r))}),this.da.forEach(r=>{e.has(r)||t.push(new Mf(r))}),t}ba(e){this.Ta=e.Ts,this.da=ue();let t=this.ma(e.documents);return this.applyChanges(t,!0)}Da(){return fa.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}},cw=class{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}},lw=class{constructor(e){this.key=e,this.va=!1}},dw=class{constructor(e,t,r,i,o,s){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ca={},this.Fa=new ar(a=>rM(a),Fc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ue(q.comparator),this.Na=new Map,this.La=new Sc,this.Ba={},this.ka=new Map,this.qa=ca.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function rU(n,e,t=!0){return N(this,null,function*(){let r=Gf(n),i,o=r.Fa.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.Da()):i=yield XM(r,e,t,!0),i})}function iU(n,e){return N(this,null,function*(){let t=Gf(n);yield XM(t,e,!0,!1)})}function XM(n,e,t,r){return N(this,null,function*(){let i=yield la(n.localStore,Ut(e)),o=i.targetId,s=n.sharedClientState.addLocalQueryTarget(o,t),a;return r&&(a=yield Jw(n,e,o,s==="current",i.resumeToken)),n.isPrimaryClient&&t&&zf(n.remoteStore,i),a})}function Jw(n,e,t,r,i){return N(this,null,function*(){n.Ka=(p,m,y)=>function(A,M,L,G){return N(this,null,function*(){let V=M.view.ma(L);V.ns&&(V=yield _f(A.localStore,M.query,!1).then(({documents:E})=>M.view.ma(E,V)));let Z=G&&G.targetChanges.get(M.targetId),re=G&&G.targetMismatches.get(M.targetId)!=null,X=M.view.applyChanges(V,A.isPrimaryClient,Z,re);return hw(A,M.targetId,X.wa),X.snapshot})}(n,p,m,y);let o=yield _f(n.localStore,e,!0),s=new Rf(e,o.Ts),a=s.ma(o.documents),u=Dc.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",i),l=s.applyChanges(a,n.isPrimaryClient,u);hw(n,t,l.wa);let h=new cw(e,t,s);return n.Fa.set(e,h),n.Ma.has(t)?n.Ma.get(t).push(e):n.Ma.set(t,[e]),l.snapshot})}function oU(n,e,t){return N(this,null,function*(){let r=H(n),i=r.Fa.get(e),o=r.Ma.get(i.targetId);if(o.length>1)return r.Ma.set(i.targetId,o.filter(s=>!Fc(s,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield da(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),t&&ha(r.remoteStore,i.targetId),pa(r,i.targetId)}).catch(Ai))):(pa(r,i.targetId),yield da(r.localStore,i.targetId,!0))})}function sU(n,e){return N(this,null,function*(){let t=H(n),r=t.Fa.get(e),i=t.Ma.get(r.targetId);t.isPrimaryClient&&i.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),ha(t.remoteStore,r.targetId))})}function aU(n,e,t){return N(this,null,function*(){let r=nE(n);try{let i=yield function(s,a){let u=H(s),l=ze.now(),h=a.reduce((y,b)=>y.add(b.key),ue()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=on(),A=ue();return u.cs.getEntries(y,h).next(M=>{b=M,b.forEach((L,G)=>{G.isValidDocument()||(A=A.add(L))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,b)).next(M=>{p=M;let L=[];for(let G of a){let V=EB(G,p.get(G.key).overlayedDocument);V!=null&&L.push(new jn(G.key,V,YA(V.value.mapValue),Ye.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,L,a)}).next(M=>{m=M;let L=M.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(y,M.batchId,L)})}).then(()=>({batchId:m.batchId,changes:aM(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Ba[s.currentUser.toKey()];l||(l=new Ue(ae)),l=l.insert(a,u),s.Ba[s.currentUser.toKey()]=l}(r,i.batchId,t),yield Fr(r,i.changes),yield Ea(r.remoteStore)}catch(i){let o=Da(i,"Failed to persist write");t.reject(o)}})}function ex(n,e){return N(this,null,function*(){let t=H(n);try{let r=yield BB(t.localStore,e);e.targetChanges.forEach((i,o)=>{let s=t.Na.get(o);s&&(Y(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.va=!0:i.modifiedDocuments.size>0?Y(s.va):i.removedDocuments.size>0&&(Y(s.va),s.va=!1))}),yield Fr(t,r,e)}catch(r){yield Ai(r)}})}function bA(n,e,t){let r=H(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,s)=>{let a=s.view.Z_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){let u=H(s);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.j_)m.Z_(a)&&(l=!0)}),l&&Zw(u)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function uU(n,e,t){return N(this,null,function*(){let r=H(n);r.sharedClientState.updateQueryState(e,"rejected",t);let i=r.Na.get(e),o=i&&i.key;if(o){let s=new Ue(q.comparator);s=s.insert(o,at.newNoDocument(o,ee.min()));let a=ue().add(o),u=new Ic(ee.min(),new Map,new Ue(ae),s,a);yield ex(r,u),r.Oa=r.Oa.remove(o),r.Na.delete(e),tE(r)}else yield da(r.localStore,e,!1).then(()=>pa(r,e,t)).catch(Ai)})}function cU(n,e){return N(this,null,function*(){let t=H(n),r=e.batch.batchId;try{let i=yield jB(t.localStore,e);eE(t,r,null),Xw(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Fr(t,i)}catch(i){yield Ai(i)}})}function lU(n,e,t){return N(this,null,function*(){let r=H(n);try{let i=yield function(s,a){let u=H(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Y(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);eE(r,e,t),Xw(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Fr(r,i)}catch(i){yield Ai(i)}})}function dU(n,e){return N(this,null,function*(){let t=H(n);xi(t.remoteStore)||O("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let r=yield function(s){let a=H(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(t.localStore);if(r===-1)return void e.resolve();let i=t.ka.get(r)||[];i.push(e),t.ka.set(r,i)}catch(r){let i=Da(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}})}function Xw(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function eE(n,e,t){let r=H(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function pa(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let r of n.Ma.get(e))n.Fa.delete(r),t&&n.Ca.$a(r,t);n.Ma.delete(e),n.isPrimaryClient&&n.La.gr(e).forEach(r=>{n.La.containsKey(r)||tx(n,r)})}function tx(n,e){n.xa.delete(e.path.canonicalString());let t=n.Oa.get(e);t!==null&&(ha(n.remoteStore,t),n.Oa=n.Oa.remove(e),n.Na.delete(t),tE(n))}function hw(n,e,t){for(let r of t)r instanceof Mf?(n.La.addReference(r.key,e),hU(n,r)):r instanceof xf?(O("SyncEngine","Document no longer in limbo: "+r.key),n.La.removeReference(r.key,e),n.La.containsKey(r.key)||tx(n,r.key)):K()}function hU(n,e){let t=e.key,r=t.path.canonicalString();n.Oa.get(t)||n.xa.has(r)||(O("SyncEngine","New document in limbo: "+t),n.xa.add(r),tE(n))}function tE(n){for(;n.xa.size>0&&n.Oa.size<n.maxConcurrentLimboResolutions;){let e=n.xa.values().next().value;n.xa.delete(e);let t=new q(Ie.fromString(e)),r=n.qa.next();n.Na.set(r,new lw(t)),n.Oa=n.Oa.insert(t,r),zf(n.remoteStore,new ua(Ut(_a(t.path)),r,"TargetPurposeLimboResolution",fn.oe))}}function Fr(n,e,t){return N(this,null,function*(){let r=H(n),i=[],o=[],s=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{s.push(r.Ka(u,e,t).then(l=>{var h;if((l||t)&&r.isPrimaryClient){let p=l?!l.fromCache:(h=t?.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(l){i.push(l);let p=q_.Wi(u.targetId,l);o.push(p)}}))}),yield Promise.all(s),r.Ca.d_(i),yield function(u,l){return N(this,null,function*(){let h=H(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>S.forEach(l,m=>S.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>S.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Mi(p))throw p;O("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=h.os.get(m),b=y.snapshotVersion,A=y.withLastLimboFreeSnapshotVersion(b);h.os=h.os.insert(m,A)}}})}(r.localStore,o))})}function fU(n,e){return N(this,null,function*(){let t=H(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let r=yield BM(t.localStore,e);t.currentUser=e,function(o,s){o.ka.forEach(a=>{a.forEach(u=>{u.reject(new k(R.CANCELLED,s))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Fr(t,r.hs)}})}function pU(n,e){let t=H(n),r=t.Na.get(e);if(r&&r.va)return ue().add(r.key);{let i=ue(),o=t.Ma.get(e);if(!o)return i;for(let s of o){let a=t.Fa.get(s);i=i.unionWith(a.view.Va)}return i}}function gU(n,e){return N(this,null,function*(){let t=H(n),r=yield _f(t.localStore,e.query,!0),i=e.view.ba(r);return t.isPrimaryClient&&hw(t,e.targetId,i.wa),i})}function mU(n,e){return N(this,null,function*(){let t=H(n);return qM(t.localStore,e).then(r=>Fr(t,r))})}function yU(n,e,t,r){return N(this,null,function*(){let i=H(n),o=yield function(a,u){let l=H(a),h=H(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",p=>h.Mn(p,u).next(m=>m?l.localDocuments.getDocuments(p,m):S.resolve(null)))}(i.localStore,e);o!==null?(t==="pending"?yield Ea(i.remoteStore):t==="acknowledged"||t==="rejected"?(eE(i,e,r||null),Xw(i,e),function(a,u){H(H(a).mutationQueue).On(u)}(i.localStore,e)):K(),yield Fr(i,o)):O("SyncEngine","Cannot apply mutation batch with id: "+e)})}function vU(n,e){return N(this,null,function*(){let t=H(n);if(Gf(t),nE(t),e===!0&&t.Qa!==!0){let r=t.sharedClientState.getAllActiveQueryTargets(),i=yield TA(t,r.toArray());t.Qa=!0,yield nw(t.remoteStore,!0);for(let o of i)zf(t.remoteStore,o)}else if(e===!1&&t.Qa!==!1){let r=[],i=Promise.resolve();t.Ma.forEach((o,s)=>{t.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(pa(t,s),da(t.localStore,s,!0))),ha(t.remoteStore,s)}),yield i,yield TA(t,r),function(s){let a=H(s);a.Na.forEach((u,l)=>{ha(a.remoteStore,l)}),a.La.pr(),a.Na=new Map,a.Oa=new Ue(q.comparator)}(t),t.Qa=!1,yield nw(t.remoteStore,!1)}})}function TA(n,e,t){return N(this,null,function*(){let r=H(n),i=[],o=[];for(let s of e){let a,u=r.Ma.get(s);if(u&&u.length!==0){a=yield la(r.localStore,Ut(u[0]));for(let l of u){let h=r.Fa.get(l),p=yield gU(r,h);p.snapshot&&o.push(p.snapshot)}}else{let l=yield HM(r.localStore,s);a=yield la(r.localStore,l),yield Jw(r,nx(l),s,!1,a.resumeToken)}i.push(a)}return r.Ca.d_(o),i})}function nx(n){return nM(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function _U(n){return function(t){return H(H(t).persistence).Qi()}(H(n).localStore)}function wU(n,e,t,r){return N(this,null,function*(){let i=H(n);if(i.Qa)return void O("SyncEngine","Ignoring unexpected query state notification.");let o=i.Ma.get(e);if(o&&o.length>0)switch(t){case"current":case"not-current":{let s=yield qM(i.localStore,iM(o[0])),a=Ic.createSynthesizedRemoteEventForCurrentChange(e,t==="current",et.EMPTY_BYTE_STRING);yield Fr(i,s,a);break}case"rejected":yield da(i.localStore,e,!0),pa(i,e,r);break;default:K()}})}function EU(n,e,t){return N(this,null,function*(){let r=Gf(n);if(r.Qa){for(let i of e){if(r.Ma.has(i)&&r.sharedClientState.isActiveQueryTarget(i)){O("SyncEngine","Adding an already active target "+i);continue}let o=yield HM(r.localStore,i),s=yield la(r.localStore,o);yield Jw(r,nx(o),s.targetId,!1,s.resumeToken),zf(r.remoteStore,s)}for(let i of t)r.Ma.has(i)&&(yield da(r.localStore,i,!1).then(()=>{ha(r.remoteStore,i),pa(r,i)}).catch(Ai))}})}function Gf(n){let e=H(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=ex.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pU.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uU.bind(null,e),e.Ca.d_=tU.bind(null,e.eventManager),e.Ca.$a=nU.bind(null,e.eventManager),e}function nE(n){let e=H(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=cU.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lU.bind(null,e),e}function IU(n,e,t){let r=H(n);(function(o,s,a){return N(this,null,function*(){try{let u=yield s.getMetadata();if(yield function(y,b){let A=H(y),M=Xe(b.createTime);return A.persistence.runTransaction("hasNewerBundle","readonly",L=>A.Gr.getBundleMetadata(L,b.id)).then(L=>!!L&&L.createTime.compareTo(M)>=0)}(o.localStore,u))return yield s.close(),a._completeWith(function(y){return{taskState:"Success",documentsLoaded:y.totalDocuments,bytesLoaded:y.totalBytes,totalDocuments:y.totalDocuments,totalBytes:y.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(JM(u));let l=new uw(u,o.localStore,s.serializer),h=yield s.Ua();for(;h;){let m=yield l.la(h);m&&a._updateProgress(m),h=yield s.Ua()}let p=yield l.complete();return yield Fr(o,p.Ia,void 0),yield function(y,b){let A=H(y);return A.persistence.runTransaction("Save bundle","readwrite",M=>A.Gr.saveBundleMetadata(M,b))}(o.localStore,u),a._completeWith(p.progress),Promise.resolve(p.Pa)}catch(u){return Vn("SyncEngine",`Loading bundle failed with ${u}`),a._failWith(u),Promise.resolve(new Set)}})})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}var fw=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){this.serializer=Lc(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return jM(this.persistence,new vf,t.initialUser,this.serializer)}Ga(t){return new mf(yf.Zr,this.serializer)}Wa(t){return new If}terminate(){return N(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var Nf=class n extends fw{constructor(e,t,r){super(),this.Ja=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){yield Fp(n.prototype,this,"initialize").call(this,e),yield this.Ja.initialize(this,e),yield nE(this.Ja.syncEngine),yield Ea(this.Ja.remoteStore),yield this.persistence.yi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}za(e){return jM(this.persistence,new vf,e.initialUser,this.serializer)}ja(e,t){let r=this.persistence.referenceDelegate.garbageCollector;return new A_(r,e.asyncQueue,t)}Ha(e,t){let r=new zv(t,this.persistence);return new qv(e.asyncQueue,r)}Ga(e){let t=zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?Dn.withCacheSize(this.cacheSizeBytes):Dn.DEFAULT;return new H_(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,GM(),qh(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Wa(e){return new If}},pw=class n extends Nf{constructor(e,t){super(e,t,!1),this.Ja=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){return N(this,null,function*(){yield Fp(n.prototype,this,"initialize").call(this,e);let t=this.Ja.syncEngine;this.sharedClientState instanceof hc&&(this.sharedClientState.syncEngine={no:yU.bind(null,t),ro:wU.bind(null,t),io:EU.bind(null,t),Qi:_U.bind(null,t),eo:mU.bind(null,t)},yield this.sharedClientState.start()),yield this.persistence.yi(r=>N(this,null,function*(){yield vU(this.Ja.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())}))})}Wa(e){let t=GM();if(!hc.D(t))throw new k(R.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=zw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new hc(t,e.asyncQueue,r,e.clientId,e.initialUser)}},rE=(()=>{class n{initialize(t,r){return N(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>bA(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fU.bind(null,this.syncEngine),yield nw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new ow}()}createDatastore(t){let r=Lc(t.databaseInfo.databaseId),i=function(s){return new Y_(s)}(t.databaseInfo);return function(s,a,u,l){return new X_(s,a,u,l)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,s,a,u){return new tw(i,o,s,a,u)}(this.localStore,this.datastore,t.asyncQueue,r=>bA(this.syncEngine,r,0),function(){return Df.D()?new Df:new K_}())}createSyncEngine(t,r){return function(o,s,a,u,l,h,p){let m=new dw(o,s,a,u,l,h);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return N(this,null,function*(){var t,r;yield function(o){return N(this,null,function*(){let s=H(o);O("RemoteStore","RemoteStore shutting down."),s.L_.add(5),yield wa(s),s.k_.shutdown(),s.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();function SA(n,e=10240){let t=0;return{read(){return N(this,null,function*(){if(t<n.byteLength){let i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}var ga=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Ze("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,t){setTimeout(()=>{this.muted||e(t)},0)}};var gw=class{constructor(e,t){this.Xa=e,this.serializer=t,this.metadata=new lt,this.buffer=new Uint8Array,this.eu=function(){return new TextDecoder("utf-8")}(),this.tu().then(r=>{r&&r.ua()?this.metadata.resolve(r.aa.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r?.aa)}`))},r=>this.metadata.reject(r))}close(){return this.Xa.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}Ua(){return N(this,null,function*(){return yield this.getMetadata(),this.tu()})}tu(){return N(this,null,function*(){let e=yield this.nu();if(e===null)return null;let t=this.eu.decode(e),r=Number(t);isNaN(r)&&this.ru(`length string (${t}) is not valid number`);let i=yield this.iu(r);return new aw(JSON.parse(i),e.length+r)})}su(){return this.buffer.findIndex(e=>e===123)}nu(){return N(this,null,function*(){for(;this.su()<0&&!(yield this.ou()););if(this.buffer.length===0)return null;let e=this.su();e<0&&this.ru("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t})}iu(e){return N(this,null,function*(){for(;this.buffer.length<e;)(yield this.ou())&&this.ru("Reached the end of bundle when more is expected.");let t=this.eu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t})}ru(e){throw this.Xa.cancel(),new Error(`Invalid bundle format: ${e}`)}ou(){return N(this,null,function*(){let e=yield this.Xa.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done})}};var mw=class{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(e){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new k(R.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=yield function(i,o){return N(this,null,function*(){let s=H(i),a={documents:o.map(p=>Cc(s.serializer,p))},u=yield s.Lo("BatchGetDocuments",s.serializer.databaseId,Ie.emptyPath(),a,o.length),l=new Map;u.forEach(p=>{let m=SB(s.serializer,p);l.set(m.key.toString(),m)});let h=[];return o.forEach(p=>{let m=l.get(p.toString());Y(!!m),h.push(m)}),h})}(this.datastore,e);return t.forEach(r=>this.recordVersion(r)),t})}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ti(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((t,r)=>{let i=q.fromPath(r);this.mutations.push(new _c(i,this.precondition(i)))}),yield function(r,i){return N(this,null,function*(){let o=H(r),s={writes:i.map(a=>bc(o.serializer,a))};yield o.Mo("Commit",o.serializer.databaseId,Ie.emptyPath(),s)})}(this.datastore,this.mutations),this.committed=!0})}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw K();t=ee.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new k(R.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ee.min())?Ye.exists(!1):Ye.updateTime(t):Ye.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ee.min()))throw new k(R.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ye.updateTime(t)}return Ye.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}};var yw=class{constructor(e,t,r,i,o){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=o,this._u=r.maxAttempts,this.t_=new Mc(this.asyncQueue,"transaction_retry")}au(){this._u-=1,this.uu()}uu(){this.t_.Go(()=>N(this,null,function*(){let e=new mw(this.datastore),t=this.cu(e);t&&t.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.lu(i)}))}).catch(r=>{this.lu(r)})}))}cu(e){try{let t=this.updateFunction(e);return!kc(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}lu(e){this._u>0&&this.hu(e)?(this._u-=1,this.asyncQueue.enqueueAndForget(()=>(this.uu(),Promise.resolve()))):this.deferred.reject(e)}hu(e){if(e.name==="FirebaseError"){let t=e.code;return t==="aborted"||t==="failed-precondition"||t==="already-exists"||!yM(t)}return!1}};var vw=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=Gh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,s=>N(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new lt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Da(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function Pv(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>N(this,null,function*(){r.isEqual(i)||(yield BM(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function AA(n,e){return N(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield iE(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>IA(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>IA(e.remoteStore,i)),n._onlineComponents=e})}function iE(n){return N(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Pv(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Vn("Error using user provided cache. Falling back to memory cache: "+t),yield Pv(n,new fw)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Pv(n,new fw);return n._offlineComponents})}function Wf(n){return N(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield AA(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield AA(n,new rE))),n._onlineComponents})}function rx(n){return iE(n).then(e=>e.persistence)}function oE(n){return iE(n).then(e=>e.localStore)}function ix(n){return Wf(n).then(e=>e.remoteStore)}function sE(n){return Wf(n).then(e=>e.syncEngine)}function DU(n){return Wf(n).then(e=>e.datastore)}function ma(n){return N(this,null,function*(){let e=yield Wf(n),t=e.eventManager;return t.onListen=rU.bind(null,e.syncEngine),t.onUnlisten=oU.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iU.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=sU.bind(null,e.syncEngine),t})}function CU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield rx(n),t=yield ix(n);return e.setNetworkEnabled(!0),function(i){let o=H(i);return o.L_.delete(0),jc(o)}(t)}))}function bU(n){return n.asyncQueue.enqueue(()=>N(this,null,function*(){let e=yield rx(n),t=yield ix(n);return e.setNetworkEnabled(!1),function(i){return N(this,null,function*(){let o=H(i);o.L_.add(0),yield wa(o),o.q_.set("Offline")})}(t)}))}function TU(n,e){let t=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield function(l,h){let p=H(l);return p.persistence.runTransaction("read document","readonly",m=>p.localDocuments.getDocument(m,h))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new k(R.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){let u=Da(a,`Failed to get document '${o} from cache`);s.reject(u)}})}(yield oE(n),e,t)})),t.promise}function ox(n,e,t={}){let r=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ga({next:m=>{h.Za(),s.enqueueAndForget(()=>Yw(o,p));let y=m.docs.has(a);!y&&m.fromCache?l.reject(new k(R.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new xc(_a(a.path),h,{includeMetadataChanges:!0,_a:!0});return Qw(o,p)}(yield ma(n),n.asyncQueue,e,t,r)})),r.promise}function SU(n,e){let t=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o,s){return N(this,null,function*(){try{let a=yield _f(i,o,!0),u=new Rf(o,a.Ts),l=u.ma(a.documents),h=u.applyChanges(l,!1);s.resolve(h.snapshot)}catch(a){let u=Da(a,`Failed to execute query '${o} against cache`);s.reject(u)}})}(yield oE(n),e,t)})),t.promise}function sx(n,e,t={}){let r=new lt;return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(o,s,a,u,l){let h=new ga({next:m=>{h.Za(),s.enqueueAndForget(()=>Yw(o,p)),m.fromCache&&u.source==="server"?l.reject(new k(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new xc(a,h,{includeMetadataChanges:!0,_a:!0});return Qw(o,p)}(yield ma(n),n.asyncQueue,e,t,r)})),r.promise}function AU(n,e){let t=new ga(e);return n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){H(i).Y_.add(o),o.next()}(yield ma(n),t)})),()=>{t.Za(),n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return function(i,o){H(i).Y_.delete(o)}(yield ma(n),t)}))}}function MU(n,e,t,r){let i=function(s,a){let u;return u=typeof s=="string"?_M().encode(s):s,function(h,p){return new gw(h,p)}(function(h,p){if(h instanceof Uint8Array)return SA(h,p);if(h instanceof ArrayBuffer)return SA(new Uint8Array(h),p);if(h instanceof ReadableStream)return h.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(t,Lc(e));n.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){IU(yield sE(n),i,r)}))}function xU(n,e){return n.asyncQueue.enqueue(()=>N(this,null,function*(){return function(r,i){let o=H(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.Gr.getNamedQuery(s,i))}(yield oE(n),e)}))}function ax(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var MA=new Map;function aE(n,e,t){if(!t)throw new k(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function uE(n,e,t,r){if(e===!0&&r===!0)throw new k(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xA(n){if(!q.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function RA(n){if(q.isDocumentKey(n))throw new k(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Kf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function be(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new k(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Kf(n);throw new k(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ux(n,e){if(e<=0)throw new k(R.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}var Pf=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new k(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new k(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}uE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ax((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new k(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},To=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Pf({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new k(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Pf(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new kv;switch(r.type){case"firstParty":return new Lv(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new k(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=MA.get(t);r&&(O("ComponentProvider","Removing Datastore"),MA.delete(t),r.terminate())}(this),Promise.resolve()}};function cx(n,e,t,r={}){var i;let o=(n=be(n,To))._getSettings(),s=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Vn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=st.MOCK_USER;else{a=OI(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new k(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new st(l)}n._authCredentials=new Ov(new zh(a,u))}}var _t=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ve=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},ir=class n extends _t{constructor(e,t,r){super(e,t,_a(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ve(this.firestore,null,new q(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function cE(n,e,...t){if(n=qe(n),aE("collection","path",e),n instanceof To){let r=Ie.fromString(e,...t);return RA(r),new ir(n,null,r)}{if(!(n instanceof Ve||n instanceof ir))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return RA(r),new ir(n.firestore,null,r)}}function lx(n,e){if(n=be(n,To),aE("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new k(R.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new _t(n,null,function(r){return new Ln(Ie.emptyPath(),r)}(e))}function Bc(n,e,...t){if(n=qe(n),arguments.length===1&&(e=Gh.newId()),aE("doc","path",e),n instanceof To){let r=Ie.fromString(e,...t);return xA(r),new Ve(n,null,new q(r))}{if(!(n instanceof Ve||n instanceof ir))throw new k(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(Ie.fromString(e,...t));return xA(r),new Ve(n.firestore,n instanceof ir?n.converter:null,new q(r))}}function lE(n,e){return n=qe(n),e=qe(e),(n instanceof Ve||n instanceof ir)&&(e instanceof Ve||e instanceof ir)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function dE(n,e){return n=qe(n),e=qe(e),n instanceof _t&&e instanceof _t&&n.firestore===e.firestore&&Fc(n._query,e._query)&&n.converter===e.converter}var kf=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Mc(this,"async_queue_retry"),this.Vu=()=>{let r=qh();r&&O("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=qh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=qh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new lt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return N(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Mi(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),a}(r);throw Ze("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=rw.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&K()}verifyOperationInProgress(){}wu(){return N(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};function _w(n){return function(t,r){if(typeof t!="object"||t===null)return!1;let i=t;for(let o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(n,["next","error","complete"])}var ww=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new lt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}};var dx=-1,Ge=class extends To{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new kf,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new kf(e),this._firestoreClient=void 0,yield e}})}};function wt(n){if(n._terminated)throw new k(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hx(n),n._firestoreClient}function hx(n){var e,t,r;let i=n._freezeSettings(),o=function(a,u,l,h){return new Gv(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,ax(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new vw(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(a){let u=a?._online.build();return{_offline:a?._offline.build(u),_online:u}}(n._componentsProvider))}function fx(n,e){Vn("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=n._freezeSettings();return gx(n,rE.provider,{build:r=>new Nf(r,t.cacheSizeBytes,e?.forceOwnership)}),Promise.resolve()}function px(n){return N(this,null,function*(){Vn("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=n._freezeSettings();gx(n,rE.provider,{build:t=>new pw(t,e.cacheSizeBytes)})})}function gx(n,e,t){if((n=be(n,Ge))._firestoreClient||n._terminated)throw new k(R.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(n._componentsProvider||n._getSettings().localCache)throw new k(R.FAILED_PRECONDITION,"SDK cache is already specified.");n._componentsProvider={_online:e,_offline:t},hx(n)}function mx(n){if(n._initialized&&!n._terminated)throw new k(R.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let e=new lt;return n._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield function(r){return N(this,null,function*(){if(!_i.D())return Promise.resolve();let i=r+"main";yield _i.delete(i)})}(zw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function yx(n){return function(t){let r=new lt;return t.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return dU(yield sE(t),r)})),r.promise}(wt(n=be(n,Ge)))}function vx(n){return CU(wt(n=be(n,Ge)))}function _x(n){return bU(wt(n=be(n,Ge)))}function wx(n,e){let t=wt(n=be(n,Ge)),r=new ww;return MU(t,n._databaseId,e,r),r}function Ex(n,e){return xU(wt(n=be(n,Ge)),e).then(t=>t?new _t(n,null,t.query):null)}var ur=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(et.fromBase64String(e))}catch(t){throw new k(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Bn=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new k(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var kr=class{constructor(e){this._methodName=e}};var So=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new k(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new k(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}};var Rc=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var RU=/^__.*__$/,Ew=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new jn(e,this.data,this.fieldMask,t,this.fieldTransforms):new bi(e,this.data,t,this.fieldTransforms)}},Of=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new jn(e,this.data,this.fieldMask,t,this.fieldTransforms)}};function Ix(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var Ff=class n{constructor(e,t,r,i,o,s){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Vf(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Ix(this.Cu)&&RU.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Iw=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Lc(e)}Qu(e,t,r,i=!1){return new Ff({Cu:e,methodName:t,qu:r,path:Je.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ro(n){let e=n._freezeSettings(),t=Lc(n._databaseId);return new Iw(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Qf(n,e,t,r,i,o={}){let s=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);pE("Data must be an object, but it was:",s,r);let a=bx(r,s),u,l;if(o.merge)u=new pn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let h=[];for(let p of o.mergeFields){let m=Sw(e,p,t);if(!s.contains(m))throw new k(R.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);Sx(h,m)||h.push(m)}u=new pn(h),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Ew(new St(a),u,l)}var Nc=class n extends kr{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof n}};function Dx(n,e,t){return new Ff({Cu:3,qu:e.settings.qu,methodName:n._methodName,xu:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}var Dw=class n extends kr{_toFieldTransform(e){return new Do(e.path,new Di)}isEqual(e){return e instanceof n}},Cw=class n extends kr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Dx(this,e,!0),r=this.Ku.map(o=>No(o,t)),i=new Nr(r);return new Do(e.path,i)}isEqual(e){return e instanceof n&&jp(this.Ku,e.Ku)}},bw=class n extends kr{constructor(e,t){super(e),this.Ku=t}_toFieldTransform(e){let t=Dx(this,e,!0),r=this.Ku.map(o=>No(o,t)),i=new Pr(r);return new Do(e.path,i)}isEqual(e){return e instanceof n&&jp(this.Ku,e.Ku)}},Tw=class n extends kr{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new Ci(e.serializer,lM(e.serializer,this.$u));return new Do(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function hE(n,e,t,r){let i=n.Qu(1,e,t);pE("Data must be an object, but it was:",i,r);let o=[],s=St.empty();xo(r,(u,l)=>{let h=gE(e,u,t);l=qe(l);let p=i.Nu(h);if(l instanceof Nc)o.push(h);else{let m=No(l,p);m!=null&&(o.push(h),s.set(h,m))}});let a=new pn(o);return new Of(s,a,i.fieldTransforms)}function fE(n,e,t,r,i,o){let s=n.Qu(1,e,t),a=[Sw(e,r,t)],u=[i];if(o.length%2!=0)throw new k(R.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)a.push(Sw(e,o[m])),u.push(o[m+1]);let l=[],h=St.empty();for(let m=a.length-1;m>=0;--m)if(!Sx(l,a[m])){let y=a[m],b=u[m];b=qe(b);let A=s.Nu(y);if(b instanceof Nc)l.push(y);else{let M=No(b,A);M!=null&&(l.push(y),h.set(y,M))}}let p=new pn(l);return new Of(h,p,s.fieldTransforms)}function Cx(n,e,t,r=!1){return No(t,n.Qu(r?4:3,e))}function No(n,e){if(Tx(n=qe(n)))return pE("Unsupported field value:",e,n),bx(n,e);if(n instanceof kr)return function(r,i){if(!Ix(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],s=0;for(let a of r){let u=No(a,i.Lu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lM(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=ze.fromDate(r);return{timestampValue:aa(i.serializer,o)}}if(r instanceof ze){let o=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:aa(i.serializer,o)}}if(r instanceof So)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ur)return{bytesValue:wM(i.serializer,r._byteString)};if(r instanceof Ve){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Bu(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:$w(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Rc)return function(s,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:s.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Uw(a.serializer,u)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${Kf(r)}`)}(n,e)}function bx(n,e){let t={};return GA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xo(n,(r,i)=>{let o=No(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function Tx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ze||n instanceof So||n instanceof ur||n instanceof Ve||n instanceof kr||n instanceof Rc)}function pE(n,e,t){if(!Tx(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Kf(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function Sw(n,e,t){if((e=qe(e))instanceof Bn)return e._internalPath;if(typeof e=="string")return gE(n,e);throw Vf("Field path arguments must be of type string or ",n,!1,void 0,t)}var NU=new RegExp("[~\\*/\\[\\]]");function gE(n,e,t){if(e.search(NU)>=0)throw Vf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Bn(...e.split("."))._internalPath}catch{throw Vf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Vf(n,e,t,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new k(R.INVALID_ARGUMENT,a+n+u)}function Sx(n,e){return n.some(t=>t.isEqual(e))}var Ao=class{constructor(e,t,r,i,o){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Ve(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Aw(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Yf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Aw=class extends Ao{data(){return super.data()}};function Yf(n,e){return typeof e=="string"?gE(n,e):e instanceof Bn?e._internalPath:e._delegate._internalPath}function Ax(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new k(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Pc=class{},Mo=class extends Pc{};function Vr(n,e,...t){let r=[];e instanceof Pc&&r.push(e),r=r.concat(t),function(o){let s=o.filter(u=>u instanceof Mw).length,a=o.filter(u=>u instanceof Lf).length;if(s>1||s>0&&a>0)throw new k(R.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(let i of r)n=i._apply(n);return n}var Lf=class n extends Mo{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=this._parse(e);return Lx(e._query,t),new _t(e.firestore,e.converter,o_(e._query,t))}_parse(e){let t=Ro(e.firestore);return function(o,s,a,u,l,h,p){let m;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new k(R.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){PA(p,h);let y=[];for(let b of p)y.push(NA(u,o,b));m={arrayValue:{values:y}}}else m=NA(u,o,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||PA(p,h),m=Cx(a,s,p,h==="in"||h==="not-in");return _e.create(l,h,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Mx(n,e,t){let r=e,i=Yf("where",n);return Lf._create(i,r,t)}var Mw=class n extends Pc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:Re.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(i,o){let s=i,a=o.getFlattenedFilters();for(let u of a)Lx(s,u),s=o_(s,u)}(e._query,t),new _t(e.firestore,e.converter,o_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var xw=class n extends Mo{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new n(e,t)}_apply(e){let t=function(i,o,s){if(i.startAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new k(R.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Eo(o,s)}(e._query,this._field,this._direction);return new _t(e.firestore,e.converter,function(i,o){let s=i.explicitOrderBy.concat([o]);return new Ln(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}};function xx(n,e="asc"){let t=e,r=Yf("orderBy",n);return xw._create(r,t)}var jf=class n extends Mo{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){return new _t(e.firestore,e.converter,nf(e._query,this._limit,this._limitType))}};function Rx(n){return ux("limit",n),jf._create("limit",n,"F")}function Nx(n){return ux("limitToLast",n),jf._create("limitToLast",n,"L")}var Bf=class n extends Mo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Vx(e,this.type,this._docOrFields,this._inclusive);return new _t(e.firestore,e.converter,function(i,o){return new Ln(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,t))}};function Px(...n){return Bf._create("startAt",n,!0)}function kx(...n){return Bf._create("startAfter",n,!1)}var Uf=class n extends Mo{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new n(e,t,r)}_apply(e){let t=Vx(e,this.type,this._docOrFields,this._inclusive);return new _t(e.firestore,e.converter,function(i,o){return new Ln(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,t))}};function Ox(...n){return Uf._create("endBefore",n,!1)}function Fx(...n){return Uf._create("endAt",n,!0)}function Vx(n,e,t,r){if(t[0]=qe(t[0]),t[0]instanceof Ao)return function(o,s,a,u,l){if(!u)throw new k(R.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);let h=[];for(let p of Xs(o))if(p.field.isKeyField())h.push(wo(s,u.key));else{let m=u.data.field(p.field);if(Hf(m))throw new k(R.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){let y=p.field.canonicalString();throw new k(R.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new sr(h,l)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{let i=Ro(n.firestore);return function(s,a,u,l,h,p){let m=s.explicitOrderBy;if(h.length>m.length)throw new k(R.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let y=[];for(let b=0;b<h.length;b++){let A=h[b];if(m[b].field.isKeyField()){if(typeof A!="string")throw new k(R.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof A}`);if(!jw(s)&&A.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${A}' contains a slash.`);let M=s.path.child(Ie.fromString(A));if(!q.isDocumentKey(M))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${M}' is not because it contains an odd number of segments.`);let L=new q(M);y.push(wo(a,L))}else{let M=Cx(u,l,A);y.push(M)}}return new sr(y,p)}(n._query,n.firestore._databaseId,i,e,t,r)}}function NA(n,e,t){if(typeof(t=qe(t))=="string"){if(t==="")throw new k(R.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!jw(e)&&t.indexOf("/")!==-1)throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let r=e.path.child(Ie.fromString(t));if(!q.isDocumentKey(r))throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wo(n,new q(r))}if(t instanceof Ve)return wo(n,t._key);throw new k(R.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kf(t)}.`)}function PA(n,e){if(!Array.isArray(n)||n.length===0)throw new k(R.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Lx(n,e){let t=function(i,o){for(let s of i)for(let a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new k(R.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}var ya=class{convertValue(e,t="none"){switch(_o(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(wi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return xo(e,(i,o)=>{r[i]=this.convertValue(o,t)}),r}convertVectorValue(e){var t,r,i;let o=(i=(r=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(s=>He(s.doubleValue));return new Rc(o)}convertGeoPoint(e){return new So(He(e.latitude),He(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=Vw(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(mc(e));default:return null}}convertTimestamp(e){let t=Rr(e);return new ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=Ie.fromString(e);Y(RM(r));let i=new Ei(r.get(1),r.get(3)),o=new q(r.popFirst(5));return i.isEqual(t)||Ze(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),o}};function Zf(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}var Rw=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,t)}};var xr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},bn=class extends Ao{constructor(e,t,r,i,o,s){super(e,t,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new yi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(Yf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}},yi=class extends bn{data(e={}){return super.data(e)}},Un=class{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new xr(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new yi(this._firestore,this._userDataWriter,r.key,r,new xr(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new k(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{let u=new yi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{let u=new yi(i._firestore,i._userDataWriter,a.doc.key,a.doc,new xr(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),h=s.indexOf(a.doc.key)),{type:PU(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function PU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}function mE(n,e){return n instanceof bn&&e instanceof bn?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(n._document===null?e._document===null:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Un&&e instanceof Un&&n._firestore===e._firestore&&dE(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function jx(n){n=be(n,Ve);let e=be(n.firestore,Ge);return ox(wt(e),n._key).then(t=>wE(e,n,t))}var Or=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new ur(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ve(this.firestore,null,t)}};function Bx(n){n=be(n,Ve);let e=be(n.firestore,Ge),t=wt(e),r=new Or(e);return TU(t,n._key).then(i=>new bn(e,r,n._key,i,new xr(i!==null&&i.hasLocalMutations,!0),n.converter))}function Ux(n){n=be(n,Ve);let e=be(n.firestore,Ge);return ox(wt(e),n._key,{source:"server"}).then(t=>wE(e,n,t))}function $x(n){n=be(n,_t);let e=be(n.firestore,Ge),t=wt(e),r=new Or(e);return Ax(n._query),sx(t,n._query).then(i=>new Un(e,r,n,i))}function Hx(n){n=be(n,_t);let e=be(n.firestore,Ge),t=wt(e),r=new Or(e);return SU(t,n._query).then(i=>new Un(e,r,n,i))}function qx(n){n=be(n,_t);let e=be(n.firestore,Ge),t=wt(e),r=new Or(e);return sx(t,n._query,{source:"server"}).then(i=>new Un(e,r,n,i))}function yE(n,e,t){n=be(n,Ve);let r=be(n.firestore,Ge),i=Zf(n.converter,e,t);return Ca(r,[Qf(Ro(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,Ye.none())])}function vE(n,e,t,...r){n=be(n,Ve);let i=be(n.firestore,Ge),o=Ro(i),s;return s=typeof(e=qe(e))=="string"||e instanceof Bn?fE(o,"updateDoc",n._key,e,t,r):hE(o,"updateDoc",n._key,e),Ca(i,[s.toMutation(n._key,Ye.exists(!0))])}function zx(n){return Ca(be(n.firestore,Ge),[new Ti(n._key,Ye.none())])}function Gx(n,e){let t=be(n.firestore,Ge),r=Bc(n),i=Zf(n.converter,e);return Ca(t,[Qf(Ro(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,Ye.exists(!1))]).then(()=>r)}function _E(n,...e){var t,r,i;n=qe(n);let o={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||_w(e[s])||(o=e[s],s++);let a={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(_w(e[s])){let p=e[s];e[s]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[s+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[s+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(n instanceof Ve)l=be(n.firestore,Ge),h=_a(n._key.path),u={next:p=>{e[s]&&e[s](wE(l,n,p))},error:e[s+1],complete:e[s+2]};else{let p=be(n,_t);l=be(p.firestore,Ge),h=p._query;let m=new Or(l);u={next:y=>{e[s]&&e[s](new Un(l,m,p,y))},error:e[s+1],complete:e[s+2]},Ax(n._query)}return function(m,y,b,A){let M=new ga(A),L=new xc(y,M,b);return m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Qw(yield ma(m),L)})),()=>{M.Za(),m.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return Yw(yield ma(m),L)}))}}(wt(l),h,a,u)}function Wx(n,e){return AU(wt(n=be(n,Ge)),_w(e)?e:{next:e})}function Ca(n,e){return function(r,i){let o=new lt;return r.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){return aU(yield sE(r),i,o)})),o.promise}(wt(n),e)}function wE(n,e,t){let r=t.docs.get(e._key),i=new Or(n);return new bn(n,i,e._key,r,new xr(t.hasPendingWrites,t.fromCache),e.converter)}var kU={maxAttempts:5};var $f=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Ro(e)}set(e,t,r){this._verifyNotCommitted();let i=gi(e,this._firestore),o=Zf(i.converter,t,r),s=Qf(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,Ye.none())),this}update(e,t,r,...i){this._verifyNotCommitted();let o=gi(e,this._firestore),s;return s=typeof(t=qe(t))=="string"||t instanceof Bn?fE(this._dataReader,"WriteBatch.update",o._key,t,r,i):hE(this._dataReader,"WriteBatch.update",o._key,t),this._mutations.push(s.toMutation(o._key,Ye.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=gi(e,this._firestore);return this._mutations=this._mutations.concat(new Ti(t._key,Ye.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new k(R.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function gi(n,e){if((n=qe(n)).firestore!==e)throw new k(R.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}var Nw=class extends class{constructor(t,r){this._firestore=t,this._transaction=r,this._dataReader=Ro(t)}get(t){let r=gi(t,this._firestore),i=new Rw(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return K();let s=o[0];if(s.isFoundDocument())return new Ao(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new Ao(this._firestore,i,r._key,null,r.converter);throw K()})}set(t,r,i){let o=gi(t,this._firestore),s=Zf(o.converter,r,i),a=Qf(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(t,r,i,...o){let s=gi(t,this._firestore),a;return a=typeof(r=qe(r))=="string"||r instanceof Bn?fE(this._dataReader,"Transaction.update",s._key,r,i,o):hE(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(t){let r=gi(t,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=gi(e,this._firestore),r=new Or(this._firestore);return super.get(e).then(i=>new bn(this._firestore,r,t._key,i._document,new xr(!1,!1),t.converter))}};function Kx(n,e,t){n=be(n,Ge);let r=Object.assign(Object.assign({},kU),t);return function(o){if(o.maxAttempts<1)throw new k(R.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){let u=new lt;return o.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let l=yield DU(o);new yw(o.asyncQueue,l,a,s,u).au()})),u.promise}(wt(n),i=>e(new Nw(n,i)),r)}function Qx(){return new Nc("deleteField")}function Yx(){return new Dw("serverTimestamp")}function Zx(...n){return new Cw("arrayUnion",n)}function Jx(...n){return new bw("arrayRemove",n)}function Xx(n){return new Tw("increment",n)}(function(e,t=!0){(function(i){va=i})(LI),Ka(new Oi("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),a=new Ge(new Fv(r.getProvider("auth-internal")),new Bv(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new k(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ei(l.options.projectId,h)}(s,i),s);return o=Object.assign({useFetchStreams:t},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),$r(RS,"4.7.3",e),$r(RS,"4.7.3","esm2017")})();var OU="@firebase/firestore-compat",FU="0.3.38";function TE(n,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new k("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function eR(){if(typeof Uint8Array>"u")throw new k("unimplemented","Uint8Arrays are not available in this environment.")}function tR(){if(!WA())throw new k("unimplemented","Blobs are unavailable in Firestore in this environment.")}var Jf=class n{constructor(e){this._delegate=e}static fromBase64String(e){return tR(),new n(ur.fromBase64String(e))}static fromUint8Array(e){return eR(),new n(ur.fromUint8Array(e))}toBase64(){return tR(),this._delegate.toBase64()}toUint8Array(){return eR(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function EE(n){return VU(n,["next","error","complete"])}function VU(n,e){if(typeof n!="object"||n===null)return!1;let t=n;for(let r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}var IE=class{enableIndexedDbPersistence(e,t){return fx(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return px(e._delegate)}clearIndexedDbPersistence(e){return mx(e._delegate)}},Xf=class{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ei||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){let t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Vn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},t),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,t,r={}){cx(this._delegate,e,t,r)}enableNetwork(){return vx(this._delegate)}disableNetwork(){return _x(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,uE("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return yx(this._delegate)}onSnapshotsInSync(e){return Wx(this._delegate,e)}get app(){if(!this._appCompat)throw new k("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Sa(this,cE(this._delegate,e))}catch(t){throw $t(t,"collection()","Firestore.collection()")}}doc(e){try{return new cr(this,Bc(this._delegate,e))}catch(t){throw $t(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Fo(this,lx(this._delegate,e))}catch(t){throw $t(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Kx(this._delegate,t=>e(new ep(this,t)))}batch(){return wt(this._delegate),new tp(new $f(this._delegate,e=>Ca(this._delegate,e)))}loadBundle(e){return wx(this._delegate,e)}namedQuery(e){return Ex(this._delegate,e).then(t=>t?new Fo(this,t):null)}},ba=class extends ya{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jf(new ur(e))}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return cr.forKey(t,this.firestore,null)}};function LU(n){kA(n)}var ep=class{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}get(e){let t=Po(e);return this._delegate.get(t).then(r=>new ko(this._firestore,new bn(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){let i=Po(e);return r?(TE("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Po(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Po(e);return this._delegate.delete(t),this}},tp=class{constructor(e){this._delegate=e}set(e,t,r){let i=Po(e);return r?(TE("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){let o=Po(e);return arguments.length===2?this._delegate.update(o,t):this._delegate.update(o,t,r,...i),this}delete(e){let t=Po(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}},Ta=class n{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){let r=new yi(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Oo(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){let r=n.INSTANCES,i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(t);return o||(o=new n(e,new ba(e),t),i.set(t,o)),o}};Ta.INSTANCES=new WeakMap;var cr=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}static forPath(e,t,r){if(e.length%2!==0)throw new k("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new n(t,new Ve(t._delegate,r,new q(e)))}static forKey(e,t,r){return new n(t,new Ve(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Sa(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Sa(this.firestore,cE(this._delegate,e))}catch(t){throw $t(t,"collection()","DocumentReference.collection()")}}isEqual(e){return e=qe(e),e instanceof Ve?lE(this._delegate,e):!1}set(e,t){t=TE("DocumentReference.set",t);try{return t?yE(this._delegate,e,t):yE(this._delegate,e)}catch(r){throw $t(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return arguments.length===1?vE(this._delegate,e):vE(this._delegate,e,t,...r)}catch(i){throw $t(i,"updateDoc()","DocumentReference.update()")}}delete(){return zx(this._delegate)}onSnapshot(...e){let t=nR(e),r=rR(e,i=>new ko(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return _E(this._delegate,t,r)}get(e){let t;return e?.source==="cache"?t=Bx(this._delegate):e?.source==="server"?t=Ux(this._delegate):t=jx(this._delegate),t.then(r=>new ko(this.firestore,new bn(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function $t(n,e,t){return n.message=n.message.replace(e,t),n}function nR(n){for(let e of n)if(typeof e=="object"&&!EE(e))return e;return{}}function rR(n,e){var t,r;let i;return EE(n[0])?i=n[0]:EE(n[1])?i=n[1]:typeof n[0]=="function"?i={next:n[0],error:n[1],complete:n[2]}:i={next:n[1],error:n[2],complete:n[3]},{next:o=>{i.next&&i.next(e(o))},error:(t=i.error)===null||t===void 0?void 0:t.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}var ko=class{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new cr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return mE(this._delegate,e._delegate)}},Oo=class extends ko{data(e){let t=this._delegate.data(e);return this._delegate._converter||OA(t!==void 0,"Document in a QueryDocumentSnapshot should exist"),t}},Fo=class n{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new ba(e)}where(e,t,r){try{return new n(this.firestore,Vr(this._delegate,Mx(e,t,r)))}catch(i){throw $t(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new n(this.firestore,Vr(this._delegate,xx(e,t)))}catch(r){throw $t(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new n(this.firestore,Vr(this._delegate,Rx(e)))}catch(t){throw $t(t,"limit()","Query.limit()")}}limitToLast(e){try{return new n(this.firestore,Vr(this._delegate,Nx(e)))}catch(t){throw $t(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new n(this.firestore,Vr(this._delegate,Px(...e)))}catch(t){throw $t(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new n(this.firestore,Vr(this._delegate,kx(...e)))}catch(t){throw $t(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new n(this.firestore,Vr(this._delegate,Ox(...e)))}catch(t){throw $t(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new n(this.firestore,Vr(this._delegate,Fx(...e)))}catch(t){throw $t(t,"endAt()","Query.endAt()")}}isEqual(e){return dE(this._delegate,e._delegate)}get(e){let t;return e?.source==="cache"?t=Hx(this._delegate):e?.source==="server"?t=qx(this._delegate):t=$x(this._delegate),t.then(r=>new Uc(this.firestore,new Un(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){let t=nR(e),r=rR(e,i=>new Uc(this.firestore,new Un(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return _E(this._delegate,t,r)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}},DE=class{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Oo(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Uc=class{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Fo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Oo(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new DE(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new Oo(this._firestore,r))})}isEqual(e){return mE(this._delegate,e._delegate)}},Sa=class n extends Fo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let e=this._delegate.parent;return e?new cr(this.firestore,e):null}doc(e){try{return e===void 0?new cr(this.firestore,Bc(this._delegate)):new cr(this.firestore,Bc(this._delegate,e))}catch(t){throw $t(t,"doc()","CollectionReference.doc()")}}add(e){return Gx(this._delegate,e).then(t=>new cr(this.firestore,t))}isEqual(e){return lE(this._delegate,e._delegate)}withConverter(e){return new n(this.firestore,e?this._delegate.withConverter(Ta.getInstance(this.firestore,e)):this._delegate.withConverter(null))}};function Po(n){return be(n,Ve)}var CE=class n{constructor(...e){this._delegate=new Bn(...e)}static documentId(){return new n(Je.keyField().canonicalString())}isEqual(e){return e=qe(e),e instanceof Bn?this._delegate._internalPath.isEqual(e._internalPath):!1}};var bE=class n{constructor(e){this._delegate=e}static serverTimestamp(){let e=Yx();return e._methodName="FieldValue.serverTimestamp",new n(e)}static delete(){let e=Qx();return e._methodName="FieldValue.delete",new n(e)}static arrayUnion(...e){let t=Zx(...e);return t._methodName="FieldValue.arrayUnion",new n(t)}static arrayRemove(...e){let t=Jx(...e);return t._methodName="FieldValue.arrayRemove",new n(t)}static increment(e){let t=Xx(e);return t._methodName="FieldValue.increment",new n(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}};var jU={Firestore:Xf,GeoPoint:So,Timestamp:ze,Blob:Jf,Transaction:ep,WriteBatch:tp,DocumentReference:cr,DocumentSnapshot:ko,Query:Fo,QueryDocumentSnapshot:Oo,QuerySnapshot:Uc,CollectionReference:Sa,FieldPath:CE,FieldValue:bE,setLogLevel:LU,CACHE_SIZE_UNLIMITED:dx};function BU(n,e){n.INTERNAL.registerComponent(new Oi("firestore-compat",t=>{let r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},jU)))}function UU(n){BU(n,(e,t)=>new Xf(e,t,new IE)),n.registerVersion(OU,FU)}UU(un);function $U(n,e=eu){return new pe(t=>{let r;return e!=null?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}function iR(n,e){return $U(n,e)}function HU(n,e){return iR(n,e).pipe(Ui(void 0),ru(),Q(t=>{let[r,i]=t;return i.exists?r?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}function ME(n,e){return iR(n,e).pipe(Q(t=>({payload:t,type:"query"})))}var np=class{ref;afs;constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){let r=this.ref.collection(e),{ref:i,query:o}=aR(r,t);return new ip(i,o,this.afs)}snapshotChanges(){return HU(this.ref,this.afs.schedulers.outsideAngular).pipe(rn)}valueChanges(e={}){return this.snapshotChanges().pipe(Q(({payload:t})=>e.idField?fe(P({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return Ce(this.ref.get(e)).pipe(rn)}};function rp(n,e){return ME(n,e).pipe(Ui(void 0),ru(),Q(t=>{let[r,i]=t,o=i.payload.docChanges(),s=o.map(a=>({type:a.type,payload:a}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,u)=>{let l=o.find(p=>p.doc.ref.isEqual(a.ref)),h=r?.payload.docs.find(p=>p.ref.isEqual(a.ref));l&&JSON.stringify(l.doc.metadata)===JSON.stringify(a.metadata)||!l&&h&&JSON.stringify(h.metadata)===JSON.stringify(a.metadata)||s.push({type:"modified",payload:{oldIndex:u,newIndex:u,type:"modified",doc:a}})}),s}))}function oR(n,e,t){return rp(n,t).pipe(Bi((r,i)=>qU(r,i.map(o=>o.payload),e),[]),ug(),Q(r=>r.map(i=>({type:i.type,payload:i}))))}function qU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=zU(n,r))}),n}function SE(n,e,t,...r){let i=n.slice();return i.splice(e,t,...r),i}function zU(n,e){switch(e.type){case"added":if(!(n[e.newIndex]&&n[e.newIndex].doc.ref.isEqual(e.doc.ref)))return SE(n,e.newIndex,0,e);break;case"modified":if(n[e.oldIndex]==null||n[e.oldIndex].doc.ref.isEqual(e.doc.ref))if(e.oldIndex!==e.newIndex){let t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}else return SE(n,e.newIndex,1,e);break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return SE(n,e.oldIndex,1);break}return n}function sR(n){return(!n||n.length===0)&&(n=["added","removed","modified"]),n}var ip=class{ref;query;afs;constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=rp(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe(Q(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Ui(void 0),ru(),vt(([r,i])=>i.length>0||!r),Q(([,r])=>r),rn)}auditTrail(e){return this.stateChanges(e).pipe(Bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=sR(e);return oR(this.query,t,this.afs.schedulers.outsideAngular).pipe(rn)}valueChanges(e={}){return ME(this.query,this.afs.schedulers.outsideAngular).pipe(Q(t=>t.payload.docs.map(r=>e.idField?fe(P({},r.data()),{[e.idField]:r.id}):r.data())),rn)}get(e){return Ce(this.query.get(e)).pipe(rn)}add(e){return this.ref.add(e)}doc(e){return new np(this.ref.doc(e),this.afs)}},AE=class{query;afs;constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return!e||e.length===0?rp(this.query,this.afs.schedulers.outsideAngular).pipe(rn):rp(this.query,this.afs.schedulers.outsideAngular).pipe(Q(t=>t.filter(r=>e.indexOf(r.type)>-1)),vt(t=>t.length>0),rn)}auditTrail(e){return this.stateChanges(e).pipe(Bi((t,r)=>[...t,...r],[]))}snapshotChanges(e){let t=sR(e);return oR(this.query,t,this.afs.schedulers.outsideAngular).pipe(rn)}valueChanges(e={}){return ME(this.query,this.afs.schedulers.outsideAngular).pipe(Q(r=>r.payload.docs.map(i=>e.idField?P({[e.idField]:i.id},i.data()):i.data())),rn)}get(e){return Ce(this.query.get(e)).pipe(rn)}},GU=new W("angularfire2.enableFirestorePersistence"),WU=new W("angularfire2.firestore.persistenceSettings"),KU=new W("angularfire2.firestore.settings"),QU=new W("angularfire2.firestore.use-emulator");function aR(n,e=t=>t){return{query:e(n),ref:n}}var sn=(()=>{class n{schedulers;firestore;persistenceEnabled$;constructor(t,r,i,o,s,a,u,l,h,p,m,y,b,A,M,L,G){this.schedulers=u;let V=ec(t,a,r),Z=h;p&&Iv(V,a,m,b,A,M,y,L),[this.firestore,this.persistenceEnabled$]=Ph(`${V.name}.firestore`,"AngularFirestore",V.name,()=>{let re=a.runOutsideAngular(()=>V.firestore());if(o&&re.settings(o),Z&&re.useEmulator(...Z),i&&!ro(s)){let X=()=>{try{return Ce(re.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(E){return typeof console<"u"&&console.warn(E),te(!1)}};return[re,a.runOutsideAngular(X)]}else return[re,te(!1)]},[o,Z,i])}collection(t,r){let i;typeof t=="string"?i=this.firestore.collection(t):i=t;let{ref:o,query:s}=aR(i,r),a=this.schedulers.ngZone.run(()=>o);return new ip(a,s,this)}collectionGroup(t,r){let i=r||(s=>s),o=this.firestore.collectionGroup(t);return new AE(i(o),this)}doc(t){let r;typeof t=="string"?r=this.firestore.doc(t):r=t;let i=this.schedulers.ngZone.run(()=>r);return new np(i,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(r){return new(r||n)(F(js),F(Bs,8),F(GU,8),F(KU,8),F(Qt),F(we),F(xh),F(WU,8),F(QU,8),F(AS,8),F(mv,8),F(yv,8),F(vv,8),F(_v,8),F(wv,8),F(Ev,8),F(co,8))};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"any"})}return n})();var uR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/header",this.headerRef=t.collection(this.dbPath)}getHeader(){return this.headerRef}createHeader(t){return this.headerRef.add(P({},t))}deleteHeader(t){return this.headerRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ZU(n,e){if(n&1){let t=Yt();U(0,"div",14)(1,"span"),me(2),$(),U(3,"button",15),Oe("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),$()()}if(n&2){let t=e.$implicit;ne(2),Ji(t.name)}}var cR=(()=>{class n{constructor(t){this.headerService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.header=[],this.myHeader=new Ah,console.log(this.headerService),this.headerService.getHeader().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.header=r,console.log(this.header)})}AgregarJob(){console.log(this.myHeader),this.headerService.createHeader(this.myHeader).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.headerService.deleteHeader(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(uR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-header"]],decls:24,vars:9,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","name","placeholder","name",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","goalLife","placeholder","goalLife",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","photo","placeholder","photo (url)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","email","placeholder","email (email@domain.com)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","phoneNumber","placeholder","phoneNumber (999-999-9999)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","location (city, country)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","socialNetwork","placeholder","socialNetwork (user@site)",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p",2),me(3,"header items"),$()()(),U(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),Ae("ngModelChange",function(s){return Me(i.myHeader.name,s)||(i.myHeader.name=s),s}),$(),ve(8,"br"),U(9,"input",5),Ae("ngModelChange",function(s){return Me(i.myHeader.goalLife,s)||(i.myHeader.goalLife=s),s}),$(),ve(10,"br"),U(11,"input",6),Ae("ngModelChange",function(s){return Me(i.myHeader.photoUrl,s)||(i.myHeader.photoUrl=s),s}),$(),ve(12,"br"),U(13,"input",7),Ae("ngModelChange",function(s){return Me(i.myHeader.email,s)||(i.myHeader.email=s),s}),$(),ve(14,"br"),U(15,"input",8),Ae("ngModelChange",function(s){return Me(i.myHeader.phoneNumber,s)||(i.myHeader.phoneNumber=s),s}),$(),ve(16,"br"),U(17,"input",9),Ae("ngModelChange",function(s){return Me(i.myHeader.location,s)||(i.myHeader.location=s),s}),$(),ve(18,"br"),U(19,"input",10),Ae("ngModelChange",function(s){return Me(i.myHeader.socialNetwork,s)||(i.myHeader.socialNetwork=s),s}),$(),ve(20,"br"),U(21,"input",11),Oe("click",function(){return i.AgregarJob()}),$()()(),U(22,"div",12),Ot(23,ZU,5,1,"div",13),$()()),r&2&&(ne(7),Se("ngModel",i.myHeader.name),ne(2),Se("ngModel",i.myHeader.goalLife),ne(2),Se("ngModel",i.myHeader.photoUrl),ne(2),Se("ngModel",i.myHeader.email),ne(2),Se("ngModel",i.myHeader.phoneNumber),ne(2),Se("ngModel",i.myHeader.location),ne(2),Se("ngModel",i.myHeader.socialNetwork),ne(2),Vt("value",i.btntxt),ne(2),Ft("ngForOf",i.header))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff;margin:2rem auto 1rem;max-width:500px;text-align:left;padding-left:1rem}.container.color-light[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:16px;box-shadow:0 8px 20px #0003;max-width:500px;margin:2rem auto}.col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}input[type=text][_ngcontent-%COMP%]{padding:.7rem;font-size:1rem;border:1px solid #ccc;border-radius:8px}input[type=submit][_ngcontent-%COMP%]{padding:.7rem;background-color:#007acc;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:background-color .3s ease}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#005fa3}.life-container[_ngcontent-%COMP%]{color:#333;font-size:1rem;display:flex;align-items:center;gap:0}.o-list[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #ddd;font-size:1rem;color:#333}.o-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#f4f4f4;padding:.8rem 1rem;border-radius:8px;margin-bottom:.8rem}.o-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}.delete-btn[_ngcontent-%COMP%]{background-color:#e74c3c;border:none;color:#fff;padding:.4rem .8rem;border-radius:6px;cursor:pointer;transition:background-color .3s ease;margin-left:1rem;font-size:.9rem}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}"]})}}return n})();var op=class{constructor(){this.endDate="",this.location="",this.position="",this.company="",this.accomplishments=""}};var lR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/work-experience",this.workExperienceRef=t.collection(this.dbPath)}getWorkExperience(){return this.workExperienceRef}createWorkExperience(t){return this.workExperienceRef.add(P({},t))}deleteWorkExperience(t){return this.workExperienceRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function XU(n,e){if(n&1){let t=Yt();U(0,"div",13)(1,"span"),me(2),$(),U(3,"button",14),Oe("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),$()()}if(n&2){let t=e.$implicit;ne(2),Xi("",t.company," - ",t.position,"")}}var dR=(()=>{class n{constructor(t){this.workExperienceService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.workExperience=[],this.myWorkExperience=new op,console.log(this.workExperienceService),this.workExperienceService.getWorkExperience().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.workExperience=r,console.log(this.myWorkExperience)})}AgregarJob(){console.log(this.myWorkExperience),this.workExperienceService.createWorkExperience(this.myWorkExperience).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.workExperienceService.deleteWorkExperience(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(lR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-workexperience"]],decls:22,vars:8,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","startDate","placeholder","start date (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","end date (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","location","placeholder","location (city, country)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","position","placeholder","position",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","company","placeholder","company",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","accomplishments","placeholder","accomplishments",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p",2),me(3,"work-experience items"),$()()(),U(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),Ae("ngModelChange",function(s){return Me(i.myWorkExperience.startDate,s)||(i.myWorkExperience.startDate=s),s}),$(),ve(8,"br"),U(9,"input",5),Ae("ngModelChange",function(s){return Me(i.myWorkExperience.endDate,s)||(i.myWorkExperience.endDate=s),s}),$(),ve(10,"br"),U(11,"input",6),Ae("ngModelChange",function(s){return Me(i.myWorkExperience.location,s)||(i.myWorkExperience.location=s),s}),$(),ve(12,"br"),U(13,"input",7),Ae("ngModelChange",function(s){return Me(i.myWorkExperience.position,s)||(i.myWorkExperience.position=s),s}),$(),ve(14,"br"),U(15,"input",8),Ae("ngModelChange",function(s){return Me(i.myWorkExperience.company,s)||(i.myWorkExperience.company=s),s}),$(),ve(16,"br"),U(17,"input",9),Ae("ngModelChange",function(s){return Me(i.myWorkExperience.accomplishments,s)||(i.myWorkExperience.accomplishments=s),s}),$(),ve(18,"br"),U(19,"input",10),Oe("click",function(){return i.AgregarJob()}),$()()(),U(20,"div",11),Ot(21,XU,5,2,"div",12),$()()),r&2&&(ne(7),Se("ngModel",i.myWorkExperience.startDate),ne(2),Se("ngModel",i.myWorkExperience.endDate),ne(2),Se("ngModel",i.myWorkExperience.location),ne(2),Se("ngModel",i.myWorkExperience.position),ne(2),Se("ngModel",i.myWorkExperience.company),ne(2),Se("ngModel",i.myWorkExperience.accomplishments),ne(2),Vt("value",i.btntxt),ne(2),Ft("ngForOf",i.workExperience))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff;margin:2rem auto 1rem;max-width:500px;text-align:left;padding-left:1rem}.container.color-light[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:16px;box-shadow:0 8px 20px #0003;max-width:500px;margin:2rem auto}.col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}input[type=text][_ngcontent-%COMP%]{padding:.7rem;font-size:1rem;border:1px solid #ccc;border-radius:8px}input[type=submit][_ngcontent-%COMP%]{padding:.7rem;background-color:#007acc;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:background-color .3s ease}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#005fa3}.life-container[_ngcontent-%COMP%]{color:#333;font-size:1rem;display:flex;align-items:center;gap:0}.o-list[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #ddd;font-size:1rem;color:#333}.o-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#f4f4f4;padding:.8rem 1rem;border-radius:8px;margin-bottom:.8rem}.o-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}.delete-btn[_ngcontent-%COMP%]{background-color:#e74c3c;border:none;color:#fff;padding:.4rem .8rem;border-radius:6px;cursor:pointer;transition:background-color .3s ease;margin-left:1rem;font-size:.9rem}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}"]})}}return n})();var sp=class{constructor(){this.startDate="",this.endDate="",this.titulo="",this.escuela=""}};var hR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/education",this.educationRef=t.collection(this.dbPath)}getEducation(){return this.educationRef}createEducation(t){return this.educationRef.add(P({},t))}deleteEducation(t){return this.educationRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function t$(n,e){if(n&1){let t=Yt();U(0,"div",11)(1,"span"),me(2),$(),U(3,"button",12),Oe("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),$()()}if(n&2){let t=e.$implicit;ne(2),Ym("",t.escuela," - ",t.startDate," - ",t.endDate,"")}}var fR=(()=>{class n{constructor(t){this.educationService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.education=[],this.myEducation=new sp,console.log(this.educationService),this.educationService.getEducation().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.education=r,console.log(this.education)})}AgregarJob(){console.log(this.myEducation),this.educationService.createEducation(this.myEducation).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.educationService.deleteEducation(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(hR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-education"]],decls:18,vars:6,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","startDate","placeholder","start date (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","endDate","placeholder","end date (mm/yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","titulo","placeholder","titulo",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","escuela","placeholder","escuela",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"education-list"],["class","education-item",4,"ngFor","ngForOf"],[1,"education-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p",2),me(3,"education items"),$()()(),U(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),Ae("ngModelChange",function(s){return Me(i.myEducation.startDate,s)||(i.myEducation.startDate=s),s}),$(),ve(8,"br"),U(9,"input",5),Ae("ngModelChange",function(s){return Me(i.myEducation.endDate,s)||(i.myEducation.endDate=s),s}),$(),ve(10,"br"),U(11,"input",6),Ae("ngModelChange",function(s){return Me(i.myEducation.titulo,s)||(i.myEducation.titulo=s),s}),$(),ve(12,"br"),U(13,"input",7),Ae("ngModelChange",function(s){return Me(i.myEducation.escuela,s)||(i.myEducation.escuela=s),s}),$(),ve(14,"br"),U(15,"input",8),Oe("click",function(){return i.AgregarJob()}),$()()(),U(16,"div",9),Ot(17,t$,5,3,"div",10),$()()),r&2&&(ne(7),Se("ngModel",i.myEducation.startDate),ne(2),Se("ngModel",i.myEducation.endDate),ne(2),Se("ngModel",i.myEducation.titulo),ne(2),Se("ngModel",i.myEducation.escuela),ne(2),Vt("value",i.btntxt),ne(2),Ft("ngForOf",i.education))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff;margin:2rem auto 1rem;max-width:500px;text-align:left;padding-left:1rem}.container.color-light[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:16px;box-shadow:0 8px 20px #0003;max-width:500px;margin:2rem auto}.col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}input[type=text][_ngcontent-%COMP%]{padding:.7rem;font-size:1rem;border:1px solid #ccc;border-radius:8px}input[type=submit][_ngcontent-%COMP%]{padding:.7rem;background-color:#007acc;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:background-color .3s ease}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#005fa3}.life-container[_ngcontent-%COMP%]{color:#333;font-size:1rem;display:flex;align-items:center;gap:0}.education-list[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #ddd;font-size:1rem;color:#333}.education-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#f4f4f4;padding:.8rem 1rem;border-radius:8px;margin-bottom:.8rem}.education-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}.delete-btn[_ngcontent-%COMP%]{background-color:#e74c3c;border:none;color:#fff;padding:.4rem .8rem;border-radius:6px;cursor:pointer;transition:background-color .3s ease;margin-left:1rem;font-size:.9rem}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}"]})}}return n})();var ap=class{constructor(){this.title="",this.year="",this.description=""}};var pR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/certificates",this.certificatesRef=t.collection(this.dbPath)}getCertificates(){return this.certificatesRef}createCertificates(t){return this.certificatesRef.add(P({},t))}deleteCertificates(t){return this.certificatesRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function r$(n,e){if(n&1){let t=Yt();U(0,"div",10)(1,"span"),me(2),$(),U(3,"button",11),Oe("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),$()()}if(n&2){let t=e.$implicit;ne(2),Xi("",t.title," - ",t.year,"")}}var gR=(()=>{class n{constructor(t){this.certificatesServices=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.certificates=[],this.myCertificates=new ap,console.log(this.certificatesServices),this.certificatesServices.getCertificates().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.certificates=r,console.log(this.certificates)})}AgregarJob(){console.log(this.myCertificates),this.certificatesServices.createCertificates(this.myCertificates).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.certificatesServices.deleteCertificates(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(pR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-certificates"]],decls:16,vars:5,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","titulo","placeholder","titulo",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","year","placeholder","a\xF1o (yyyy)",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","description","placeholder","description",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p",2),me(3,"certificates items"),$()()(),U(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),Ae("ngModelChange",function(s){return Me(i.myCertificates.title,s)||(i.myCertificates.title=s),s}),$(),ve(8,"br"),U(9,"input",5),Ae("ngModelChange",function(s){return Me(i.myCertificates.year,s)||(i.myCertificates.year=s),s}),$(),ve(10,"br"),U(11,"input",6),Ae("ngModelChange",function(s){return Me(i.myCertificates.description,s)||(i.myCertificates.description=s),s}),$(),ve(12,"br"),U(13,"input",7),Oe("click",function(){return i.AgregarJob()}),$()()(),U(14,"div",8),Ot(15,r$,5,2,"div",9),$()()),r&2&&(ne(7),Se("ngModel",i.myCertificates.title),ne(2),Se("ngModel",i.myCertificates.year),ne(2),Se("ngModel",i.myCertificates.description),ne(2),Vt("value",i.btntxt),ne(2),Ft("ngForOf",i.certificates))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff;margin:2rem auto 1rem;max-width:500px;text-align:left;padding-left:1rem}.container.color-light[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:16px;box-shadow:0 8px 20px #0003;max-width:500px;margin:2rem auto}.col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}input[type=text][_ngcontent-%COMP%]{padding:.7rem;font-size:1rem;border:1px solid #ccc;border-radius:8px}input[type=submit][_ngcontent-%COMP%]{padding:.7rem;background-color:#007acc;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:background-color .3s ease}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#005fa3}.life-container[_ngcontent-%COMP%]{color:#333;font-size:1rem;display:flex;align-items:center;gap:0}.o-list[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #ddd;font-size:1rem;color:#333}.o-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#f4f4f4;padding:.8rem 1rem;border-radius:8px;margin-bottom:.8rem}.o-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}.delete-btn[_ngcontent-%COMP%]{background-color:#e74c3c;border:none;color:#fff;padding:.4rem .8rem;border-radius:6px;cursor:pointer;transition:background-color .3s ease;margin-left:1rem;font-size:.9rem}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}"]})}}return n})();var up=class{constructor(){this.skill="",this.porcentage=""}};var mR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/skills",this.skillsRef=t.collection(this.dbPath)}getSkills(){return this.skillsRef}createSkills(t){return this.skillsRef.add(P({},t))}deleteSkills(t){return this.skillsRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function o$(n,e){if(n&1){let t=Yt();U(0,"div",9)(1,"span"),me(2),$(),U(3,"button",10),Oe("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),$()()}if(n&2){let t=e.$implicit;ne(2),Xi("",t.skill," - ",t.porcentage,"")}}var yR=(()=>{class n{constructor(t){this.skillsService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.skills=[],this.mySkills=new up,console.log(this.skillsService),this.skillsService.getSkills().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.skills=r,console.log(this.skills)})}AgregarJob(){console.log(this.mySkills),this.skillsService.createSkills(this.mySkills).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.skillsService.deleteSkills(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(mR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-skills"]],decls:14,vars:4,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","skill","placeholder","skill",1,"txt",3,"ngModelChange","ngModel"],["type","text","name","porcentage","placeholder","porcentage (00)",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p",2),me(3,"skills items"),$()()(),U(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),Ae("ngModelChange",function(s){return Me(i.mySkills.skill,s)||(i.mySkills.skill=s),s}),$(),ve(8,"br"),U(9,"input",5),Ae("ngModelChange",function(s){return Me(i.mySkills.porcentage,s)||(i.mySkills.porcentage=s),s}),$(),ve(10,"br"),U(11,"input",6),Oe("click",function(){return i.AgregarJob()}),$()()(),U(12,"div",7),Ot(13,o$,5,2,"div",8),$()()),r&2&&(ne(7),Se("ngModel",i.mySkills.skill),ne(2),Se("ngModel",i.mySkills.porcentage),ne(2),Vt("value",i.btntxt),ne(2),Ft("ngForOf",i.skills))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff;margin:2rem auto 1rem;max-width:500px;text-align:left;padding-left:1rem}.container.color-light[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:16px;box-shadow:0 8px 20px #0003;max-width:500px;margin:2rem auto}.col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}input[type=text][_ngcontent-%COMP%]{padding:.7rem;font-size:1rem;border:1px solid #ccc;border-radius:8px}input[type=submit][_ngcontent-%COMP%]{padding:.7rem;background-color:#007acc;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:background-color .3s ease}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#005fa3}.life-container[_ngcontent-%COMP%]{color:#333;font-size:1rem;display:flex;align-items:center;gap:0}.o-list[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #ddd;font-size:1rem;color:#333}.o-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#f4f4f4;padding:.8rem 1rem;border-radius:8px;margin-bottom:.8rem}.o-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}.delete-btn[_ngcontent-%COMP%]{background-color:#e74c3c;border:none;color:#fff;padding:.4rem .8rem;border-radius:6px;cursor:pointer;transition:background-color .3s ease;margin-left:1rem;font-size:.9rem}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}"]})}}return n})();var cp=class{constructor(){this.language=""}};var vR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/languages",this.languagesRef=t.collection(this.dbPath)}getLanguages(){return this.languagesRef}createLanguage(t){return this.languagesRef.add(P({},t))}deleteLanguage(t){return this.languagesRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function a$(n,e){if(n&1){let t=Yt();U(0,"div",8)(1,"span"),me(2),$(),U(3,"button",9),Oe("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),$()()}if(n&2){let t=e.$implicit;ne(2),Ji(t.language)}}var _R=(()=>{class n{constructor(t){this.languagesService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.languages=[],this.myLaguages=new cp,console.log(this.languagesService),this.languagesService.getLanguages().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.languages=r,console.log(this.languages)})}AgregarJob(){console.log(this.myLaguages),this.languagesService.createLanguage(this.myLaguages).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.languagesService.deleteLanguage(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(vR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-languages"]],decls:12,vars:3,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","language","placeholder","language",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p",2),me(3,"languages items"),$()()(),U(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),Ae("ngModelChange",function(s){return Me(i.myLaguages.language,s)||(i.myLaguages.language=s),s}),$(),ve(8,"br"),U(9,"input",5),Oe("click",function(){return i.AgregarJob()}),$()()(),U(10,"div",6),Ot(11,a$,5,1,"div",7),$()()),r&2&&(ne(7),Se("ngModel",i.myLaguages.language),ne(2),Vt("value",i.btntxt),ne(2),Ft("ngForOf",i.languages))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff;margin:2rem auto 1rem;max-width:500px;text-align:left;padding-left:1rem}.container.color-light[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:16px;box-shadow:0 8px 20px #0003;max-width:500px;margin:2rem auto}.col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}input[type=text][_ngcontent-%COMP%]{padding:.7rem;font-size:1rem;border:1px solid #ccc;border-radius:8px}input[type=submit][_ngcontent-%COMP%]{padding:.7rem;background-color:#007acc;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:background-color .3s ease}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#005fa3}.life-container[_ngcontent-%COMP%]{color:#333;font-size:1rem;display:flex;align-items:center;gap:0}.o-list[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #ddd;font-size:1rem;color:#333}.o-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#f4f4f4;padding:.8rem 1rem;border-radius:8px;margin-bottom:.8rem}.o-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}.delete-btn[_ngcontent-%COMP%]{background-color:#e74c3c;border:none;color:#fff;padding:.4rem .8rem;border-radius:6px;cursor:pointer;transition:background-color .3s ease;margin-left:1rem;font-size:.9rem}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}"]})}}return n})();var lp=class{constructor(){this.desciption=""}};var wR=(()=>{class n{constructor(t){this.db=t,this.dbPath="/interests",this.interestsRef=t.collection(this.dbPath)}getInterest(){return this.interestsRef}createInterests(t){return this.interestsRef.add(P({},t))}deleteInterets(t){return this.interestsRef.doc(t).delete()}static{this.\u0275fac=function(r){return new(r||n)(F(sn))}}static{this.\u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function c$(n,e){if(n&1){let t=Yt();U(0,"div",8)(1,"span"),me(2),$(),U(3,"button",9),Oe("click",function(){let i=Wt(t).$implicit,o=Zt();return Kt(o.deleteJob(i.id))}),me(4,"delete"),$()()}if(n&2){let t=e.$implicit;ne(2),Ji(t.desciption)}}var ER=(()=>{class n{constructor(t){this.interestsService=t,this.itemCount=0,this.btntxt="Agregar",this.goalText="",this.interests=[],this.myInterests=new lp,console.log(this.interestsService),this.interestsService.getInterest().snapshotChanges().pipe(Q(r=>r.map(i=>P({id:i.payload.doc.id},i.payload.doc.data())))).subscribe(r=>{this.interests=r,console.log(this.interests)})}AgregarJob(){console.log(this.myInterests),this.interestsService.createInterests(this.myInterests).then(()=>{console.log("Created new item successfully!")})}deleteJob(t){this.interestsService.deleteInterets(t).then(()=>{console.log("delete item successfully!")}),console.log(t)}static{this.\u0275fac=function(r){return new(r||n)(se(wR))}}static{this.\u0275cmp=ft({type:n,selectors:[["app-admin-interests"]],decls:12,vars:3,consts:[[1,"container","color-dark"],[1,"col"],[1,"section-title"],[1,"container","color-light"],["type","text","name","description","placeholder","description",1,"txt",3,"ngModelChange","ngModel"],["type","submit",1,"btn",3,"click","value"],[1,"o-list"],["class","o-item",4,"ngFor","ngForOf"],[1,"o-item"],[1,"delete-btn",3,"click"]],template:function(r,i){r&1&&(U(0,"div",0)(1,"div",1)(2,"p",2),me(3,"interests items"),$()()(),U(4,"div",3)(5,"div",1)(6,"form")(7,"input",4),Ae("ngModelChange",function(s){return Me(i.myInterests.desciption,s)||(i.myInterests.desciption=s),s}),$(),ve(8,"br"),U(9,"input",5),Oe("click",function(){return i.AgregarJob()}),$()()(),U(10,"div",6),Ot(11,c$,5,1,"div",7),$()()),r&2&&(ne(7),Se("ngModel",i.myInterests.desciption),ne(2),Vt("value",i.btntxt),ne(2),Ft("ngForOf",i.interests))},dependencies:[Xt,nn,bt,en,tn,jt,Lt],styles:[".section-title[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600;color:#fff;margin:2rem auto 1rem;max-width:500px;text-align:left;padding-left:1rem}.container.color-light[_ngcontent-%COMP%]{background-color:#fff;padding:2rem;border-radius:16px;box-shadow:0 8px 20px #0003;max-width:500px;margin:2rem auto}.col[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.8rem}input[type=text][_ngcontent-%COMP%]{padding:.7rem;font-size:1rem;border:1px solid #ccc;border-radius:8px}input[type=submit][_ngcontent-%COMP%]{padding:.7rem;background-color:#007acc;color:#fff;border:none;border-radius:8px;cursor:pointer;font-weight:700;transition:background-color .3s ease}input[type=submit][_ngcontent-%COMP%]:hover{background-color:#005fa3}.life-container[_ngcontent-%COMP%]{color:#333;font-size:1rem;display:flex;align-items:center;gap:0}.o-list[_ngcontent-%COMP%]{margin-top:1.5rem;padding-top:1rem;border-top:1px solid #ddd;font-size:1rem;color:#333}.o-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;background-color:#f4f4f4;padding:.8rem 1rem;border-radius:8px;margin-bottom:.8rem}.o-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex-grow:1}.delete-btn[_ngcontent-%COMP%]{background-color:#e74c3c;border:none;color:#fff;padding:.4rem .8rem;border-radius:6px;cursor:pointer;transition:background-color .3s ease;margin-left:1rem;font-size:.9rem}.delete-btn[_ngcontent-%COMP%]:hover{background-color:#c0392b}"]})}}return n})();var l$=[{path:"header",component:cR},{path:"workexperience",component:dR},{path:"education",component:fR},{path:"certificates",component:gR},{path:"skills",component:yR},{path:"languages",component:_R},{path:"interests",component:ER}],IR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n})}static{this.\u0275inj=ht({imports:[av.forRoot(l$),av]})}}return n})();var DR=(()=>{class n{constructor(){this.title="admin-cv"}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=ft({type:n,selectors:[["app-root"]],decls:27,vars:0,consts:[[1,"app-title"],["routerLink","/header"],["routerLink","/workexperience"],["routerLink","/education"],["routerLink","/certificates"],["routerLink","/skills"],["routerLink","/languages"],["routerLink","/interests"]],template:function(r,i){r&1&&(U(0,"h3",0)(1,"b"),me(2," admin-Cv App"),$()(),U(3,"nav")(4,"ul")(5,"li")(6,"a",1),me(7," header "),$()(),U(8,"li")(9,"a",2),me(10," work-experience "),$()(),U(11,"li")(12,"a",3),me(13," education "),$()(),U(14,"li")(15,"a",4),me(16," certificates "),$()(),U(17,"li")(18,"a",5),me(19," skills "),$()(),U(20,"li")(21,"a",6),me(22," languages "),$()(),U(23,"li")(24,"a",7),me(25," interests "),$()()()(),ve(26,"router-outlet"))},dependencies:[tv,uS]})}}return n})();var CR={production:!1,firebaseConfig:{apiKey:"AIzaSyAAz0scDogl-HLi-7L-xR_JuwGj0taVCX8",authDomain:"shtven-cv.firebaseapp.com",projectId:"shtven-cv",storageBucket:"shtven-cv.firebasestorage.app",messagingSenderId:"170672468707",appId:"1:170672468707:web:467930fee10a5c5c73cbd6"}};var bR=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=pt({type:n,bootstrap:[DR]})}static{this.\u0275inj=ht({imports:[Yb,wT,IR,SS.initializeApp(CR.firebaseConfig)]})}}return n})();Qb().bootstrapModule(bR,{ngZoneEventCoalescing:!0}).catch(n=>console.error(n));
